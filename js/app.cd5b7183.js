(function(e){function t(t){for(var n,i,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)i=o[d],a[i]&&p.push(a[i][0]),a[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var l=r[o];0!==a[l]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},s=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/girder_web_components/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;s.push(["a1ec","chunk-vendors"]),r()})({"05b1":function(e,t,r){"use strict";var n=r("1498"),a=r.n(n);a.a},"0e0d":function(e,t,r){},"0e3a":function(e,t,r){"use strict";var n=r("fe43"),a=r.n(n);a.a},1498:function(e,t,r){},"23cb":function(e,t,r){"use strict";var n=r("fed8"),a=r.n(n);a.a},"244e":function(e,t,r){},"2a95":function(e,t,r){},"67a5":function(e,t,r){"use strict";var n=r("8097"),a=r.n(n);a.a},8097:function(e,t,r){},"8d4c":function(e,t,r){"use strict";var n=r("0e0d"),a=r.n(n);a.a},a1ec:function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("097d");var n=r("2b0e"),a=r("9437"),s=r.n(a),i=r("ce5b"),o=r.n(i),l=(r("41e6"),r("bf40"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"girder-authentication-component"},[r("v-tabs",{attrs:{color:"primary","slider-color":"yellow",dark:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("v-tab",{key:"login"},[e._v("Log In")]),e.register?r("v-tab",{key:"registration"},[e._v("Register")]):e._e(),r("v-tab-item",{key:"login-box"},[r("girder-login",{attrs:{"oauth-providers":e.oauthProviders,"force-otp":e.forceOtp,"forgot-password-url":e.forgotPasswordUrl,"forgot-password-route":e.forgotPasswordRoute},on:{forgotpassword:function(t){e.$emit("forgotpassword")}}})],1),e.register?r("v-tab-item",{key:"registration-box"},[r("girder-registration",{attrs:{"oauth-providers":e.oauthProviders}})],1):e._e()],1)],1)}),c=[],u=(r("96cf"),r("3040")),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-widget"},[e._l(e.alerts.errors,function(t){return r("v-alert",{key:t,staticClass:"mt-0",attrs:{dismissible:"",transition:"scale-transition",value:!!t,type:"error"}},[e._v(e._s(t))])}),r("v-container",[r("v-form",{ref:"login",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[!e.otpFormVisible||e.forceOtp?r("v-text-field",{attrs:{label:"Username or e-mail",autofocus:"",rules:e.nonEmptyRules,"prepend-icon":"$vuetify.icons.user",type:"text"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}):e._e(),!e.otpFormVisible||e.forceOtp?r("v-text-field",{attrs:{type:"password",label:"Password",rules:e.nonEmptyRules,"prepend-icon":"$vuetify.icons.lock"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}):e._e(),e.otpFormVisible||e.forceOtp?r("v-text-field",{attrs:{type:"text",mask:"######",label:"Authentication code",rules:e.nonEmptyRules,"prepend-icon":"$vuetify.icons.otp"},model:{value:e.otp,callback:function(t){e.otp=t},expression:"otp"}}):e._e(),r("v-layout",{staticClass:"mt-2",attrs:{row:""}},[r("v-btn",{staticClass:"ml-0",attrs:{type:"submit",color:"primary",disabled:e.inProgress,loading:e.inProgress}},[r("v-icon",{attrs:{left:""}},[e._v("$vuetify.icons.login")]),e._v(e._s(e.otpFormVisible?"Verify code":"Login"))],1),r("v-spacer"),r("v-btn",{attrs:{flat:"",color:"primary",to:e.forgotPasswordRoute,href:e.forgotPasswordUrl},on:{click:function(t){e.$emit("forgotpassword")}}},[e._v("Forgot Password?")])],1)],1)],1),e.oauthProviders&&e.oauthProviders.length?[r("v-divider"),r("girder-oauth",{attrs:{providers:e.oauthProviders}})]:e._e()],2)},p=[],h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"oauth-widget"},[r("h4",[e._v("Or "+e._s(e.verb)+" with OAuth")]),e._l(e.providers,function(t){return r("v-btn",{key:t.id,staticClass:"ml-0 mr-3",attrs:{dark:e.iconMap[t.id].dark,color:e.iconMap[t.id].color,href:t.url}},[r("v-icon",{attrs:{left:""}},[e._v(e._s(e.$vuetify.icons[e.iconMap[t.id].icon]))]),e._v(e._s(t.name))],1)})],2)},f=[],m={github:{dark:!0,icon:"github"},google:{dark:!0,icon:"google",color:"#3367d6"},linkedin:{dark:!0,icon:"linkedin",color:"#283e4a"},bitbucket:{dark:!1,icon:"bitbucket"},box:{dark:!0,icon:"box_com",color:"#0071f7"},globus:{dark:!0,icon:"globus",color:"#335a95"}},v={props:{verb:{type:String,default:"sign in"},providers:{type:Array,required:!0}},data:function(){return{enabledProviders:[],iconMap:m}}},g=v,b=r("2877"),y=Object(b["a"])(g,h,f,!1,null,null,null),x=y.exports,w="authentication must include a one-time password",k={inject:["girderRest"],components:{GirderOauth:x},props:{forceOtp:{type:Boolean,default:!1},forgotPasswordUrl:{type:String,default:null},forgotPasswordRoute:{type:Object,default:null},oauthProviders:{type:Array,default:function(){return[]}}},data:function(){return{username:"",password:"",otp:null,inProgress:!1,alerts:{errors:[]},nonEmptyRules:[function(e){return!!e||"Item is required"}],otpFormVisible:!1}},methods:{login:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.login.validate()){e.next=2;break}return e.abrupt("return");case 2:return this.alerts.errors=[],this.inProgress=!0,e.prev=4,e.next=7,this.girderRest.login(this.username,this.password,this.otp);case 7:this.password="",this.otp=null,this.otpFormVisible=!1,e.next=21;break;case 12:if(e.prev=12,e.t0=e["catch"](4),e.t0.response&&401===e.t0.response.status){e.next=19;break}throw this.alerts.errors.push("Unknown error."),e.t0;case 19:t=e.t0.response.data.message,t&&t.indexOf(w)>=0?(this.otp=null,this.otpFormVisible=!0,this.$refs.login.resetValidation()):this.alerts.errors.push(t||"Unauthorized.");case 21:return e.prev=21,this.inProgress=!1,e.finish(21);case 24:case"end":return e.stop()}},e,this,[[4,12,21,24]])}));return function(){return e.apply(this,arguments)}}()}},_=k,O=Object(b["a"])(_,d,p,!1,null,null,null),R=O.exports,C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register-widget"},[e._l(e.alerts.errors,function(t){return r("v-alert",{key:t,staticClass:"mt-0",attrs:{dismissible:"",transition:"scale-transition",value:!0,type:"error"}},[e._v(e._s(t))])}),e._l(e.alerts.infos,function(t){return r("v-alert",{key:t,staticClass:"mt-0",attrs:{dismissible:"",transition:"scale-transition",value:!0,type:"info"}},[e._v(e._s(t))])}),r("v-container",[r("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[r("v-text-field",{attrs:{label:"Username",rules:e.nonEmptyRules,type:"text",autofocus:""},model:{value:e.login,callback:function(t){e.login=t},expression:"login"}}),r("v-text-field",{attrs:{label:"Email",rules:e.nonEmptyRules,type:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("v-text-field",{attrs:{label:"First Name",rules:e.nonEmptyRules,type:"text"},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),r("v-text-field",{attrs:{label:"Last Name",rules:e.nonEmptyRules,type:"text"},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),r("v-text-field",{attrs:{type:"password",label:"Password",rules:e.nonEmptyRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("v-text-field",{attrs:{type:"password",label:"Retype password",rules:e.retypeMustMatchPasswordRules},model:{value:e.retypePassword,callback:function(t){e.retypePassword=t},expression:"retypePassword"}}),r("v-btn",{staticClass:"ml-0",attrs:{type:"submit",color:"primary",loading:e.inProgress}},[e._v("Register")])],1)],1),e.oauthProviders&&e.oauthProviders.length?[r("v-divider"),r("girder-oauth",{attrs:{verb:"register",providers:e.oauthProviders}})]:e._e()],2)},j=[],$={inject:["girderRest"],components:{GirderOauth:x},props:{oauthProviders:{type:Array,default:function(){return[]}}},data:function(){var e=this,t=[function(e){return!!e||"Item is required"}],r=t.concat([function(t){return t===e.password||"Passwords must match"}]);return{login:"",email:"",firstName:"",lastName:"",password:"",retypePassword:"",retypePasswordErrors:[],inProgress:!1,alerts:{errors:[],infos:[]},nonEmptyRules:t,retypeMustMatchPasswordRules:r}},methods:{register:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.form.validate()){e.next=2;break}return e.abrupt("return");case 2:return this.inProgress=!0,this.alerts.errors=[],this.alerts.infos=[],e.prev=5,e.next=8,this.girderRest.register(this.login,this.email,this.firstName,this.lastName,this.password);case 8:t=e.sent,t.data.authToken||(this.alerts.infos.push("Registration needs email verification or administrator approval. \nCheck your email to continue."),this.$refs.form.reset()),e.next=20;break;case 12:if(e.prev=12,e.t0=e["catch"](5),e.t0.response&&400===e.t0.response.status){e.next=19;break}throw this.alerts.errors.push("Unknown error."),e.t0;case 19:this.alerts.errors.push(e.t0.response.data.message||"Invalid registration.");case 20:return e.prev=20,this.inProgress=!1,e.finish(20);case 23:case"end":return e.stop()}},e,this,[[5,12,20,23]])}));return function(){return e.apply(this,arguments)}}()}},T=$,P=Object(b["a"])(T,C,j,!1,null,null,null),E=P.exports,M={inject:["girderRest"],components:{GirderLogin:R,GirderRegistration:E},props:{register:{type:Boolean,default:!1},oauth:{type:Boolean,default:!1},forgotPasswordUrl:{type:String,default:null},forgotPasswordRoute:{type:[Object,String],default:null},forceOtp:{type:Boolean,default:!1}},data:function(){return{activeTab:null}},asyncComputed:{oauthProviders:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.oauth){e.next=12;break}return e.prev=1,e.next=4,this.girderRest.get("oauth/provider",{params:{redirect:window.location.href,list:!0}});case 4:return e.abrupt("return",e.sent.data);case 7:return e.prev=7,e.t0=e["catch"](1),e.abrupt("return",[]);case 10:e.next=13;break;case 12:return e.abrupt("return",[]);case 13:case"end":return e.stop()}},e,this,[[1,7]])}));return function(){return e.apply(this,arguments)}}()}},F=M,z=Object(b["a"])(F,l,c,!1,null,null,null),U=z.exports,N=U,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("girder-data-table",{staticClass:"girder-file-browser",attrs:{draggable:e.draggable,rows:e.rows,pagination:e.pagination,"total-items":e.totalItems,loading:e.loading,"select-enabled":e.selectEnabled},on:{"update:pagination":function(t){e.pagination=t},rowclick:e.changeLocation,drag:function(t){e.$emit("drag",t)},dragstart:function(t){e.$emit("dragstart",t)},dragend:function(t){e.$emit("dragend",t)},drop:function(t){e.$emit("drop",t)}},scopedSlots:e._u([{key:"header",fn:function(t){return[r("tr",{staticClass:"secondary lighten-5"},[e.selectEnabled?r("th",{staticClass:"pl-3 pr-0",attrs:{width:"1%"}},[r("v-checkbox",{staticClass:"secondary--text text--darken-1 pr-2",attrs:{color:"accent","hide-details":"","input-value":t.all,indeterminate:e.selected.length>0&&!t.all},nativeOn:{click:function(t){return e.toggleAll(t)}}})],1):e._e(),r("th",{staticClass:"pl-3",attrs:{colspan:"100",width:"99%"}},[r("v-layout",{attrs:{row:"","align-center":""}},[r("girder-breadcrumb",{ref:"breadcrumb",attrs:{location:e.location},on:{crumbclick:e.changeLocation}}),r("v-spacer"),e._t("headerwidget"),e.newFolderEnabled?r("v-btn",{staticClass:"ma-0",attrs:{flat:"",small:"",color:"secondary darken-2"},on:{click:function(t){e.$emit("click:newfolder")}}},[r("v-icon",{staticClass:"mdi-24px mr-1",attrs:{left:"",color:"accent"}},[e._v(e._s(e.$vuetify.icons.folderNew))]),r("span",{staticClass:"hidden-xs-only"},[e._v("New Folder")])],1):e._e(),e.newItemEnabled?r("v-btn",{staticClass:"ma-0",attrs:{flat:"",small:"",color:"secondary darken-2"},on:{click:function(t){e.$emit("click:newitem")}}},[r("v-icon",{staticClass:"mdi-24px mr-1",attrs:{left:"",color:"accent"}},[e._v(e._s(e.$vuetify.icons.fileNew))]),r("span",{staticClass:"hidden-xs-only"},[e._v("New Item")])],1):e._e()],2)],1)])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})},I=[],B=r("c93e"),q=r("8afe"),L=(r("ac6a"),{methods:{formatSize:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.base,a=void 0===n?1024:n,s=r.unit,i=void 0===s?"B":s;if(e<a)return"".concat(e," ").concat(i);var o=e;for(t=0;o>=a&&t<4;t+=1)o/=a;return"".concat(o.toFixed(2),"  ").concat(["","K","M","G","T"][t]).concat(i)}}}),D={methods:{progressPercent:function(e){return e.total?Math.round(100*(e.current||0)/e.total):0}}},G=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-breadcrumbs",{staticClass:"girder-breadcrumb-component font-weight-bold pa-0"},[r("span",{staticClass:"subheading font-weight-bold",attrs:{slot:"divider",disabled:e.disabled},slot:"divider"},[e._v("/")]),r("v-breadcrumbs-item",{attrs:{disabled:e.disabled||0===e.breadcrumb.path.length},nativeOn:{click:function(t){e.$emit("crumbclick",e.breadcrumb.root)}}},[r("v-icon",{staticClass:"mdi-24px pr-2",attrs:{color:"accent"}},[e._v(e._s(e.$vuetify.icons.globe))]),e._v(e._s(e.breadcrumb.root.name))],1),e._l(e.breadcrumb.path,function(t,n){return r("v-breadcrumbs-item",{key:t._id,attrs:{disabled:e.disabled||n==e.breadcrumb.path.length-1},nativeOn:{click:function(r){e.$emit("crumbclick",t)}}},[e._v(e._s(t.name))])}),e._l(e.append,function(t){return r("v-breadcrumbs-item",{key:t._id},[e._v(e._s(t))])})],2)},A=[],V=(r("7f7f"),{props:{location:{type:Object,required:!0,validator:function(e){return e._modelType&&e._id}},disabled:{type:Boolean,default:!1},append:{type:Array,default:function(){return[]}}},inject:["girderRest"],data:function(){return{loading:!1}},asyncComputed:{breadcrumb:{default:{root:{},path:[]},get:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a,s,i,o,l,c,u,d,p=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,t={root:{},path:[]},r=this.location,n=r._id,a=r._modelType,s=r.name,"folder"!==a){e.next=20;break}if(!s){e.next=8;break}t.path.unshift(this.location),e.next=13;break;case 8:return e.next=10,this.girderRest.get("folder/".concat(n));case 10:i=e.sent,o=i.data,t.path.unshift(this.extractCrumbData(o));case 13:return e.next=15,this.girderRest.get("folder/".concat(n,"/rootpath"));case 15:l=e.sent,c=l.data,c.reverse().forEach(function(e){var r=e.object,n=p.extractCrumbData(r);"folder"===n._modelType?t.path.unshift(n):t.root=n}),e.next=25;break;case 20:return e.next=22,this.girderRest.get("".concat(a,"/").concat(n));case 22:u=e.sent,d=u.data,t.root=this.extractCrumbData(d);case 25:return this.loading=!1,e.abrupt("return",t);case 27:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},methods:{extractCrumbData:function(e){return Object(B["a"])({},e,{name:"user"!==e._modelType?e.name:e.login})}}}),Q=V,J=Object(b["a"])(Q,G,A,!1,null,null,null),H=J.exports,K=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-data-table",{staticClass:"girder-data-table",attrs:{"select-all":"","headers-length":4,value:e.value,pagination:e.pagination,items:e.rows,"total-items":e.totalItems,loading:!!e.loading&&"accent","item-key":"_id"},on:{input:function(t){e.$emit("input",t)},"update:pagination":function(t){e.$emit("update:pagination",t)}},scopedSlots:e._u([{key:"headers",fn:function(t){return[e._t("header",null,{all:t.all,indeterminate:t.indeterminate,headers:t.headers})]}},{key:"items",fn:function(t){return[r("tr",{key:t.index,staticClass:"itemRow",class:{selectable:!e.selectEnabled},attrs:{draggable:e.draggable,active:t.selected},on:{click:function(r){e.handleRowSelect(r,t)},drag:function(r){e.$emit("drag",{items:[t],event:r})},dragstart:function(r){e.$emit("dragstart",{items:[t],event:r})},dragend:function(r){e.$emit("dragend",{items:[t],event:r})},drop:function(r){e.$emit("drop",{items:[t],event:r})}}},[e.selectEnabled?r("td",{staticClass:"pl-3 pr-0"},[r("v-checkbox",{staticClass:"secondary--text text--darken-1 pr-2",attrs:{"input-value":t.selected,accent:"","hide-details":""}})],1):e._e(),r("td",{staticClass:"pl-3",attrs:{colspan:"2"}},[r("span",{staticClass:"text-container secondary--text text--darken-3 nobreak",class:{selectable:e.selectEnabled&&"item"!==t.item._modelType},on:{click:function(r){r.stopPropagation(),e.$emit("rowclick",t.item)}}},[r("v-icon",{staticClass:"pr-2",attrs:{color:t.selected?"accent":""}},[e._v(e._s(e.$vuetify.icons[t.item.icon]))]),e._v(e._s(t.item.name))],1)]),r("td",{staticClass:"text-xs-right secondary--text text--darken-3 nobreak"},[e._v(e._s(t.item.size))])])]}}])},[r("template",{slot:"no-data"},[r("td",{staticClass:"text-xs-center",attrs:{colspan:"2",width:"100%"}},[e._v("No Data Available")])]),r("template",{slot:"no-results"},[r("td",{staticClass:"text-xs-center",attrs:{colspan:"2",width:"100%"}},[e._v("No Data Available")])])],2)},W=[],X=(r("7514"),r("55dd"),r("9393")),Y=(r("c5f6"),{props:{draggable:{type:Boolean,default:!1},loading:{type:Boolean,required:!0},pagination:{type:Object,required:!0},rows:{type:Array,required:!0},selectEnabled:{type:Boolean,required:!0},totalItems:{type:Number,required:!0},value:{type:Array,default:function(){return[]}}},data:function(){return{lastCheckBoxIdx:null}},methods:{handleRowSelect:function(e,t){var r=this,n=e.shiftKey;if(this.selectEnabled){if(t.selected=!t.selected,n&&null!==this.lastCheckBoxIdx){var a=[this.lastCheckBoxIdx,t.index+1].sort(),s=Object(X["a"])(a,2),i=s[0],o=s[1],l=this.rows.slice(i,o).filter(function(e){return void 0===r.value.find(function(t){return t._id===e._id})});this.$emit("input",l.concat(this.value))}this.lastCheckBoxIdx=t.index}else this.$emit("rowclick",t.item)}}}),Z=Y,ee=(r("8d4c"),Object(b["a"])(Z,K,W,!1,null,null,null)),te=ee.exports,re="folder",ne="item",ae={components:{GirderBreadcrumb:H,GirderDataTable:te},mixins:[L],props:{draggable:{type:Boolean,default:!1},location:{type:Object,required:!0,validator:function(e){return e._modelType&&e._id}},selectEnabled:{type:Boolean,default:!0},multiSelectEnabled:{type:Boolean,default:!1},uploadEnabled:{type:Boolean,default:!1},newItemEnabled:{type:Boolean,default:!0},newFolderEnabled:{type:Boolean,default:!0}},inject:["girderRest"],data:function(){return{pagination:{rowsPerPage:10,page:1},refreshCounter_:0,rows:[],rowsLoading:!1,selected:[]}},computed:{loading:function(){return this.$refs.breadcrumb&&this.$refs.breadcrumb.loading||this.rowsLoading},totalItems:function(){return this.counts.nFolders+this.counts.nItems}},asyncComputed:{counts:{default:{nFolders:0,nItems:0},get:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.location,r=t._modelType,n=t._id,a="".concat(r,"/").concat(n,"/details"),e.next=4,this.girderRest.get(a);case 4:return s=e.sent,i=s.data,e.abrupt("return",{nFolders:i.nFolders||0,nItems:i.nItems||0});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),watch:function(){return[this.refreshCounter_,this.location]}}},watch:{location:function(e,t){e._id!==t._id&&(this.pagination.page=1)},selected:function(e){this.$emit("selection-changed",e)},counts:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchPaginatedRows();case 2:this.rows=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),pagination:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchPaginatedRows();case 2:this.rows=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},methods:{toggleAll:function(){this.selected.length===this.rows.length?this.selected=[]:this.selected=this.rows.slice()},changeLocation:function(e){var t=e._modelType,r=e._id;this.location._id===r&&this.location._modelType===t||"item"===t?"item"===t&&this.$emit("itemclick",e):this.$emit("update:location",e)},refresh:function(){this.refreshCounter_+=1},fetchPaginatedRows:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a,s,i,o,l,c,u,d,p,h,f=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.counts.nFolders||this.counts.nItems){e.next=2;break}return e.abrupt("return",[]);case 2:return this.rowsLoading=!0,r=this.counts,n=this.location,a=this.pagination,s=a.page,i=a.rowsPerPage,o={parentType:n._modelType,parentId:n._id,limit:i>=0?i:null,offset:(s-1)*i},l=r.nFolders>o.offset?i-(r.nFolders-o.offset):i,c=o.offset-r.nFolders,u={folderId:n._id,limit:i>=0?l:null,offset:c>0?c:0},d=[],d.push(this.girderRest.get(re,{params:o})),(u.limit>0||null===u.limit)&&"folder"===n._modelType&&d.push(this.girderRest.get(ne,{params:u})),e.next=14,Promise.all(d);case 14:return e.t0=function(e){return e.data},p=e.sent.map(e.t0),h=(t=[].concat).apply.apply(t,Object(q["a"])(p)).map(function(e){return Object(B["a"])({},e,{size:e.size?f.formatSize(e.size):"",icon:e._modelType in f.$vuetify.icons?e._modelType:"file"})}),this.rowsLoading=!1,e.abrupt("return",h);case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},se=ae,ie=Object(b["a"])(se,S,I,!1,null,null,null),oe=ie.exports,le=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"g-md-viewer",domProps:{innerHTML:e._s(e.markdown)}})},ce=[],ue=r("d4cd"),de=r.n(ue),pe={props:{text:{default:"",type:String}},computed:{markdown:function(){return de()({linkify:!0}).render(this.text)}}},he=pe,fe=(r("23cb"),Object(b["a"])(he,le,ce,!1,null,null,null)),me=fe.exports,ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"girder-markdown-editor"},[r("v-tabs",{staticClass:"md-tab",model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("v-tab",{key:"edit"},[e._v("Edit")]),r("v-tab-item",[r("v-textarea",{attrs:{"hide-details":"",box:"","single-line":"",label:e.label,placeholder:e.placeholder},model:{value:e.text_,callback:function(t){e.text_=t},expression:"text_"}})],1),r("v-tab",{key:"preview"},[e._v("Preview")]),r("v-tab-item",{staticClass:"md-preview pa-2 grey lighten-3"},[r("girder-markdown",{attrs:{text:e.text_}})],1)],1),r("v-toolbar",{attrs:{dark:"",color:"secondary darken-2"}},[r("span",{staticClass:"hidden-xs-only"},[e._v("Supports"),r("a",{attrs:{href:"https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet"}},[e._v(" Markdown")])]),r("v-spacer"),r("v-toolbar-items",[r("v-btn",{class:{active:0===e.activeTab},attrs:{flat:""},on:{click:function(t){e.activeTab=0}}},[r("v-layout",{attrs:{"align-center":"","justify-content":"",column:""}},[r("v-icon",{staticClass:"mdi-24px"},[e._v(e._s(e.$vuetify.icons.edit))]),r("span",{staticClass:"caption text-capitalize"},[e._v("Write")])],1)],1),r("v-btn",{class:{active:1===e.activeTab},attrs:{flat:""},on:{click:function(t){e.activeTab=1}}},[r("v-layout",{attrs:{"align-center":"","justify-content":"",column:""}},[r("v-icon",{staticClass:"mdi-24px"},[e._v(e._s(e.$vuetify.icons.preview))]),r("span",{staticClass:"caption text-capitalize"},[e._v("Preview")])],1)],1)],1)],1)],1)},ge=[],be={components:{GirderMarkdown:me},model:{prop:"text",event:"changed"},props:{placeholder:{default:null,type:String},text:{default:"",type:String},label:{type:String,default:""}},data:function(){return{activeTab:0,text_:this.text}},watch:{text:function(){this.text_=this.text},text_:function(){this.$emit("changed",this.text_)}}},ye=be,xe=(r("0e3a"),Object(b["a"])(ye,ve,ge,!1,null,null,null)),we=xe.exports,ke=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{staticClass:"girder-searchbar",attrs:{row:"","align-center":""}},[r("v-icon",{staticClass:"mdi-24px",attrs:{color:"white"}},[e._v(e._s(e.$vuetify.icons.search))]),r("v-menu",{staticClass:"grow mx-3",attrs:{"offset-y":"","content-class":"girder-searchbar-menu","open-on-click":!1,value:e.searchText,"nudge-bottom":6,transition:"slide-y-transition"}},[r("v-text-field",{attrs:{slot:"activator",light:"",solo:"","hide-details":"",clearable:""},slot:"activator",model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),r("v-list",[e._l(e.quickResults,function(t){return r("v-list-tile",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],key:t._id,on:{click:function(r){e.$emit("select",t)}}},[r("v-list-tile-action",[r("v-icon",[e._v(e._s(e.$vuetify.icons[t._modelType]))])],1),r("v-list-tile-content",[r("v-list-tile-title",[e._v(e._s(t.name||e.formatUsername(t)))])],1)],1)}),r("v-list-tile",{directives:[{name:"show",rawName:"v-show",value:e.searchText&&0===e.quickResults.length&&!e.loading,expression:"searchText && quickResults.length === 0 && !loading"}]},[r("v-list-tile-action",[r("v-icon",[e._v(e._s(e.$vuetify.icons.alert))])],1),r("v-list-tile-content",[r("v-list-tile-title",[e._v("No results found for query '"+e._s(e.searchText)+"'")]),r("v-list-tile-sub-title",[e._v("Modify search parameters or refine your query.")])],1)],1),r("v-list-tile",{directives:[{name:"show",rawName:"v-show",value:!e.loading&&e.showMore&&e.searchResults.length>e.maxQuickResults,expression:"!loading && showMore && searchResults.length > maxQuickResults"}],on:{click:function(t){e.$emit("moreresults",e.searchParams)}}},[r("v-list-tile-action",[r("v-icon",[e._v(e._s(e.$vuetify.icons.more))])],1),r("v-list-tile-content",[r("v-list-tile-title",[e._v("More")])],1)],1),e._l(e.maxQuickResults+(e.showMore?1:0),function(t){return r("v-list-tile",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],key:"skeleton-"+t},[r("v-list-tile-action",[r("v-icon",{staticClass:"grey--text text--lighten-1"},[e._v(e._s(e.$vuetify.icons.circle))])],1),r("v-list-tile-content",[r("v-list-tile-title",{staticClass:"skeleton skeleton--text mb-2",style:{width:60+t%3*4+"%",height:"10px"}}),r("v-list-tile-sub-title",{staticClass:"skeleton skeleton--text",style:{width:45-t%2*4+"%",height:"6px"}})],1)],1)})],2)],1),r("v-menu",{attrs:{"offset-y":"",left:"","content-class":"girder-search-arrow-menu","close-on-content-click":!1},model:{value:e.searchOptionsMenu,callback:function(t){e.searchOptionsMenu=t},expression:"searchOptionsMenu"}},[r("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[r("v-icon",{staticClass:"mdi-24px"},[e._v(e._s(e.$vuetify.icons.settings))])],1),r("v-card",[r("v-card-actions",[r("v-layout",{attrs:{column:""}},[r("v-radio-group",{staticClass:"my-2",attrs:{"hide-details":""},model:{value:e.searchMode,callback:function(t){e.searchMode=t},expression:"searchMode"}},[r("v-radio",{key:"text",staticClass:"mb-1",attrs:{label:"Text Search",value:"text"}}),r("v-radio",{key:"prefix",attrs:{label:"Prefix Search",value:"prefix"}})],1),r("v-divider"),r("v-checkbox",{staticClass:"mt-2",attrs:{"hide-details":"",label:"User",value:"user"},model:{value:e.searchTypes,callback:function(t){e.searchTypes=t},expression:"searchTypes"}}),r("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Folder",value:"folder"},model:{value:e.searchTypes,callback:function(t){e.searchTypes=t},expression:"searchTypes"}}),r("v-checkbox",{staticClass:"mt-1 mb-1",attrs:{"hide-details":"",label:"Item",value:"item"},model:{value:e.searchTypes,callback:function(t){e.searchTypes=t},expression:"searchTypes"}})],1)],1)],1)],1)],1)},_e=[],Oe=r("c0a4"),Re=r.n(Oe),Ce={theme:{primary:Re.a.lightBlue.darken1,secondary:Re.a.blueGrey,accent:Re.a.lightBlue.darken1,error:Re.a.red,info:Re.a.lightBlue.lighten1},iconfont:"mdi",icons:{alert:"mdi-alert-circle",bitbucket:"mdi-bitbucket",box_com:"mdi-package",chevron:"mdi-chevron-right",circle:"mdi-checkbox-blank-circle",collection:"mdi-file-tree",edit:"mdi-pencil",file:"mdi-file",fileNew:"mdi-file-plus",fileUpload:"mdi-file-upload",folder:"mdi-folder",folderNew:"mdi-folder-plus",github:"mdi-github-circle",globe:"mdi-earth",globus:"mdi-earth",google:"mdi-google",group:"mdi-account-multiple",item:"mdi-file",linkedin:"mdi-linkedin",lock:"mdi-lock",login:"mdi-login",logout:"mdi-logout",more:"mdi-dots-horizontal",otp:"mdi-shield-key",preview:"mdi-file-find",search:"mdi-magnify",settings:"mdi-tune",user:"mdi-account"}},je=(r("f751"),r("c665")),$e=r("dc0a"),Te=r("aa9a"),Pe=r("d328"),Ee=r("11d9"),Me=r("1083"),Fe=r("4328"),ze=(r("ffc1"),r("bc3a")),Ue=r.n(ze),Ne=function(){function e(t){Object(je["a"])(this,e),Object.assign(this,t,{etags:{},offset:0,partNumber:1})}return Object(Te["a"])(e,[{key:"_finalizeMultipartXml",value:function(){var e=document.implementation.createDocument(null,null,null),t=e.createElement("CompleteMultipartUpload");return Object.entries(this.etags).forEach(function(r){var n=Object(X["a"])(r,2),a=n[0],s=n[1],i=e.createElement("Part"),o=e.createElement("PartNumber"),l=e.createElement("ETag");o.appendChild(e.createTextNode(a)),l.appendChild(e.createTextNode(s)),i.appendChild(o),i.appendChild(l),t.appendChild(i)}),t.outerHTML}},{key:"_multiChunkUpload",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.upload.s3.request,r=t.headers,n=t.method,a=t.url,e.next=3,Ue.a.request({data:null,headers:r,method:n,url:a});case 3:return s=e.sent,i=(new DOMParser).parseFromString(s.data,"text/xml"),this.upload.s3.uploadId=i.querySelector("InitiateMultipartUploadResult > UploadId").textContent,e.abrupt("return",this._sendChunks());case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_sendChunks",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a,s,i,o,l,c,u,d,p=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=function(e){return p.progress({current:p.offset+e.loaded,total:p.file.size,indeterminate:!e.lengthComputable})};case 1:if(!(this.offset<this.file.size)){e.next=16;break}return r=this.file.slice(this.offset,this.offset+this.upload.s3.chunkLength),e.next=5,this.$rest.post("file/chunk",Object(Fe["stringify"])({chunk:JSON.stringify({contentLength:r.size,partNumber:this.partNumber,s3UploadId:this.upload.s3.uploadId}),offset:0,uploadId:this.upload._id}));case 5:return n=e.sent.data.s3.request,a=n.method,s=n.url,e.next=10,Ue.a.request({data:r,method:a,url:s,onUploadProgress:t});case 10:i=e.sent,this.etags[this.partNumber]=i.headers.etag,this.partNumber+=1,this.offset+=r.size,e.next=1;break;case 16:return this.progress({indeterminate:!0}),e.next=19,this.$rest.post("file/completion",Object(Fe["stringify"])({uploadId:this.upload._id}));case 19:return o=e.sent,l=o.data.s3FinalizeRequest,c=l.headers,u=l.method,d=l.url,e.next=23,Ue.a.request({data:this._finalizeMultipartXml(),headers:c,method:u,url:d});case 23:return e.abrupt("return",o.data);case 24:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.upload.s3.chunked){e.next=2;break}return e.abrupt("return",this._multiChunkUpload());case 2:return t=this.upload.s3.request,r=t.headers,n=t.method,a=t.url,e.next=5,Ue.a.request({data:this.file,headers:r,method:n,url:a,onUploadProgress:function(e){return s.progress({current:e.loaded,total:s.file.size,indeterminate:!e.lengthComputable})}});case 5:return this.progress({indeterminate:!0}),e.next=8,this.$rest.post("file/completion",Object(Fe["stringify"])({uploadId:this.upload._id}));case 8:return e.abrupt("return",e.sent.data);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resume",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.upload.s3.chunked){e.next=2;break}return e.abrupt("return",this._sendChunks());case 2:return e.next=4,this.$rest.get("file/offset?uploadId=".concat(this.upload._id));case 4:return this.upload.s3.request=e.sent.data,e.abrupt("return",this.start());case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),Se=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.$rest,a=r.parent,s=r.progress,i=void 0===s?function(){return null}:s;Object(je["a"])(this,e),Object.assign(this,{$rest:n,file:t,parent:a,progress:i})}return Object(Te["a"])(e,[{key:"start",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("not implemented");case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resume",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.start());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"beforeUpload",value:function(){}},{key:"afterUpload",value:function(){}},{key:"onError",value:function(e){}}]),e}(),Ie=67108864,Be={s3:Ne},qe=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.$rest,s=n.parent,i=n.progress,o=void 0===i?function(){return null}:i,l=n.params,c=void 0===l?{}:l,u=n.chunkLen,d=void 0===u?Ie:u;return Object(je["a"])(this,t),r=Object(Pe["a"])(this,Object(Ee["a"])(t).call(this,e,{$rest:a,parent:s,progress:o})),Object.assign(Object(Me["a"])(Object(Me["a"])(r)),{params:c,chunkLen:d,upload:null,offset:0,behavior:null}),r}return Object(Te["a"])(t,[{key:"_sendChunks",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=function(e){return s.progress({indeterminate:!e.lengthComputable,current:s.offset+e.loaded,size:s.file.size})};case 1:if(!(this.offset<this.file.size)){e.next=11;break}return r=Math.min(this.offset+this.chunkLen,this.file.size),n=this.file.slice(this.offset,r),a="file/chunk?offset=".concat(this.offset,"&uploadId=").concat(this.upload._id),e.next=7,this.$rest.post(a,n,{onUploadProgress:t,headers:{"Content-Type":"application/octet-stream"}});case 7:this.upload=e.sent.data,this.offset=r,e.next=1;break;case 11:return e.abrupt("return",this.upload);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$rest.post("/file",Object(Fe["stringify"])(Object(B["a"])({parentType:this.parent._modelType,parentId:this.parent._id,name:this.file.name,size:this.file.size,mimeType:this.file.type},this.params)));case 2:if(this.upload=e.sent.data,!this.upload.behavior||!Be[this.upload.behavior]){e.next=6;break}return this.behavior=new Be[this.upload.behavior](this),e.abrupt("return",this.behavior.start());case 6:return e.abrupt("return",this._sendChunks());case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resume",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.upload){e.next=2;break}return e.abrupt("return",this.start());case 2:if(this.progress({indeterminate:!0}),!this.behavior){e.next=5;break}return e.abrupt("return",this.behavior.resume());case 5:return e.next=7,this.$rest.get("file/offset?uploadId=".concat(this.upload._id));case 7:return this.offset=e.sent.data.offset,e.abrupt("return",this._sendChunks());case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),Object($e["a"])(t,e),t}(Se),Le=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;return Object(je["a"])(this,t),e=Object(Pe["a"])(this,Object(Ee["a"])(t).call(this,{data:function(){return{flag:!1}}})),e.count=0,e.delay=r,e.timeout=null,e}return Object(Te["a"])(t,[{key:"inc",value:function(){this.count+=1,this.count>0&&this._toggleFlag(!0)}},{key:"dec",value:function(){this.count=Math.max(0,this.count-1),0===this.count&&this._toggleFlag(!1)}},{key:"_toggleFlag",value:function(e){var t=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.flag=e},this.delay)}}]),Object($e["a"])(t,e),t}(n["default"]),De={props:{maxQuickResults:{type:Number,default:6},showMore:{type:Boolean,default:!0}},inject:["girderRest"],data:function(){return{searchText:"",searchMode:"prefix",searchTypes:["user","folder","item"],searchOptionsMenu:!1}},computed:{loading:function(){return this.counter.flag},quickResults:function(){return this.searchResults.slice(0,this.maxQuickResults)},searchParams:function(){return{q:this.searchText,mode:this.searchMode,types:JSON.stringify(this.searchTypes),limit:this.maxQuickResults+1}}},asyncComputed:{searchResults:{default:[],get:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],this.counter.inc(),e.prev=2,!this.searchText){e.next=9;break}return e.next=6,this.girderRest.get("resource/search",{params:this.searchParams});case 6:n=e.sent,a=n.data,t=(r=[]).concat.apply(r,Object(q["a"])(this.searchTypes.map(function(e){return a[e]})));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),this.$emit("error",e.t0.message||"Unknown error during search");case 14:return this.counter.dec(),e.abrupt("return",t);case 16:case"end":return e.stop()}},e,this,[[2,11]])}));return function(){return e.apply(this,arguments)}}()}},beforeCreate:function(){this.counter=new Le},methods:{formatUsername:function(e){return"".concat(e.firstName," ").concat(e.lastName," (").concat(e.login,")")}}},Ge=De,Ae=(r("e589"),r("05b1"),Object(b["a"])(Ge,ke,_e,!1,null,"ad95f6f2",null)),Ve=Ae.exports,Qe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{attrs:{flat:"",height:"100%"}},[r("v-layout",{attrs:{column:"","fill-height":""}},[e._t("header",[r("v-card-title",{attrs:{"primary-title":""}},[r("div",[r("div",{staticClass:"headline"},[e._v("Upload to "),r("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.dest.name))])]),r("div",{staticClass:"grey--text"},[e._v(e._s(e.statusMessage))])])])]),e.uploading?r("v-progress-linear",{attrs:{value:e.totalProgressPercent,height:"20"}}):e._e(),r("v-card-actions",{directives:[{name:"show",rawName:"v-show",value:e.files.length&&!e.errorMessage&&!e.uploading,expression:"files.length && !errorMessage && !uploading"}]},[r("v-btn",{attrs:{flat:""},on:{click:function(t){e.files=[]}}},[e._v("Clear all")]),r("v-btn",{attrs:{flat:"",color:"primary"},on:{click:e.start}},[e._v("Start upload")])],1),e._t("dropzone",[e.files.length?e._e():r("dropzone",{attrs:{message:e.dropzoneMessage,multiple:e.multiple,accept:e.accept},on:{change:e.filesChanged}})]),e.errorMessage?r("div",[r("v-alert",{attrs:{value:!0,dark:"",type:"error"}},[e._v(e._s(e.errorMessage)),e.uploading?e._e():r("v-btn",{attrs:{dark:"",outline:""},on:{click:e.start}},[e._v("Resume upload")])],1)],1):e._e(),e._t("files",[r("file-upload-list",{model:{value:e.files,callback:function(t){e.files=t},expression:"files"}})])],2)],1)},Je=[],He=r("6bde"),Ke=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dropzone-wrapper",class:e.dropzoneClass,on:{dragenter:function(t){e.dropzoneClass="animate"},dragleave:function(t){e.dropzoneClass=null},drop:function(t){e.dropzoneClass=null}}},[r("v-layout",{staticClass:"dropzone-message",attrs:{column:"","justify-center":"","align-center":"","fill-height":""}},[r("v-icon",{attrs:{size:"50px"}},[e._v("$vuetify.icons.fileUpload")]),r("div",{staticClass:"title mt-3"},[e._v(e._s(e.message))])],1),r("input",{staticClass:"file-input",attrs:{type:"file",multiple:e.multiple,accept:e.accept},on:{change:function(t){e.$emit("change",Array.apply(void 0,t.target.files))}}})],1)},We=[],Xe={props:{message:{type:String,required:!0},multiple:{type:Boolean,required:!0},accept:{type:String,default:null}},data:function(){return{dropzoneClass:null}}},Ye=Xe,Ze=(r("67a5"),Object(b["a"])(Ye,Ke,We,!1,null,"0d09c355",null)),et=Ze.exports,tt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-list",{directives:[{name:"show",rawName:"v-show",value:e.value.length,expression:"value.length"}],attrs:{dense:""}},e._l(e.value,function(t,n){return r("div",{key:t.file.name,staticClass:"file-tile",class:"status-"+t.status},[n>0?r("v-divider"):e._e(),r("v-list-tile",{attrs:{avatar:""}},[r("v-list-tile-avatar",["pending"===t.status?r("v-btn",{attrs:{icon:""},on:{click:function(t){e.$emit("input",e.splice(n))}}},[r("v-icon",[e._v("$vuetify.icons.close")])],1):e._e(),"uploading"===t.status?r("v-progress-circular",{attrs:{color:"primary",rotate:-90,value:e.progressPercent(t.progress),indeterminate:t.progress.indeterminate}}):e._e(),"done"===t.status?r("v-icon",{attrs:{color:"success",large:""}},[e._v("$vuetify.icons.complete")]):e._e(),"error"===t.status?r("v-icon",{attrs:{color:"error",large:""}},[e._v("$vuetify.icons.error")]):e._e()],1),r("v-list-tile-content",[r("v-list-tile-title",[e._v(e._s(t.file.name))]),r("v-list-tile-sub-title",[t.progress.current?r("span",[e._v(e._s(e.formatSize(t.progress.current))+" /")]):e._e(),r("span",[e._v(e._s(e.formatSize(t.file.size)))])])],1)],1)],1)}),0)},rt=[],nt={mixins:[D,L],props:{value:{type:Array,required:!0}},methods:{splice:function(e){return Object(q["a"])(this.value.slice(0,e)).concat(Object(q["a"])(this.value.slice(e+1)))}}},at=nt,st=(r("edaa"),Object(b["a"])(at,tt,rt,!1,null,"93c61a4a",null)),it=st.exports,ot={components:{Dropzone:et,FileUploadList:it},mixins:[D,L],inject:["girderRest"],props:{dest:{required:!0,type:Object},multiple:{default:!0,type:Boolean},preUpload:{default:function(){},type:Function},postUpload:{default:function(){},type:Function},uploadCls:{default:qe,type:Function},accept:{default:null,type:String}},data:function(){return{dragover:!1,errorMessage:null,files:[],uploading:!1}},computed:{dropzoneMessage:function(){return this.multiple?"Drag files here or click to select them":"Drag a file here or click to select one"},statusMessage:function(){return this.uploading?"".concat(this.formatSize(this.totalProgress)," / ").concat(this.formatSize(this.totalSize)," ")+"(".concat(this.totalProgressPercent,"%)"):"".concat(this.files.length," selected (").concat(this.formatSize(this.totalSize)," total)")},totalProgress:function(){return this.files.reduce(function(e,t){return e+t.progress.current},0)},totalSize:function(){return this.files.reduce(function(e,t){return e+t.file.size},0)},totalProgressPercent:function(){return this.progressPercent({current:this.totalProgress,total:this.totalSize})}},methods:{filesChanged:function(e){this.files=e.map(function(e){return{file:e,status:"pending",progress:{indeterminate:!1,current:0,size:e.size},upload:null,result:null}})},start:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=[],this.uploading=!0,this.errorMessage=null,e.next=5,this.preUpload();case 5:r=regeneratorRuntime.mark(function e(r){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=s.files[r],"done"!==n.status){e.next=5;break}t.push(n.result),e.next=38;break;case 5:if(a=function(e){Object.assign(n.progress,e)},n.status="uploading",n.progress.indeterminate=!0,e.prev=8,!n.upload){e.next=15;break}return e.next=12,n.upload.resume();case 12:n.result=e.sent,e.next=21;break;case 15:return n.upload=new s.uploadCls(n.file,{$rest:s.girderRest,parent:s.dest,progress:a}),e.next=18,n.upload.beforeUpload();case 18:return e.next=20,n.upload.start();case 20:n.result=e.sent;case 21:return e.next=23,n.upload.afterUpload();case 23:delete n.upload,t.push(n.result),n.status="done",n.progress.current=n.file.size,e.next=38;break;case 29:return e.prev=29,e.t0=e["catch"](8),e.next=33,n.upload.onError(e.t0);case 33:return e.t0.response?s.errorMessage=e.t0.response.data.message||"An error occurred during upload.":s.errorMessage="Connection failed.",n.status="error",s.uploading=!1,s.$emit("error",{error:e.t0,file:n}),e.abrupt("return",{v:void 0});case 38:case"end":return e.stop()}},e,this,[[8,29]])}),n=0;case 7:if(!(n<this.files.length)){e.next=15;break}return e.delegateYield(r(n),"t0",9);case 9:if(a=e.t0,"object"!==Object(He["a"])(a)){e.next=12;break}return e.abrupt("return",a.v);case 12:n+=1,e.next=7;break;case 15:return e.next=17,this.postUpload();case 17:this.uploading=!1,this.files=[],this.$emit("done",t);case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},lt=ot,ct=Object(b["a"])(lt,Qe,Je,!1,null,null,null),ut=ct.exports,dt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",{on:{submit:function(t){return t.preventDefault(),e.upsert(t)}}},[r("v-card",{attrs:{flat:"",height:"100%"}},[r("v-layout",{staticClass:"pa-2",attrs:{column:"","fill-height":""}},[e._t("header",[r("v-card-title",{staticClass:"pb-0",attrs:{"primary-title":""}},[r("h5",{staticClass:"display-1 secondary--text text--darken-1"}),e._v(e._s(e.edit?"Edit Folder":"Create New Folder"))])]),r("v-card-text",[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{ref:"folderName",attrs:{autofocus:"",label:"Folder Name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),r("girder-breadcrumb",{staticClass:"mb-3",attrs:{location:e.location,disabled:!0,append:e.append}}),r("girder-markdown-editor",{attrs:{label:"Description (Optional)"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),r("v-alert",{attrs:{type:"error",value:!!e.error,dismissible:"",transition:"scale-transition"}},[e._v(e._s(e.error))])],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{flat:""},on:{click:function(t){e.$emit("dismiss")}}},[e._v("Cancel")]),r("v-btn",{attrs:{depressed:"",color:"primary",type:"submit",disabled:!e.name}},[e._v(e._s(e.edit?"Save Changes":"Create Folder"))])],1)],2)],1)],1)},pt=[],ht="folder",ft={components:{GirderBreadcrumb:H,GirderMarkdownEditor:we},props:{location:{type:Object,required:!0,validator:function(e){return e._modelType&&e._id}},edit:{type:Boolean,default:!1},preUpsert:{type:Function,default:function(){}},postUpsert:{type:Function,default:function(){}}},inject:["girderRest"],data:function(){return{name:"",description:"",error:""}},computed:{append:function(){return this.edit?[]:[this.name||"New Folder"]}},mounted:function(){this.edit&&this.loadFolder(this.location._id)},methods:{upsert:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.error="",e.prev=1,e.next=4,this.preUpsert();case 4:if(!this.edit){e.next=9;break}return e.next=7,this.girderRest.put("".concat(ht,"/").concat(this.location._id),Object(Fe["stringify"])({name:this.name,description:this.description}));case 7:e.next=11;break;case 9:return e.next=11,this.girderRest.post(ht,Object(Fe["stringify"])({parentType:this.location._modelType,parentId:this.location._id,name:this.name,description:this.description,reuseExisting:!1}));case 11:return e.next=13,this.postUpsert();case 13:this.name="",this.description="",this.$emit("done"),e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](1),this.$emit("error",{type:"upsert",error:e.t0}),this.setError(e.t0);case 22:case"end":return e.stop()}},e,this,[[1,18]])}));return function(){return e.apply(this,arguments)}}(),loadFolder:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.error="",e.prev=1,e.next=4,this.girderRest.get("".concat(ht,"/").concat(t));case 4:r=e.sent,n=r.data,this.name=n.name,this.description=n.description,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),this.$emit("error",{type:"load",error:e.t0}),this.setError(e.t0);case 14:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t){return e.apply(this,arguments)}}(),setError:function(e){if(e.response){var t=e.response.data,r=void 0===t?{}:t,n=r.type,a=void 0===n?"unknown":n,s=r.message,i=r.field,o=void 0===i?"unknown":i;this.error="".concat(a," error on ").concat(o,": ").concat(s||e.message)}else this.error="Unknown error: ".concat(e.message)}}},mt=ft,vt=Object(b["a"])(mt,dt,pt,!1,null,null,null),gt=vt.exports,bt=r("a78e"),yt=r.n(bt);function xt(e){yt.a.set("girderToken",e.token,{expires:new Date(e.expires)})}var wt=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.apiRoot,a=void 0===n?"/api/v1":n,s=r.token,i=void 0===s?yt.a.get("girderToken"):s,o=r.axios,l=void 0===o?Ue.a.create():o,c=r.setLocalCookie,u=void 0===c||c;return Object(je["a"])(this,t),e=Object(Pe["a"])(this,Object(Ee["a"])(t).call(this,{data:{user:null,token:i}})),Object.assign(Object(Me["a"])(Object(Me["a"])(e)),l,{apiRoot:a,setLocalCookie:u}),e.interceptors.request.use(function(t){return Object(B["a"])({},t,{baseURL:e.apiRoot,headers:Object(B["a"])({"Girder-Token":e.token},t.headers)})}),e}return Object(Te["a"])(t,[{key:"login",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,s,i=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:null,e.prev=1,e.next=4,this.logout();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:return a={"Girder-Authorization":"Basic ".concat(window.btoa("".concat(t,":").concat(r))),"Girder-Token":null},n&&(a["Girder-OTP"]=n),e.next=12,this.get("user/authentication",{headers:a});case 12:return s=e.sent,this.token=s.data.authToken.token,this.user=s.data.user,this.setLocalCookie&&xt(s.data.authToken),this.$emit("login",this.user),e.abrupt("return",s);case 18:case"end":return e.stop()}},e,this,[[1,6]])}));return function(t,r){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.token){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.delete("user/authentication");case 5:e.next=11;break;case 7:if(e.prev=7,e.t0=e["catch"](2),401===e.t0.response.status){e.next=11;break}throw e.t0;case 11:return e.prev=11,this.token=null,this.user=null,yt.a.remove("girderToken"),this.$emit("logout"),e.finish(11);case 17:case"end":return e.stop()}},e,this,[[2,7,11,17]])}));return function(){return e.apply(this,arguments)}}()},{key:"fetchUser",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.get("user/me");case 2:return t=e.sent,this.user=t.data,null===this.user&&(this.token=null),e.abrupt("return",this.user);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,r,n,a,s){var i,o,l=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=l.length>5&&void 0!==l[5]&&l[5],e.next=3,this.post("user",Object(Fe["stringify"])({login:t,email:r,firstName:n,lastName:a,password:s,admin:i}));case 3:if(o=e.sent,o.data.authToken){e.next=6;break}return e.abrupt("return",o);case 6:return this.token=o.data.authToken.token,this.user=o.data,this.setLocalCookie&&xt(o.data.authToken),this.$emit("register",this.user),this.$emit("login",this.user),e.abrupt("return",o);case 12:case"end":return e.stop()}},e,this)}));return function(t,r,n,a,s){return e.apply(this,arguments)}}()}]),Object($e["a"])(t,e),t}(n["default"]);function kt(e){e.use(o.a,Ce),e.use(s.a)}var _t={install:kt},Ot=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{staticClass:"app"},[r("v-toolbar",{directives:[{name:"show",rawName:"v-show",value:!e.loggedOut,expression:"!loggedOut"}],staticClass:"toolbar-main",attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[e._v("Girder Web Components")]),r("v-toolbar-items",[r("v-menu",{attrs:{"offset-y":"",left:"","close-on-content-click":!1,"content-class":"girder-search-arrow-menu"},model:{value:e.uiOptionsMenu,callback:function(t){e.uiOptionsMenu=t},expression:"uiOptionsMenu"}},[r("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[r("v-icon",{staticClass:"mdi-24px"},[e._v(e._s(e.$vuetify.icons.more))])],1),r("v-card",[r("v-card-actions",[r("v-layout",{attrs:{column:""}},[r("v-checkbox",{staticClass:"mt-2",attrs:{"hide-details":"",label:"Select"},model:{value:e.selectEnabled,callback:function(t){e.selectEnabled=t},expression:"selectEnabled"}}),r("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Draggable"},model:{value:e.dragEnabled,callback:function(t){e.dragEnabled=t},expression:"dragEnabled"}}),r("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"New Folder"},model:{value:e.newFolderEnabled,callback:function(t){e.newFolderEnabled=t},expression:"newFolderEnabled"}}),r("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Upload"},model:{value:e.newItemEnabled,callback:function(t){e.newItemEnabled=t},expression:"newItemEnabled"}}),r("v-checkbox",{staticClass:"mt-1 mb-1",attrs:{"hide-details":"",label:"Search Box"},model:{value:e.searchEnabled,callback:function(t){e.searchEnabled=t},expression:"searchEnabled"}})],1)],1)],1)],1)],1),r("v-spacer"),e.searchEnabled?r("girder-search",{on:{select:e.handleSearchSelect}}):e._e(),r("v-btn",{attrs:{flat:"",icon:""},on:{click:function(t){e.girderRest.logout()}}},[r("v-icon",[e._v("$vuetify.icons.logout")])],1)],1),r("v-dialog",{attrs:{value:e.loggedOut,persistent:"","full-width":"","max-width":"600px"}},[r("girder-auth",{key:e.girderRest.token,attrs:{"force-otp":!1,register:!0,oauth:!0,"forgot-password-url":e.forgotPasswordUrl}})],1),r("v-dialog",{attrs:{"full-width":"","max-width":"800px"},model:{value:e.uploader,callback:function(t){e.uploader=t},expression:"uploader"}},[e.uploadDest?r("girder-upload",{attrs:{dest:e.uploadDest,"post-upload":e.postUpload,multiple:"multiple"}}):e._e()],1),r("v-dialog",{attrs:{"full-width":"","max-width":"800px"},model:{value:e.newFolder,callback:function(t){e.newFolder=t},expression:"newFolder"}},[e.location?r("girder-upsert-folder",{key:e.location._id,attrs:{location:e.location,"post-upsert":e.postUpsert},on:{dismiss:function(t){e.newFolder=!1}}}):e._e()],1),r("v-container",{directives:[{name:"show",rawName:"v-show",value:!e.loggedOut,expression:"!loggedOut"}],attrs:{fluid:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{staticClass:"mr-2",attrs:{grow:""}},[r("v-card",[e.location?r("girder-data-browser",{ref:"girderBrowser",attrs:{location:e.location,"select-enabled":e.selectEnabled,draggable:e.dragEnabled,"new-item-enabled":e.newItemEnabled,"new-folder-enabled":e.newFolderEnabled},on:{"update:location":function(t){e.location=t},"click:newitem":function(t){e.uploader=!0},"click:newfolder":function(t){e.newFolder=!0},"selection-changed":function(t){e.selected=t}}}):e._e()],1)],1)],1)],1)],1)},Rt=[],Ct={name:"App",inject:["girderRest"],components:{GirderAuth:N,GirderDataBrowser:oe,GirderSearch:Ve,GirderUpload:ut,GirderUpsertFolder:gt},data:function(){return{multiple:!0,uploader:!1,newFolder:!1,uiOptionsMenu:!1,browserLocation:null,forgotPasswordUrl:"/#?dialog=resetpassword",dragEnabled:!1,selectEnabled:!0,newItemEnabled:!0,newFolderEnabled:!0,searchEnabled:!0,selected:[]}},asyncComputed:{folder:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.girderRest.user){e.next=11;break}return e.prev=1,e.next=4,this.girderRest.get("folder",{params:{parentType:"user",parentId:this.girderRest.user._id}});case 4:return e.abrupt("return",e.sent.data[0]);case 7:e.prev=7,e.t0=e["catch"](1),t=e.t0.response,this.error=t?t.data.message:"Could not connect to server: ".concat(this.girderRest.apiRoot);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this,[[1,7]])}));return function(){return e.apply(this,arguments)}}()},computed:{location:{get:function(){return this.browserLocation?this.browserLocation:this.girderRest.user?{_modelType:"user",_id:this.girderRest.user._id}:null},set:function(e){this.browserLocation=e}},loggedOut:function(){return null===this.girderRest.user},uploadDest:function(){return this.location?"folder"===this.location._modelType?this.location:this.folder:null}},methods:{postUpload:function(){return this.$refs.girderBrowser.refresh(),this.uploader=!1,new Promise(function(e){return setTimeout(e,400)})},postUpsert:function(){return this.$refs.girderBrowser.refresh(),this.newFolder=!1,new Promise(function(e){return setTimeout(e,400)})},handleSearchSelect:function(e){["user","folder"].indexOf(e._modelType)>=0?this.browserLocation=e:this.browserLocation={_modelType:"folder",_id:e.folderId}}}},jt=Ct,$t=(r("dfa1"),Object(b["a"])(jt,Ot,Rt,!1,null,null,null)),Tt=$t.exports;n["default"].use(_t);var Pt=new wt({apiRoot:"https://data.kitware.com/api/v1"});Pt.fetchUser().then(function(){new n["default"]({render:function(e){return e(Tt)},provide:{girderRest:Pt}}).$mount("#app")})},dfa1:function(e,t,r){"use strict";var n=r("2a95"),a=r.n(n);a.a},e589:function(e,t,r){"use strict";var n=r("244e"),a=r.n(n);a.a},edaa:function(e,t,r){"use strict";var n=r("f71c"),a=r.n(n);a.a},f71c:function(e,t,r){},fe43:function(e,t,r){},fed8:function(e,t,r){}});
//# sourceMappingURL=app.cd5b7183.js.map