(function(e){function t(t){for(var n,i,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)i=o[d],a[i]&&p.push(a[i][0]),a[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var l=r[o];0!==a[l]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},s=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/girder_web_components/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;s.push(["a1ec","chunk-vendors"]),r()})({"0115":function(e,t,r){},"01ee":function(e,t,r){},"05b1":function(e,t,r){"use strict";var n=r("01ee"),a=r.n(n);a.a},"0e3a":function(e,t,r){"use strict";var n=r("9578"),a=r.n(n);a.a},"154d":function(e,t,r){"use strict";var n=r("1877"),a=r.n(n);a.a},1877:function(e,t,r){},"23cb":function(e,t,r){"use strict";var n=r("0115"),a=r.n(n);a.a},"28e0":function(e,t,r){"use strict";var n=r("4d30"),a=r.n(n);a.a},"484c":function(e,t,r){},"4d30":function(e,t,r){},"51ba":function(e,t,r){},5652:function(e,t,r){},"67a5":function(e,t,r){"use strict";var n=r("51ba"),a=r.n(n);a.a},"73bd":function(e,t,r){},"7d9c":function(e,t,r){"use strict";var n=r("5652"),a=r.n(n);a.a},"8d4c":function(e,t,r){"use strict";var n=r("afe4"),a=r.n(n);a.a},9578:function(e,t,r){},a1ec:function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("097d");var n=r("2b0e"),a=r("9437"),s=r.n(a),i=r("bb71"),o=(r("41e6"),r("bf40"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"girder-authentication-component"},[r("v-tabs",{attrs:{color:"primary","slider-color":"yellow",dark:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("v-tab",{key:"login"},[e._v("Log In")]),e.register?r("v-tab",{key:"registration"},[e._v("Register")]):e._e(),r("v-tab-item",{key:"login-box"},[r("girder-login",{attrs:{"oauth-providers":e.oauthProviders,"force-otp":e.forceOtp,"forgot-password-url":e.forgotPasswordUrl,"forgot-password-route":e.forgotPasswordRoute},on:{forgotpassword:function(t){e.$emit("forgotpassword")}}})],1),e.register?r("v-tab-item",{key:"registration-box"},[r("girder-registration",{attrs:{"oauth-providers":e.oauthProviders}})],1):e._e()],1)],1)}),l=[],c=(r("96cf"),r("3040")),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-widget"},[e._l(e.alerts.errors,function(t){return r("v-alert",{key:t,staticClass:"mt-0",attrs:{dismissible:"",transition:"scale-transition",value:!!t,type:"error"}},[e._v(e._s(t))])}),r("v-container",[r("v-form",{ref:"login",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[!e.otpFormVisible||e.forceOtp?r("v-text-field",{attrs:{label:"Username or e-mail",autofocus:"",rules:e.nonEmptyRules,"prepend-icon":"$vuetify.icons.user",type:"text"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}):e._e(),!e.otpFormVisible||e.forceOtp?r("v-text-field",{attrs:{type:"password",label:"Password",rules:e.nonEmptyRules,"prepend-icon":"$vuetify.icons.lock"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}):e._e(),e.otpFormVisible||e.forceOtp?r("v-text-field",{attrs:{type:"text",mask:"######",label:"Authentication code",rules:e.nonEmptyRules,"prepend-icon":"$vuetify.icons.otp"},model:{value:e.otp,callback:function(t){e.otp=t},expression:"otp"}}):e._e(),r("v-layout",{staticClass:"mt-2",attrs:{row:""}},[r("v-btn",{staticClass:"ml-0",attrs:{type:"submit",color:"primary",disabled:e.inProgress,loading:e.inProgress}},[r("v-icon",{attrs:{left:""}},[e._v("$vuetify.icons.login")]),e._v(e._s(e.otpFormVisible?"Verify code":"Login"))],1),r("v-spacer"),r("v-btn",{attrs:{flat:"",color:"primary",to:e.forgotPasswordRoute,href:e.forgotPasswordUrl},on:{click:function(t){e.$emit("forgotpassword")}}},[e._v("Forgot Password?")])],1)],1)],1),e.oauthProviders&&e.oauthProviders.length?[r("v-divider"),r("girder-oauth",{attrs:{providers:e.oauthProviders}})]:e._e()],2)},d=[],p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"oauth-widget"},[r("h4",[e._v("Or "+e._s(e.verb)+" with OAuth")]),e._l(e.providers,function(t){return r("v-btn",{key:t.id,staticClass:"ml-0 mr-3",attrs:{dark:e.iconMap[t.id].dark,color:e.iconMap[t.id].color,href:t.url}},[r("v-icon",{attrs:{left:""}},[e._v(e._s(e.$vuetify.icons[e.iconMap[t.id].icon]))]),e._v(e._s(t.name))],1)})],2)},h=[],f={github:{dark:!0,icon:"github"},google:{dark:!0,icon:"google",color:"#3367d6"},linkedin:{dark:!0,icon:"linkedin",color:"#283e4a"},bitbucket:{dark:!1,icon:"bitbucket"},box:{dark:!0,icon:"box_com",color:"#0071f7"},globus:{dark:!0,icon:"globus",color:"#335a95"}},m={props:{verb:{type:String,default:"sign in"},providers:{type:Array,required:!0}},data:function(){return{enabledProviders:[],iconMap:f}}},v=m,g=r("2877"),b=r("6544"),y=r.n(b),x=r("8336"),w=r("a523"),k=r("132d"),_=Object(g["a"])(v,p,h,!1,null,null,null),C=_.exports;y()(_,{VBtn:x["a"],VContainer:w["a"],VIcon:k["a"]});var R="authentication must include a one-time password",j={inject:["girderRest"],components:{GirderOauth:C},props:{forceOtp:{type:Boolean,default:!1},forgotPasswordUrl:{type:String,default:null},forgotPasswordRoute:{type:Object,default:null},oauthProviders:{type:Array,default:function(){return[]}}},data:function(){return{username:"",password:"",otp:null,inProgress:!1,alerts:{errors:[]},nonEmptyRules:[function(e){return!!e||"Item is required"}],otpFormVisible:!1}},methods:{login:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.login.validate()){e.next=2;break}return e.abrupt("return");case 2:return this.alerts.errors=[],this.inProgress=!0,e.prev=4,e.next=7,this.girderRest.login(this.username,this.password,this.otp);case 7:this.password="",this.otp=null,this.otpFormVisible=!1,e.next=21;break;case 12:if(e.prev=12,e.t0=e["catch"](4),e.t0.response&&401===e.t0.response.status){e.next=19;break}throw this.alerts.errors.push("Unknown error."),e.t0;case 19:t=e.t0.response.data.message,t&&t.indexOf(R)>=0?(this.otp=null,this.otpFormVisible=!0,this.$refs.login.resetValidation()):this.alerts.errors.push(t||"Unauthorized.");case 21:return e.prev=21,this.inProgress=!1,e.finish(21);case 24:case"end":return e.stop()}},e,this,[[4,12,21,24]])}));return function(){return e.apply(this,arguments)}}()}},O=j,T=r("0798"),V=r("ce7e"),$=r("4bd4"),E=r("a722"),P=r("9910"),S=r("2677"),F=Object(g["a"])(O,u,d,!1,null,null,null),L=F.exports;y()(F,{VAlert:T["a"],VBtn:x["a"],VContainer:w["a"],VDivider:V["a"],VForm:$["a"],VIcon:k["a"],VLayout:E["a"],VSpacer:P["a"],VTextField:S["a"]});var I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register-widget"},[e._l(e.alerts.errors,function(t){return r("v-alert",{key:t,staticClass:"mt-0",attrs:{dismissible:"",transition:"scale-transition",value:!0,type:"error"}},[e._v(e._s(t))])}),e._l(e.alerts.infos,function(t){return r("v-alert",{key:t,staticClass:"mt-0",attrs:{dismissible:"",transition:"scale-transition",value:!0,type:"info"}},[e._v(e._s(t))])}),r("v-container",[r("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[r("v-text-field",{attrs:{label:"Username",rules:e.nonEmptyRules,type:"text",autofocus:""},model:{value:e.login,callback:function(t){e.login=t},expression:"login"}}),r("v-text-field",{attrs:{label:"Email",rules:e.nonEmptyRules,type:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("v-text-field",{attrs:{label:"First Name",rules:e.nonEmptyRules,type:"text"},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),r("v-text-field",{attrs:{label:"Last Name",rules:e.nonEmptyRules,type:"text"},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),r("v-text-field",{attrs:{type:"password",label:"Password",rules:e.nonEmptyRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("v-text-field",{attrs:{type:"password",label:"Retype password",rules:e.retypeMustMatchPasswordRules},model:{value:e.retypePassword,callback:function(t){e.retypePassword=t},expression:"retypePassword"}}),r("v-btn",{staticClass:"ml-0",attrs:{type:"submit",color:"primary",loading:e.inProgress}},[e._v("Register")])],1)],1),e.oauthProviders&&e.oauthProviders.length?[r("v-divider"),r("girder-oauth",{attrs:{verb:"register",providers:e.oauthProviders}})]:e._e()],2)},N=[],M={inject:["girderRest"],components:{GirderOauth:C},props:{oauthProviders:{type:Array,default:function(){return[]}}},data:function(){var e=this,t=[function(e){return!!e||"Item is required"}],r=t.concat([function(t){return t===e.password||"Passwords must match"}]);return{login:"",email:"",firstName:"",lastName:"",password:"",retypePassword:"",retypePasswordErrors:[],inProgress:!1,alerts:{errors:[],infos:[]},nonEmptyRules:t,retypeMustMatchPasswordRules:r}},methods:{register:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.form.validate()){e.next=2;break}return e.abrupt("return");case 2:return this.inProgress=!0,this.alerts.errors=[],this.alerts.infos=[],e.prev=5,e.next=8,this.girderRest.register(this.login,this.email,this.firstName,this.lastName,this.password);case 8:t=e.sent,t.data.authToken||(this.alerts.infos.push("Registration needs email verification or administrator approval. \nCheck your email to continue."),this.$refs.form.reset()),e.next=20;break;case 12:if(e.prev=12,e.t0=e["catch"](5),e.t0.response&&400===e.t0.response.status){e.next=19;break}throw this.alerts.errors.push("Unknown error."),e.t0;case 19:this.alerts.errors.push(e.t0.response.data.message||"Invalid registration.");case 20:return e.prev=20,this.inProgress=!1,e.finish(20);case 23:case"end":return e.stop()}},e,this,[[5,12,20,23]])}));return function(){return e.apply(this,arguments)}}()}},U=M,z=Object(g["a"])(U,I,N,!1,null,null,null),B=z.exports;y()(z,{VAlert:T["a"],VBtn:x["a"],VContainer:w["a"],VDivider:V["a"],VForm:$["a"],VTextField:S["a"]});var D={inject:["girderRest"],components:{GirderLogin:L,GirderRegistration:B},props:{register:{type:Boolean,default:!1},oauth:{type:Boolean,default:!1},forgotPasswordUrl:{type:String,default:null},forgotPasswordRoute:{type:[Object,String],default:null},forceOtp:{type:Boolean,default:!1}},data:function(){return{activeTab:null}},asyncComputed:{oauthProviders:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.oauth){e.next=12;break}return e.prev=1,e.next=4,this.girderRest.get("oauth/provider",{params:{redirect:window.location.href,list:!0}});case 4:return e.abrupt("return",e.sent.data);case 7:return e.prev=7,e.t0=e["catch"](1),e.abrupt("return",[]);case 10:e.next=13;break;case 12:return e.abrupt("return",[]);case 13:case"end":return e.stop()}},e,this,[[1,7]])}));return function(){return e.apply(this,arguments)}}()}},A=D,q=r("b0af"),G=r("71a3"),J=r("c671"),Q=r("fe57"),K=Object(g["a"])(A,o,l,!1,null,null,null),W=K.exports;y()(K,{VCard:q["a"],VTab:G["a"],VTabItem:J["a"],VTabs:Q["a"]});var H=W,Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("girder-data-table",{staticClass:"girder-file-browser",attrs:{draggable:e.draggable,rows:e.rows,pagination:e.pagination,"total-items":e.totalItems,loading:e.loading,"select-enabled":e._selectEnabled},on:{"update:pagination":function(t){e.pagination=t},rowclick:e.rowClick,drag:function(t){e.$emit("drag",t)},dragstart:function(t){e.$emit("dragstart",t)},dragend:function(t){e.$emit("dragend",t)},drop:function(t){e.$emit("drop",t)}},scopedSlots:e._u([{key:"header",fn:function(t){return[r("tr",{staticClass:"secondary lighten-5"},[e._selectEnabled?r("th",{staticClass:"pl-3 pr-0",attrs:{width:"1%"}},[r("v-checkbox",{staticClass:"secondary--text text--darken-1 pr-2",attrs:{color:"accent","hide-details":"","input-value":t.all,indeterminate:e.selected.length>0&&!t.all},nativeOn:{click:function(t){return e.toggleAll(t)}}})],1):e._e(),r("th",{staticClass:"pl-3",attrs:{colspan:"100",width:"99%"}},[r("v-layout",{attrs:{row:"","align-center":""}},[r("girder-breadcrumb",{ref:"breadcrumb",attrs:{location:e.location_,"no-root":e.noRoot},on:{crumbclick:e.changeLocation}}),r("v-spacer"),e._t("headerwidget"),e.newFolderEnabled&&e.nonRootLocation?r("v-btn",{staticClass:"ma-0",attrs:{flat:"",small:"",color:"secondary darken-2"},on:{click:function(t){e.$emit("click:newfolder")}}},[r("v-icon",{staticClass:"mdi-24px mr-1",attrs:{left:"",color:"accent"}},[e._v(e._s(e.$vuetify.icons.folderNew))]),r("span",{staticClass:"hidden-xs-only"},[e._v("New Folder")])],1):e._e(),e.newItemEnabled&&e.nonRootLocation?r("v-btn",{staticClass:"ma-0",attrs:{flat:"",small:"",color:"secondary darken-2"},on:{click:function(t){e.$emit("click:newitem")}}},[r("v-icon",{staticClass:"mdi-24px mr-1",attrs:{left:"",color:"accent"}},[e._v(e._s(e.$vuetify.icons.fileNew))]),r("span",{staticClass:"hidden-xs-only"},[e._v("New Item")])],1):e._e()],2)],1)])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})},X=[],Z=(r("7f7f"),r("8afe")),ee=r("a322"),te=(r("456d"),r("c93e")),re=(r("ac6a"),r("8615"),{methods:{formatSize:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.base,a=void 0===n?1024:n,s=r.unit,i=void 0===s?"B":s;if(e<a)return"".concat(e," ").concat(i);var o=e;for(t=0;o>=a&&t<4;t+=1)o/=a;return"".concat(o.toFixed(2),"  ").concat(["","K","M","G","T"][t]).concat(i)}}}),ne={methods:{progressPercent:function(e){return e.total?Math.round(100*(e.current||0)/e.total):0}}},ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"girder-breadcrumb-component"},[e.girderRest.user?r("v-icon",{staticClass:"home-button",attrs:{color:"accent",disabled:e.location._id===e.girderRest.user._id},on:{click:function(t){e.$emit("crumbclick",e.girderRest.user)}}},[e._v(e._s(e.$vuetify.icons.userHome))]):e._e(),r("v-breadcrumbs",{staticClass:"font-weight-bold pa-0 ml-3"},[r("span",{staticClass:"subheading font-weight-bold",attrs:{slot:"divider",disabled:e.disabled},slot:"divider"},[e._v("/")]),e._l(e.breadcrumb,function(t,n){return r("v-breadcrumbs-item",{key:n,attrs:{disabled:e.disabled||n==e.breadcrumb.length-1},nativeOn:{click:function(r){e.$emit("crumbclick",t)}}},[-1!==["folder","user","collection"].indexOf(t.type)?[e._v(e._s(t.name))]:"users"===t.type?[r("v-icon",{staticClass:"mdi-18px"},[e._v(e._s(e.$vuetify.icons.user))])]:"collections"===t.type?[r("v-icon",{staticClass:"mdi-18px"},[e._v(e._s(e.$vuetify.icons.collection))])]:"root"===t.type?[r("v-icon",{staticClass:"mdi-18px"},[e._v(e._s(e.$vuetify.icons.globe))])]:e._e()],2)}),e._l(e.append,function(t){return r("v-breadcrumbs-item",{key:t._id},[e._v(e._s(t))])})],2)],1)},se=[],ie=r("fcf4"),oe={theme:{primary:ie["a"].lightBlue.darken1,secondary:ie["a"].blueGrey,accent:ie["a"].lightBlue.darken1,error:ie["a"].red,info:ie["a"].lightBlue.lighten1},iconfont:"mdi",icons:{alert:"mdi-alert-circle",bitbucket:"mdi-bitbucket",box_com:"mdi-package",chevron:"mdi-chevron-right",circle:"mdi-checkbox-blank-circle",collection:"mdi-file-tree",edit:"mdi-pencil",file:"mdi-file",fileNew:"mdi-file-plus",fileUpload:"mdi-file-upload",folder:"mdi-folder",folderNew:"mdi-folder-plus",github:"mdi-github-circle",globe:"mdi-earth",globus:"mdi-earth",google:"mdi-google",group:"mdi-account-multiple",item:"mdi-file",linkedin:"mdi-linkedin",lock:"mdi-lock",login:"mdi-login",logout:"mdi-logout",more:"mdi-dots-horizontal",otp:"mdi-shield-key",preview:"mdi-file-find",search:"mdi-magnify",settings:"mdi-tune",user:"mdi-account",userHome:"mdi-home-account"}},le=(r("f751"),r("c665")),ce=r("dc0a"),ue=r("aa9a"),de=r("d328"),pe=r("11d9"),he=r("1083"),fe=r("4328"),me=r("9393"),ve=(r("ffc1"),r("bc3a")),ge=r.n(ve),be=function(){function e(t){Object(le["a"])(this,e),Object.assign(this,t,{etags:{},offset:0,partNumber:1})}return Object(ue["a"])(e,[{key:"_finalizeMultipartXml",value:function(){var e=document.implementation.createDocument(null,null,null),t=e.createElement("CompleteMultipartUpload");return Object.entries(this.etags).forEach(function(r){var n=Object(me["a"])(r,2),a=n[0],s=n[1],i=e.createElement("Part"),o=e.createElement("PartNumber"),l=e.createElement("ETag");o.appendChild(e.createTextNode(a)),l.appendChild(e.createTextNode(s)),i.appendChild(o),i.appendChild(l),t.appendChild(i)}),t.outerHTML}},{key:"_multiChunkUpload",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.upload.s3.request,r=t.headers,n=t.method,a=t.url,e.next=3,ge.a.request({data:null,headers:r,method:n,url:a});case 3:return s=e.sent,i=(new DOMParser).parseFromString(s.data,"text/xml"),this.upload.s3.uploadId=i.querySelector("InitiateMultipartUploadResult > UploadId").textContent,e.abrupt("return",this._sendChunks());case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_sendChunks",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a,s,i,o,l,c,u,d,p=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=function(e){return p.progress({current:p.offset+e.loaded,total:p.file.size,indeterminate:!e.lengthComputable})};case 1:if(!(this.offset<this.file.size)){e.next=16;break}return r=this.file.slice(this.offset,this.offset+this.upload.s3.chunkLength),e.next=5,this.$rest.post("file/chunk",Object(fe["stringify"])({chunk:JSON.stringify({contentLength:r.size,partNumber:this.partNumber,s3UploadId:this.upload.s3.uploadId}),offset:0,uploadId:this.upload._id}));case 5:return n=e.sent.data.s3.request,a=n.method,s=n.url,e.next=10,ge.a.request({data:r,method:a,url:s,onUploadProgress:t});case 10:i=e.sent,this.etags[this.partNumber]=i.headers.etag,this.partNumber+=1,this.offset+=r.size,e.next=1;break;case 16:return this.progress({indeterminate:!0}),e.next=19,this.$rest.post("file/completion",Object(fe["stringify"])({uploadId:this.upload._id}));case 19:return o=e.sent,l=o.data.s3FinalizeRequest,c=l.headers,u=l.method,d=l.url,e.next=23,ge.a.request({data:this._finalizeMultipartXml(),headers:c,method:u,url:d});case 23:return e.abrupt("return",o.data);case 24:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.upload.s3.chunked){e.next=2;break}return e.abrupt("return",this._multiChunkUpload());case 2:return t=this.upload.s3.request,r=t.headers,n=t.method,a=t.url,e.next=5,ge.a.request({data:this.file,headers:r,method:n,url:a,onUploadProgress:function(e){return s.progress({current:e.loaded,total:s.file.size,indeterminate:!e.lengthComputable})}});case 5:return this.progress({indeterminate:!0}),e.next=8,this.$rest.post("file/completion",Object(fe["stringify"])({uploadId:this.upload._id}));case 8:return e.abrupt("return",e.sent.data);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resume",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.upload.s3.chunked){e.next=2;break}return e.abrupt("return",this._sendChunks());case 2:return e.next=4,this.$rest.get("file/offset?uploadId=".concat(this.upload._id));case 4:return this.upload.s3.request=e.sent.data,e.abrupt("return",this.start());case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),ye=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.$rest,a=r.parent,s=r.progress,i=void 0===s?function(){return null}:s;Object(le["a"])(this,e),Object.assign(this,{$rest:n,file:t,parent:a,progress:i})}return Object(ue["a"])(e,[{key:"start",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("not implemented");case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resume",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.start());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"beforeUpload",value:function(){}},{key:"afterUpload",value:function(){}},{key:"onError",value:function(e){}}]),e}(),xe=67108864,we={s3:be},ke=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.$rest,s=n.parent,i=n.progress,o=void 0===i?function(){return null}:i,l=n.params,c=void 0===l?{}:l,u=n.chunkLen,d=void 0===u?xe:u;return Object(le["a"])(this,t),r=Object(de["a"])(this,Object(pe["a"])(t).call(this,e,{$rest:a,parent:s,progress:o})),Object.assign(Object(he["a"])(Object(he["a"])(r)),{params:c,chunkLen:d,upload:null,offset:0,behavior:null}),r}return Object(ue["a"])(t,[{key:"_sendChunks",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=function(e){return s.progress({indeterminate:!e.lengthComputable,current:s.offset+e.loaded,size:s.file.size})};case 1:if(!(this.offset<this.file.size)){e.next=11;break}return r=Math.min(this.offset+this.chunkLen,this.file.size),n=this.file.slice(this.offset,r),a="file/chunk?offset=".concat(this.offset,"&uploadId=").concat(this.upload._id),e.next=7,this.$rest.post(a,n,{onUploadProgress:t,headers:{"Content-Type":"application/octet-stream"}});case 7:this.upload=e.sent.data,this.offset=r,e.next=1;break;case 11:return e.abrupt("return",this.upload);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$rest.post("/file",Object(fe["stringify"])(Object(te["a"])({parentType:this.parent._modelType,parentId:this.parent._id,name:this.file.name,size:this.file.size,mimeType:this.file.type},this.params)));case 2:if(this.upload=e.sent.data,!this.upload.behavior||!we[this.upload.behavior]){e.next=6;break}return this.behavior=new we[this.upload.behavior](this),e.abrupt("return",this.behavior.start());case 6:return e.abrupt("return",this._sendChunks());case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resume",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.upload){e.next=2;break}return e.abrupt("return",this.start());case 2:if(this.progress({indeterminate:!0}),!this.behavior){e.next=5;break}return e.abrupt("return",this.behavior.resume());case 5:return e.next=7,this.$rest.get("file/offset?uploadId=".concat(this.upload._id));case 7:return this.offset=e.sent.data.offset,e.abrupt("return",this._sendChunks());case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),Object(ce["a"])(t,e),t}(ye),_e=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;return Object(le["a"])(this,t),e=Object(de["a"])(this,Object(pe["a"])(t).call(this,{data:function(){return{flag:!1}}})),e.count=0,e.delay=r,e.timeout=null,e}return Object(ue["a"])(t,[{key:"inc",value:function(){this.count+=1,this.count>0&&this._toggleFlag(!0)}},{key:"dec",value:function(){this.count=Math.max(0,this.count-1),0===this.count&&this._toggleFlag(!1)}},{key:"_toggleFlag",value:function(e){var t=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.flag=e},this.delay)}}]),Object(ce["a"])(t,e),t}(n["a"]),Ce=function(e){return function(t){if(!t)return!1;var r=t.type,n=t._modelType,a=t._id;return!(-1===["user","collection","folder"].indexOf(n)||!a)||!(!e||-1===["collections","users","root"].indexOf(r))}},Re={props:{location:{type:Object,required:!0,validator:Ce(!0)},disabled:{type:Boolean,default:!1},append:{type:Array,default:function(){return[]}},noRoot:{type:Boolean,default:!1}},inject:["girderRest"],data:function(){return{loading:!1}},asyncComputed:{breadcrumb:{default:[],get:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a,s,i,o,l,c,u,d,p,h=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,t=[],r=this.girderRest.user,n=this.location._modelType||this.location.type,a=this.location,s=a.name,i=a._id,"folder"!==n){e.next=22;break}if(!s){e.next=10;break}t.unshift(this.location),e.next=15;break;case 10:return e.next=12,this.girderRest.get("folder/".concat(i));case 12:o=e.sent,l=o.data,t.unshift(this.extractCrumbData(l));case 15:return e.next=17,this.girderRest.get("folder/".concat(i,"/rootpath"));case 17:c=e.sent,u=c.data,u.reverse().forEach(function(e){t.unshift(h.extractCrumbData(e.object))}),e.next=28;break;case 22:if("user"!==n&&"collection"!==n){e.next=28;break}return e.next=25,this.girderRest.get("".concat(n,"/").concat(i));case 25:d=e.sent,p=d.data,t.unshift(this.extractCrumbData(p));case 28:return this.noRoot||(("users"===n||r&&t.length&&"user"===t[0].type)&&t.unshift({type:"users"}),("collections"===n||t.length&&"collection"===t[0].type)&&t.unshift({type:"collections"}),t.unshift({type:"root"})),this.loading=!1,e.abrupt("return",t);case 31:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},created:function(){if(!Ce(!1)(this.location)&&this.noRoot)throw new Error("non root location can't be used with no-root prop at the same time")},methods:{extractCrumbData:function(e){return Object(te["a"])({},e,{type:e.type?e.type:e._modelType,name:"user"!==e._modelType?e.name:e.login})}}},je=Re,Oe=(r("28e0"),r("2bc5")),Te=r("f625"),Ve=Object(g["a"])(je,ae,se,!1,null,null,null),$e=Ve.exports;y()(Ve,{VBreadcrumbs:Oe["a"],VBreadcrumbsItem:Te["a"],VIcon:k["a"]});var Ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-data-table",{staticClass:"girder-data-table",attrs:{"select-all":"","headers-length":4,value:e.value,pagination:e.pagination,items:e.rows,"total-items":e.totalItems,loading:!!e.loading&&"accent","item-key":"_id"},on:{input:function(t){e.$emit("input",t)},"update:pagination":function(t){e.$emit("update:pagination",t)}},scopedSlots:e._u([{key:"headers",fn:function(t){return[e._t("header",null,{all:t.all,indeterminate:t.indeterminate,headers:t.headers})]}},{key:"items",fn:function(t){return[r("tr",{key:t.index,staticClass:"itemRow",class:{selectable:!e.selectEnabled},attrs:{draggable:e.draggable,active:t.selected},on:{click:function(r){e.handleRowSelect(r,t)},drag:function(r){e.$emit("drag",{items:[t],event:r})},dragstart:function(r){e.$emit("dragstart",{items:[t],event:r})},dragend:function(r){e.$emit("dragend",{items:[t],event:r})},drop:function(r){e.$emit("drop",{items:[t],event:r})}}},[e.selectEnabled?r("td",{staticClass:"pl-3 pr-0"},[r("v-checkbox",{staticClass:"secondary--text text--darken-1 pr-2",attrs:{"input-value":t.selected,accent:"","hide-details":""}})],1):e._e(),r("td",{staticClass:"pl-3",attrs:{colspan:"2"}},[r("span",{staticClass:"text-container secondary--text text--darken-3 nobreak",class:{selectable:e.selectEnabled&&"item"!==t.item._modelType},on:{click:function(r){r.stopPropagation(),e.$emit("rowclick",t.item)}}},[r("v-icon",{staticClass:"pr-2",attrs:{color:t.selected?"accent":""}},[e._v(e._s(e.$vuetify.icons[t.item.icon]))]),e._v(e._s(t.item.name))],1)]),r("td",{staticClass:"text-xs-right secondary--text text--darken-3 nobreak"},[e._v(e._s(t.item.size))])])]}}])},[r("template",{slot:"no-data"},[r("td",{staticClass:"text-xs-center",attrs:{colspan:"2",width:"100%"}},[e._v("No Data Available")])]),r("template",{slot:"no-results"},[r("td",{staticClass:"text-xs-center",attrs:{colspan:"2",width:"100%"}},[e._v("No Data Available")])])],2)},Pe=[],Se=(r("7514"),r("55dd"),r("c5f6"),{props:{draggable:{type:Boolean,default:!1},loading:{type:Boolean,required:!0},pagination:{type:Object,required:!0},rows:{type:Array,required:!0},selectEnabled:{type:Boolean,required:!0},totalItems:{type:Number,required:!0},value:{type:Array,default:function(){return[]}}},data:function(){return{lastCheckBoxIdx:null}},methods:{handleRowSelect:function(e,t){var r=this,n=e.shiftKey;if(this.selectEnabled){if(t.selected=!t.selected,n&&null!==this.lastCheckBoxIdx){var a=[this.lastCheckBoxIdx,t.index+1].sort(),s=Object(me["a"])(a,2),i=s[0],o=s[1],l=this.rows.slice(i,o).filter(function(e){return void 0===r.value.find(function(t){return t._id===e._id})});this.$emit("input",l.concat(this.value))}this.lastCheckBoxIdx=t.index}else this.$emit("rowclick",t.item)}}}),Fe=Se,Le=(r("8d4c"),r("ac7c")),Ie=r("8fea"),Ne=Object(g["a"])(Fe,Ee,Pe,!1,null,null,null),Me=Ne.exports;y()(Ne,{VCheckbox:Le["a"],VDataTable:Ie["a"],VIcon:k["a"]});var Ue="folder",ze="item",Be={components:{GirderBreadcrumb:$e,GirderDataTable:Me},mixins:[re],props:{draggable:{type:Boolean,default:!1},location:{type:Object,default:function(){return{type:"root"}},validator:Ce(!0)},selectEnabled:{type:Boolean,default:!0},multiSelectEnabled:{type:Boolean,default:!1},uploadEnabled:{type:Boolean,default:!1},newItemEnabled:{type:Boolean,default:!0},newFolderEnabled:{type:Boolean,default:!0},noRoot:{type:Boolean,default:!1}},inject:["girderRest"],data:function(){return{pagination:{rowsPerPage:10,page:1},refreshCounter_:0,rows:[],rowsLoading:!1,selected:[],location_:this.location}},computed:{loading:function(){return this.$refs.breadcrumb&&this.$refs.breadcrumb.loading||this.rowsLoading},totalItems:function(){return Object.values(this.counts).reduce(function(e,t){return e+t},0)},_selectEnabled:function(){if(!this.location_)return!1;var e=this.location_._modelType;return this.selectEnabled&&-1!==["folder","user","collection"].indexOf(e)},nonRootLocation:function(){return Ce(!1)(this.location_)}},asyncComputed:{counts:{default:{nFolders:0,nItems:0,nUsers:0,nCollections:0},get:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a,s,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.rows=[],t={nFolders:0,nItems:0,nUsers:0,nCollections:0},r=this.location_._modelType||this.location_.type,n=this.location_._id,-1===["folder","user","collection"].indexOf(r)){e.next=12;break}return e.next=7,this.girderRest.get("".concat(r,"/").concat(n,"/details"));case 7:return a=e.sent,s=a.data,e.abrupt("return",Object(te["a"])({},t,{nFolders:s.nFolders||0,nItems:s.nItems||0}));case 12:if("users"!==r&&"collections"!==r){e.next=20;break}return e.next=15,this.girderRest.get("".concat(this.getResourceType(r),"/details"));case 15:return i=e.sent,o=i.data,e.abrupt("return",Object(te["a"])({},t,Object(ee["a"])({},Object.keys(o)[0],Object.values(o)[0])));case 20:if("root"!==r){e.next=22;break}return e.abrupt("return",Object(te["a"])({},t,{nUsers:1,nCollections:1}));case 22:return e.abrupt("return",t);case 23:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),watch:function(){return[this.refreshCounter_,this.location_,this.girderRest.user]}}},watch:{location:function(e){Ce(!this.noRoot)(e)&&(this.location_=e,this.pagination.page=1)},selected:function(e){this.$emit("selection-changed",e)},counts:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchPaginatedRows();case 2:this.rows=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),pagination:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchPaginatedRows();case 2:this.rows=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},created:function(){if(!Ce(!1)(this.location_)&&this.noRoot)throw new Error("non root location can't be used with no-root at the same time")},methods:{toggleAll:function(){this.selected.length===this.rows.length?this.selected=[]:this.selected=this.rows.slice()},rowClick:function(e){var t=e._modelType,r=e._id,n=this.location._modelType||this.location.type;this.location_.id===r&&n===t||"item"===t?this.$emit("itemclick",e):-1!==["collections","users","root"].indexOf(t)?this.changeLocation({type:t}):this.changeLocation(e)},changeLocation:function(e){var t=e._modelType||e.type,r=this.location._modelType||this.location.type;this.location_._id===e._id&&t===r||(this.location_=e,this.$emit("update:location",e))},refresh:function(){this.refreshCounter_+=1},fetchPaginatedRows:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.counts.nFolders&&!this.counts.nItems){e.next=2;break}return e.abrupt("return",this.fetchPaginatedFolderRows());case 2:if(t=this.location._modelType||this.location.type,"users"!==t&&"collections"!==t){e.next=8;break}if(!this.counts.nUsers&&!this.counts.nCollections){e.next=6;break}return e.abrupt("return",this.fetchPaginatedCollectionOrUserRows(this.getResourceType(t)));case 6:e.next=10;break;case 8:if("root"!==t){e.next=10;break}return e.abrupt("return",this.generateRootRows());case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),fetchPaginatedFolderRows:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a,s,i,o,l,c,u,d,p,h,f=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.rowsLoading=!0,r=this.counts,n=this.location_,a=this.pagination,s=a.page,i=a.rowsPerPage,o={parentType:n._modelType,parentId:n._id,limit:i>=0?i:null,offset:(s-1)*i},l=r.nFolders>o.offset?i-(r.nFolders-o.offset):i,c=o.offset-r.nFolders,u={folderId:n._id,limit:i>=0?l:null,offset:c>0?c:0},d=[],d.push(this.girderRest.get(Ue,{params:o})),(u.limit>0||null===u.limit)&&"folder"===n._modelType&&d.push(this.girderRest.get(ze,{params:u})),e.next=12,Promise.all(d);case 12:return e.t0=function(e){return e.data},p=e.sent.map(e.t0),h=(t=[].concat).apply.apply(t,Object(Z["a"])(p)).map(function(e){return Object(te["a"])({},e,{size:e.size?f.formatSize(e.size):"",icon:e._modelType in f.$vuetify.icons?e._modelType:"file"})}),this.rowsLoading=!1,e.abrupt("return",h);case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),fetchPaginatedCollectionOrUserRows:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var r,n,a,s,i,o,l=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.rowsLoading=!0,r=this.pagination,n=r.page,a=r.rowsPerPage,e.next=4,this.girderRest.get(t,{params:{limit:a>=0?a:null,offset:(n-1)*a}});case 4:return s=e.sent,i=s.data,o=i.map(function(e){return Object(te["a"])({},e,{name:"user"===e._modelType?"".concat(e.firstName," ").concat(e.lastName):e.name,size:e.size?l.formatSize(e.size):"",icon:e._modelType})}),this.rowsLoading=!1,e.abrupt("return",o);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),generateRootRows:function(){var e=[{_modelType:"collections",name:"Collections",icon:"collection"}];return this.girderRest.user&&e.push({_modelType:"users",name:"Users",icon:"user"}),e},getResourceType:function(e){switch(e){case"collections":return"collection";case"users":return"user";default:return""}}}},De=Be,Ae=Object(g["a"])(De,Y,X,!1,null,null,null),qe=Ae.exports;y()(Ae,{VBtn:x["a"],VCheckbox:Le["a"],VIcon:k["a"],VLayout:E["a"],VSpacer:P["a"]});var Ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"job-filter",attrs:{dark:"",color:"primary darken-1"}},[r("v-container",{staticClass:"py-2",attrs:{fluid:"","grid-list-lg":""}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{sm12:"","d-flex":""}},[r("h3",{staticClass:"primary--text text--lighten-2"},[e._v("Jobs")])])],1),r("v-layout",{attrs:{row:"","justify-center":""}},[r("v-flex",{attrs:{sm3:"","d-flex":""}},[r("v-select",{attrs:{label:"Job Type",items:e.jobTypeList,value:e.jobType,clearable:"",color:"white","menu-props":{"content-class":"girder-job-filter-form-menu"},dark:"",dense:""},on:{input:function(t){e.$emit("update:jobType",t||null)}}})],1),r("v-flex",{attrs:{sm3:"","d-flex":""}},[r("v-select",{attrs:{label:"Status",items:e.statusItemList,value:e.status,clearable:"",color:"white","menu-props":{"content-class":"girder-job-filter-form-menu"},dark:"",dense:""},on:{input:function(t){e.$emit("update:status",t||null)}}})],1)],1)],1)],1)},Je=[],Qe={INACTIVE:{value:0,text:"Inactive",icon:"mdi-pause",color:"grey lighten-1"},QUEUED:{value:1,text:"Queued",icon:"mdi-dots-horizontal",color:"yellow darken-2",indeterminate:!0},RUNNING:{value:2,text:"Running",icon:"mdi-autorenew",color:"light-blue",spin:!0},SUCCESS:{value:3,text:"Success",icon:"mdi-check-circle",color:"green"},ERROR:{value:4,text:"Error",icon:"mdi-alert-circle",color:"red"},CANCELED:{value:5,text:"Canceled",icon:"mdi-close-circle",color:"grey darken-1"},WORKER_FETCHING_INPUT:{value:820,text:"Fetching input",icon:"mdi-cloud-download",color:"light-blue lighten-2",indeterminate:!0},WORKER_CONVERTING_INPUT:{value:821,text:"Converting input",icon:"mdi-shuffle",color:"lime",indeterminate:!0},WORKER_CONVERTING_OUTPUT:{value:822,text:"Converting output",icon:"mdi-shuffle",color:"lime",indeterminate:!0},WORKER_PUSHING_OUTPUT:{value:823,text:"Pushing output",icon:"mdi-cloud-upload",color:"light-blue lighten-2",indeterminate:!0},WORKER_CANCELING:{value:824,text:"Canceling",icon:"mdi-alert",color:"grey darken-1",indeterminate:!0}};function Ke(e){return Object.values(Qe).find(function(t){return t.value===e})}var We={props:{jobType:{type:[String,Object],default:null},jobTypeList:{type:Array,default:function(){return[]}},status:{type:[Number,Object],default:null},statusList:{type:Array,default:function(){return[]}}},data:function(){return{fromDateMenu:!1,toDateMenu:!1}},computed:{statusItemList:function(){return this.statusList.map(Ke).filter(function(e){return e&&e.text}).sort(function(e,t){return e.text>t.text?1:e.text<t.text?-1:0})}}},He=We,Ye=(r("7d9c"),r("0e8f")),Xe=r("b56d"),Ze=Object(g["a"])(He,Ge,Je,!1,null,null,null),et=Ze.exports;y()(Ze,{VCard:q["a"],VContainer:w["a"],VFlex:Ye["a"],VLayout:E["a"],VSelect:Xe["a"]});var tt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"girder-job-list"},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("filter-form",{attrs:{"from-date":e.jobFilter.fromDate,"to-date":e.jobFilter.toDate,status:e.jobFilter.status,"job-type":e.jobFilter.jobType,"status-list":e.typeAndStatusList.statuses,"job-type-list":e.typeAndStatusList.types},on:{"update:fromDate":function(t){e.$set(e.jobFilter,"fromDate",t)},"update:toDate":function(t){e.$set(e.jobFilter,"toDate",t)},"update:status":function(t){e.$set(e.jobFilter,"status",t)},"update:jobType":function(t){e.$set(e.jobFilter,"jobType",t)}}})],1)],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("job-table",{attrs:{jobs:e.jobs,pagination:e.pagination,"more-pages":e.morePages},on:{"update:pagination":function(t){e.pagination=t},"job-click":function(t,r){return e.$emit("job-click",t,r)}}})],1)],1)],1)},rt=[],nt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-data-table",{attrs:{"item-key":"_id",headers:e.headers,items:e.items,"total-items":e.totalItems,pagination:e.pagination},on:{"update:pagination":function(t){e.$emit("update:pagination",t)}},scopedSlots:e._u([{key:"items",fn:function(t){return[r("tr",{on:{click:function(r){e.$emit("job-click",r,t.item)}}},[r("td",[e._v(e._s(t.item.title))]),r("td",{staticClass:"one-line"},[e._v(e._s(t.item.type))]),r("td",{staticClass:"one-line"},[e._v(e._s(t.item.updateString))]),r("td",{staticClass:"one-line status-line",attrs:{nowrap:"",title:t.item.statusText}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{sm10:""}},[r("v-progress-linear",{staticClass:"mr-2 progress-bar",attrs:{color:t.item.statusColor,value:t.item.progressNumber,indeterminate:!!t.item.indeterminate,height:"10"}})],1),r("v-flex",{staticClass:"txt-xs-right",attrs:{s1:"","pl-1":""}},[r("v-icon",{staticClass:"status-icon",class:{rotate:t.item.spin},attrs:{color:t.item.statusColor,size:20}},[e._v(e._s(t.item.statusIcon))])],1)],1)],1)])]}},{key:"pageText",fn:function(t){return[r("div",{staticClass:"v-datatable__actions__pagination"},[e._v(e._s(e.pageRange.first)+"-"+e._s(e.pageRange.last))])]}}])})],1)},at=[],st=r("c1df"),it=r.n(st),ot={props:{jobs:{type:Array,required:!0},pagination:{type:Object,required:!0},morePages:{type:Boolean,default:!0}},data:function(){return{headers:[{text:"Job Title",value:"title"},{text:"Type",value:"type"},{text:"Last Updated",value:"updated"},{text:"Status",value:"status"}]}},computed:{items:function(){return this.jobs.map(this.mapJobToRow)},totalItems:function(){var e=this.pageRange.last;return this.morePages&&(e+=1),e},pageRange:function(){var e=this.pagination.rowsPerPage*(this.pagination.page-1)+1,t=e+this.jobs.length-1;return{first:e,last:t}}},methods:{mapJobToRow:function(e){var t=Object.assign({text:"Unknown"},Ke(e.status));return Object.assign({statusText:t.text,statusColor:t.color,statusTextColor:t.textColor||"white",statusIcon:t.icon,updateString:it()(e.updated).format("dddd, MMMM D, YYYY @ h:mm a"),progressNumber:this.progressAsNumber(e.progress),indeterminate:t.indeterminate,spin:t.spin},e)},progressAsNumber:function(e){return e?e.current/e.total*100:100}}},lt=ot,ct=(r("154d"),r("8e36")),ut=Object(g["a"])(lt,nt,at,!1,null,"61bdd97c",null),dt=ut.exports;y()(ut,{VCard:q["a"],VDataTable:Ie["a"],VFlex:Ye["a"],VIcon:k["a"],VLayout:E["a"],VProgressLinear:ct["a"]});var pt={inject:["girderRest","notificationBus"],components:{JobTable:dt,FilterForm:et},data:function(){return{jobFilter:{fromDate:null,toDate:null,status:null,jobType:null},pagination:{rowsPerPage:10,page:1,sortBy:"updated",descending:!0},morePages:!0,refresh:0}},watch:{jobFilter:{handler:function(){this.pagination.page=1},deep:!0}},asyncComputed:{jobs:{get:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.girderRest.user,this.refresh,t=this.pagination,r={limit:t.rowsPerPage+1,offset:t.rowsPerPage*(t.page-1)},t.sortBy&&(r.sort=t.sortBy,r.sortdir=t.descending?-1:1),null!==this.jobFilter.status&&(r.statuses=JSON.stringify([this.jobFilter.status])),null!==this.jobFilter.jobType&&(r.types=JSON.stringify([this.jobFilter.jobType])),e.next=9,this.girderRest.get("job?".concat(Object(fe["stringify"])(r)));case 9:return n=e.sent,n.data.length<r.limit?this.morePages=!1:this.morePages=!0,e.abrupt("return",n.data.slice(0,t.rowsPerPage));case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),default:function(){return[]}},typeAndStatusList:{get:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.girderRest.user,e.next=3,this.girderRest.get("job/typeandstatus");case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),default:function(){return{statuses:[],types:[]}}}},mounted:function(){var e=this;this.refreshJobFunc=function(){e.refreshJobList()},this.notificationBus.$on("message:job_status",this.refreshJobFunc),this.notificationBus.$on("message:job_created",this.refreshJobFunc)},beforeDestroy:function(){this.notificationBus.$off("message:job_status",this.refreshJobFunc),this.notificationBus.$off("message:job_created",this.refreshJobFunc)},methods:{refreshJobList:function(){this.refresh+=1}}},ht=pt,ft=Object(g["a"])(ht,tt,rt,!1,null,null,null),mt=ft.exports;y()(ft,{VFlex:Ye["a"],VLayout:E["a"]});var vt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"g-md-viewer",domProps:{innerHTML:e._s(e.markdown)}})},gt=[],bt=r("d4cd"),yt=r.n(bt),xt={props:{text:{default:"",type:String}},computed:{markdown:function(){return yt()({linkify:!0}).render(this.text)}}},wt=xt,kt=(r("23cb"),Object(g["a"])(wt,vt,gt,!1,null,null,null)),_t=kt.exports,Ct=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"girder-markdown-editor"},[r("v-tabs",{staticClass:"md-tab",model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("v-tab",{key:"edit"},[e._v("Edit")]),r("v-tab-item",[r("v-textarea",{attrs:{"hide-details":"",box:"","single-line":"",label:e.label,placeholder:e.placeholder},model:{value:e.text_,callback:function(t){e.text_=t},expression:"text_"}})],1),r("v-tab",{key:"preview"},[e._v("Preview")]),r("v-tab-item",{staticClass:"md-preview pa-2 grey lighten-3"},[r("girder-markdown",{attrs:{text:e.text_}})],1)],1),r("v-toolbar",{attrs:{dark:"",color:"secondary darken-2"}},[r("span",{staticClass:"hidden-xs-only"},[e._v("Supports"),r("a",{attrs:{href:"https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet"}},[e._v(" Markdown")])]),r("v-spacer"),r("v-toolbar-items",[r("v-btn",{class:{active:0===e.activeTab},attrs:{flat:""},on:{click:function(t){e.activeTab=0}}},[r("v-layout",{attrs:{"align-center":"","justify-content":"",column:""}},[r("v-icon",{staticClass:"mdi-24px"},[e._v(e._s(e.$vuetify.icons.edit))]),r("span",{staticClass:"caption text-capitalize"},[e._v("Write")])],1)],1),r("v-btn",{class:{active:1===e.activeTab},attrs:{flat:""},on:{click:function(t){e.activeTab=1}}},[r("v-layout",{attrs:{"align-center":"","justify-content":"",column:""}},[r("v-icon",{staticClass:"mdi-24px"},[e._v(e._s(e.$vuetify.icons.preview))]),r("span",{staticClass:"caption text-capitalize"},[e._v("Preview")])],1)],1)],1)],1)],1)},Rt=[],jt={components:{GirderMarkdown:_t},model:{prop:"text",event:"changed"},props:{placeholder:{default:null,type:String},text:{default:"",type:String},label:{type:String,default:""}},data:function(){return{activeTab:0,text_:this.text}},watch:{text:function(){this.text_=this.text},text_:function(){this.$emit("changed",this.text_)}}},Ot=jt,Tt=(r("0e3a"),r("a844")),Vt=r("71d9"),$t=r("2a7f"),Et=Object(g["a"])(Ot,Ct,Rt,!1,null,null,null),Pt=Et.exports;y()(Et,{VBtn:x["a"],VIcon:k["a"],VLayout:E["a"],VSpacer:P["a"],VTab:G["a"],VTabItem:J["a"],VTabs:Q["a"],VTextarea:Tt["a"],VToolbar:Vt["a"],VToolbarItems:$t["a"]});var St=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{staticClass:"girder-searchbar",attrs:{row:"","align-center":""}},[r("v-icon",{staticClass:"mdi-24px",attrs:{color:"white"}},[e._v(e._s(e.$vuetify.icons.search))]),r("v-menu",{staticClass:"grow mx-3",attrs:{"offset-y":"","content-class":"girder-searchbar-menu","open-on-click":!1,value:e.searchText,"nudge-bottom":6,transition:"slide-y-transition"}},[r("v-text-field",{attrs:{slot:"activator",light:"",solo:"","hide-details":"",clearable:""},slot:"activator",model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),r("v-list",[e._l(e.quickResults,function(t){return r("v-list-tile",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],key:t._id,on:{click:function(r){e.$emit("select",t)}}},[r("v-list-tile-action",[r("v-icon",[e._v(e._s(e.$vuetify.icons[t._modelType]))])],1),r("v-list-tile-content",[r("v-list-tile-title",[e._v(e._s(t.name||e.formatUsername(t)))])],1)],1)}),r("v-list-tile",{directives:[{name:"show",rawName:"v-show",value:e.searchText&&0===e.quickResults.length&&!e.loading,expression:"searchText && quickResults.length === 0 && !loading"}]},[r("v-list-tile-action",[r("v-icon",[e._v(e._s(e.$vuetify.icons.alert))])],1),r("v-list-tile-content",[r("v-list-tile-title",[e._v("No results found for query '"+e._s(e.searchText)+"'")]),r("v-list-tile-sub-title",[e._v("Modify search parameters or refine your query.")])],1)],1),r("v-list-tile",{directives:[{name:"show",rawName:"v-show",value:!e.loading&&e.showMore&&e.searchResults.length>e.maxQuickResults,expression:"!loading && showMore && searchResults.length > maxQuickResults"}],on:{click:function(t){e.$emit("moreresults",e.searchParams)}}},[r("v-list-tile-action",[r("v-icon",[e._v(e._s(e.$vuetify.icons.more))])],1),r("v-list-tile-content",[r("v-list-tile-title",[e._v("More")])],1)],1),e._l(e.maxQuickResults+(e.showMore?1:0),function(t){return r("v-list-tile",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],key:"skeleton-"+t},[r("v-list-tile-action",[r("v-icon",{staticClass:"grey--text text--lighten-1"},[e._v(e._s(e.$vuetify.icons.circle))])],1),r("v-list-tile-content",[r("v-list-tile-title",{staticClass:"skeleton skeleton--text mb-2",style:{width:60+t%3*4+"%",height:"10px"}}),r("v-list-tile-sub-title",{staticClass:"skeleton skeleton--text",style:{width:45-t%2*4+"%",height:"6px"}})],1)],1)})],2)],1),r("v-menu",{attrs:{"offset-y":"",left:"","content-class":"girder-search-arrow-menu","close-on-content-click":!1},model:{value:e.searchOptionsMenu,callback:function(t){e.searchOptionsMenu=t},expression:"searchOptionsMenu"}},[r("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[r("v-icon",{staticClass:"mdi-24px"},[e._v(e._s(e.$vuetify.icons.settings))])],1),r("v-card",[r("v-card-actions",[r("v-layout",{attrs:{column:""}},[r("v-radio-group",{staticClass:"my-2",attrs:{"hide-details":""},model:{value:e.searchMode,callback:function(t){e.searchMode=t},expression:"searchMode"}},[r("v-radio",{key:"text",staticClass:"mb-1",attrs:{label:"Text Search",value:"text"}}),r("v-radio",{key:"prefix",attrs:{label:"Prefix Search",value:"prefix"}})],1),r("v-divider"),r("v-checkbox",{staticClass:"mt-2",attrs:{"hide-details":"",label:"User",value:"user"},model:{value:e.searchTypes,callback:function(t){e.searchTypes=t},expression:"searchTypes"}}),r("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Folder",value:"folder"},model:{value:e.searchTypes,callback:function(t){e.searchTypes=t},expression:"searchTypes"}}),r("v-checkbox",{staticClass:"mt-1 mb-1",attrs:{"hide-details":"",label:"Item",value:"item"},model:{value:e.searchTypes,callback:function(t){e.searchTypes=t},expression:"searchTypes"}})],1)],1)],1)],1)],1)},Ft=[],Lt={props:{maxQuickResults:{type:Number,default:6},showMore:{type:Boolean,default:!0}},inject:["girderRest"],data:function(){return{searchText:"",searchMode:"prefix",searchTypes:["user","folder","item"],searchOptionsMenu:!1}},computed:{loading:function(){return this.counter.flag},quickResults:function(){return this.searchResults.slice(0,this.maxQuickResults)},searchParams:function(){return{q:this.searchText,mode:this.searchMode,types:JSON.stringify(this.searchTypes),limit:this.maxQuickResults+1}}},asyncComputed:{searchResults:{default:[],get:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],this.counter.inc(),e.prev=2,!this.searchText){e.next=9;break}return e.next=6,this.girderRest.get("resource/search",{params:this.searchParams});case 6:n=e.sent,a=n.data,t=(r=[]).concat.apply(r,Object(Z["a"])(this.searchTypes.map(function(e){return a[e]})));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),this.$emit("error",e.t0.message||"Unknown error during search");case 14:return this.counter.dec(),e.abrupt("return",t);case 16:case"end":return e.stop()}},e,this,[[2,11]])}));return function(){return e.apply(this,arguments)}}()}},beforeCreate:function(){this.counter=new _e},methods:{formatUsername:function(e){return"".concat(e.firstName," ").concat(e.lastName," (").concat(e.login,")")}}},It=Lt,Nt=(r("e589"),r("05b1"),r("99d9")),Mt=r("8860"),Ut=r("ba95"),zt=r("40fe"),Bt=r("5d23"),Dt=r("e449"),At=r("67b6"),qt=r("43a6"),Gt=Object(g["a"])(It,St,Ft,!1,null,"ad95f6f2",null),Jt=Gt.exports;y()(Gt,{VBtn:x["a"],VCard:q["a"],VCardActions:Nt["a"],VCheckbox:Le["a"],VDivider:V["a"],VIcon:k["a"],VLayout:E["a"],VList:Mt["a"],VListTile:Ut["a"],VListTileAction:zt["a"],VListTileContent:Bt["a"],VListTileSubTitle:Bt["b"],VListTileTitle:Bt["c"],VMenu:Dt["a"],VRadio:At["a"],VRadioGroup:qt["a"],VTextField:S["a"]});var Qt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{attrs:{flat:"",height:"100%"}},[r("v-layout",{attrs:{column:"","fill-height":""}},[e._t("header",[r("v-card-title",{attrs:{"primary-title":""}},[r("div",[r("div",{staticClass:"headline"},[e._v("Upload to "),r("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.dest.name))])]),r("div",{staticClass:"grey--text"},[e._v(e._s(e.statusMessage))])])])]),e.uploading?r("v-progress-linear",{attrs:{value:e.totalProgressPercent,height:"20"}}):e._e(),r("v-card-actions",{directives:[{name:"show",rawName:"v-show",value:e.files.length&&!e.errorMessage&&!e.uploading,expression:"files.length && !errorMessage && !uploading"}]},[r("v-btn",{attrs:{flat:""},on:{click:function(t){e.files=[]}}},[e._v("Clear all")]),r("v-btn",{attrs:{flat:"",color:"primary"},on:{click:e.start}},[e._v("Start upload")])],1),e._t("dropzone",[e.files.length?e._e():r("dropzone",{attrs:{message:e.dropzoneMessage,multiple:e.multiple,accept:e.accept},on:{change:e.filesChanged}})]),e.errorMessage?r("div",[r("v-alert",{attrs:{value:!0,dark:"",type:"error"}},[e._v(e._s(e.errorMessage)),e.uploading?e._e():r("v-btn",{attrs:{dark:"",outline:""},on:{click:e.start}},[e._v("Resume upload")])],1)],1):e._e(),e._t("files",[r("file-upload-list",{model:{value:e.files,callback:function(t){e.files=t},expression:"files"}})])],2)],1)},Kt=[],Wt=r("6bde"),Ht=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dropzone-wrapper",class:e.dropzoneClass,on:{dragenter:function(t){e.dropzoneClass="animate"},dragleave:function(t){e.dropzoneClass=null},drop:function(t){e.dropzoneClass=null}}},[r("v-layout",{staticClass:"dropzone-message",attrs:{column:"","justify-center":"","align-center":"","fill-height":""}},[r("v-icon",{attrs:{size:"50px"}},[e._v("$vuetify.icons.fileUpload")]),r("div",{staticClass:"title mt-3"},[e._v(e._s(e.message))])],1),r("input",{staticClass:"file-input",attrs:{type:"file",multiple:e.multiple,accept:e.accept},on:{change:function(t){e.$emit("change",Array.apply(void 0,t.target.files))}}})],1)},Yt=[],Xt={props:{message:{type:String,required:!0},multiple:{type:Boolean,required:!0},accept:{type:String,default:null}},data:function(){return{dropzoneClass:null}}},Zt=Xt,er=(r("67a5"),Object(g["a"])(Zt,Ht,Yt,!1,null,"0d09c355",null)),tr=er.exports;y()(er,{VIcon:k["a"],VLayout:E["a"]});var rr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-list",{directives:[{name:"show",rawName:"v-show",value:e.value.length,expression:"value.length"}],attrs:{dense:""}},e._l(e.value,function(t,n){return r("div",{key:t.file.name,staticClass:"file-tile",class:"status-"+t.status},[n>0?r("v-divider"):e._e(),r("v-list-tile",{attrs:{avatar:""}},[r("v-list-tile-avatar",["pending"===t.status?r("v-btn",{attrs:{icon:""},on:{click:function(t){e.$emit("input",e.splice(n))}}},[r("v-icon",[e._v("$vuetify.icons.close")])],1):e._e(),"uploading"===t.status?r("v-progress-circular",{attrs:{color:"primary",rotate:-90,value:e.progressPercent(t.progress),indeterminate:t.progress.indeterminate}}):e._e(),"done"===t.status?r("v-icon",{attrs:{color:"success",large:""}},[e._v("$vuetify.icons.complete")]):e._e(),"error"===t.status?r("v-icon",{attrs:{color:"error",large:""}},[e._v("$vuetify.icons.error")]):e._e()],1),r("v-list-tile-content",[r("v-list-tile-title",[e._v(e._s(t.file.name))]),r("v-list-tile-sub-title",[t.progress.current?r("span",[e._v(e._s(e.formatSize(t.progress.current))+" /")]):e._e(),r("span",[e._v(e._s(e.formatSize(t.file.size)))])])],1)],1)],1)}),0)},nr=[],ar={mixins:[ne,re],props:{value:{type:Array,required:!0}},methods:{splice:function(e){return Object(Z["a"])(this.value.slice(0,e)).concat(Object(Z["a"])(this.value.slice(e+1)))}}},sr=ar,ir=(r("edaa"),r("c954")),or=r("490a"),lr=Object(g["a"])(sr,rr,nr,!1,null,"93c61a4a",null),cr=lr.exports;y()(lr,{VBtn:x["a"],VDivider:V["a"],VIcon:k["a"],VList:Mt["a"],VListTile:Ut["a"],VListTileAvatar:ir["a"],VListTileContent:Bt["a"],VListTileSubTitle:Bt["b"],VListTileTitle:Bt["c"],VProgressCircular:or["a"]});var ur={components:{Dropzone:tr,FileUploadList:cr},mixins:[ne,re],inject:["girderRest"],props:{dest:{required:!0,type:Object},multiple:{default:!0,type:Boolean},preUpload:{default:function(){},type:Function},postUpload:{default:function(){},type:Function},uploadCls:{default:ke,type:Function},accept:{default:null,type:String}},data:function(){return{dragover:!1,errorMessage:null,files:[],uploading:!1}},computed:{dropzoneMessage:function(){return this.multiple?"Drag files here or click to select them":"Drag a file here or click to select one"},statusMessage:function(){return this.uploading?"".concat(this.formatSize(this.totalProgress)," / ").concat(this.formatSize(this.totalSize)," ")+"(".concat(this.totalProgressPercent,"%)"):"".concat(this.files.length," selected (").concat(this.formatSize(this.totalSize)," total)")},totalProgress:function(){return this.files.reduce(function(e,t){return e+t.progress.current},0)},totalSize:function(){return this.files.reduce(function(e,t){return e+t.file.size},0)},totalProgressPercent:function(){return this.progressPercent({current:this.totalProgress,total:this.totalSize})}},methods:{filesChanged:function(e){this.files=e.map(function(e){return{file:e,status:"pending",progress:{indeterminate:!1,current:0,size:e.size},upload:null,result:null}})},start:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=[],this.uploading=!0,this.errorMessage=null,e.next=5,this.preUpload();case 5:r=regeneratorRuntime.mark(function e(r){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=s.files[r],"done"!==n.status){e.next=5;break}t.push(n.result),e.next=38;break;case 5:if(a=function(e){Object.assign(n.progress,e)},n.status="uploading",n.progress.indeterminate=!0,e.prev=8,!n.upload){e.next=15;break}return e.next=12,n.upload.resume();case 12:n.result=e.sent,e.next=21;break;case 15:return n.upload=new s.uploadCls(n.file,{$rest:s.girderRest,parent:s.dest,progress:a}),e.next=18,n.upload.beforeUpload();case 18:return e.next=20,n.upload.start();case 20:n.result=e.sent;case 21:return e.next=23,n.upload.afterUpload();case 23:delete n.upload,t.push(n.result),n.status="done",n.progress.current=n.file.size,e.next=38;break;case 29:return e.prev=29,e.t0=e["catch"](8),e.next=33,n.upload.onError(e.t0);case 33:return e.t0.response?s.errorMessage=e.t0.response.data.message||"An error occurred during upload.":s.errorMessage="Connection failed.",n.status="error",s.uploading=!1,s.$emit("error",{error:e.t0,file:n}),e.abrupt("return",{v:void 0});case 38:case"end":return e.stop()}},e,this,[[8,29]])}),n=0;case 7:if(!(n<this.files.length)){e.next=15;break}return e.delegateYield(r(n),"t0",9);case 9:if(a=e.t0,"object"!==Object(Wt["a"])(a)){e.next=12;break}return e.abrupt("return",a.v);case 12:n+=1,e.next=7;break;case 15:return e.next=17,this.postUpload();case 17:this.uploading=!1,this.files=[],this.$emit("done",t);case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},dr=ur,pr=r("12b2"),hr=Object(g["a"])(dr,Qt,Kt,!1,null,null,null),fr=hr.exports;y()(hr,{VAlert:T["a"],VBtn:x["a"],VCard:q["a"],VCardActions:Nt["a"],VCardTitle:pr["a"],VLayout:E["a"],VProgressLinear:ct["a"]});var mr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",{on:{submit:function(t){return t.preventDefault(),e.upsert(t)}}},[r("v-card",{attrs:{flat:"",height:"100%"}},[r("v-layout",{staticClass:"pa-2",attrs:{column:"","fill-height":""}},[e._t("header",[r("v-card-title",{staticClass:"pb-0",attrs:{"primary-title":""}},[r("h5",{staticClass:"display-1 secondary--text text--darken-1"}),e._v(e._s(e.edit?"Edit Folder":"Create New Folder"))])]),r("v-card-text",[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{ref:"folderName",attrs:{autofocus:"",label:"Folder Name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),r("girder-breadcrumb",{staticClass:"mb-3",attrs:{location:e.location,disabled:!0,append:e.append,"no-root":""}}),r("girder-markdown-editor",{attrs:{label:"Description (Optional)"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),r("v-alert",{attrs:{type:"error",value:!!e.error,dismissible:"",transition:"scale-transition"}},[e._v(e._s(e.error))])],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{flat:""},on:{click:function(t){e.$emit("dismiss")}}},[e._v("Cancel")]),r("v-btn",{attrs:{depressed:"",color:"primary",type:"submit",disabled:!e.name}},[e._v(e._s(e.edit?"Save Changes":"Create Folder"))])],1)],2)],1)],1)},vr=[],gr="folder",br={components:{GirderBreadcrumb:$e,GirderMarkdownEditor:Pt},props:{location:{type:Object,required:!0,validator:Ce(!1)},edit:{type:Boolean,default:!1},preUpsert:{type:Function,default:function(){}},postUpsert:{type:Function,default:function(){}}},inject:["girderRest"],data:function(){return{name:"",description:"",error:""}},computed:{append:function(){return this.edit?[]:[this.name||"New Folder"]}},mounted:function(){this.edit&&this.loadFolder(this.location._id)},methods:{upsert:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.error="",e.prev=1,e.next=4,this.preUpsert();case 4:if(!this.edit){e.next=9;break}return e.next=7,this.girderRest.put("".concat(gr,"/").concat(this.location._id),Object(fe["stringify"])({name:this.name,description:this.description}));case 7:e.next=11;break;case 9:return e.next=11,this.girderRest.post(gr,Object(fe["stringify"])({parentType:this.location._modelType,parentId:this.location._id,name:this.name,description:this.description,reuseExisting:!1}));case 11:return e.next=13,this.postUpsert();case 13:this.name="",this.description="",this.$emit("done"),e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](1),this.$emit("error",{type:"upsert",error:e.t0}),this.setError(e.t0);case 22:case"end":return e.stop()}},e,this,[[1,18]])}));return function(){return e.apply(this,arguments)}}(),loadFolder:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.error="",e.prev=1,e.next=4,this.girderRest.get("".concat(gr,"/").concat(t));case 4:r=e.sent,n=r.data,this.name=n.name,this.description=n.description,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),this.$emit("error",{type:"load",error:e.t0}),this.setError(e.t0);case 14:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t){return e.apply(this,arguments)}}(),setError:function(e){if(e.response){var t=e.response.data,r=void 0===t?{}:t,n=r.type,a=void 0===n?"unknown":n,s=r.message,i=r.field,o=void 0===i?"unknown":i;this.error="".concat(a," error on ").concat(o,": ").concat(s||e.message)}else this.error="Unknown error: ".concat(e.message)}}},yr=br,xr=Object(g["a"])(yr,mr,vr,!1,null,null,null),wr=xr.exports;y()(xr,{VAlert:T["a"],VBtn:x["a"],VCard:q["a"],VCardActions:Nt["a"],VCardText:Nt["b"],VCardTitle:pr["a"],VFlex:Ye["a"],VForm:$["a"],VLayout:E["a"],VSpacer:P["a"],VTextField:S["a"]});var kr=r("a78e"),_r=r.n(kr);function Cr(e){_r.a.set("girderToken",e.token,{expires:new Date(e.expires)})}var Rr=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.apiRoot,a=void 0===n?"/api/v1":n,s=r.token,i=void 0===s?_r.a.get("girderToken"):s,o=r.axios,l=void 0===o?ge.a.create():o,c=r.setLocalCookie,u=void 0===c||c;return Object(le["a"])(this,t),e=Object(de["a"])(this,Object(pe["a"])(t).call(this,{data:{user:null,token:i}})),Object.assign(Object(he["a"])(Object(he["a"])(e)),l,{apiRoot:a,setLocalCookie:u}),e.interceptors.request.use(function(t){return Object(te["a"])({},t,{baseURL:e.apiRoot,headers:Object(te["a"])({"Girder-Token":e.token},t.headers)})}),e}return Object(ue["a"])(t,[{key:"login",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,s,i=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:null,e.prev=1,e.next=4,this.logout();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:return a={"Girder-Token":null},n&&(a["Girder-OTP"]=n),e.next=12,this.get("user/authentication",{headers:a,auth:{username:t,password:r}});case 12:return s=e.sent,this.token=s.data.authToken.token,this.user=s.data.user,this.setLocalCookie&&Cr(s.data.authToken),this.$emit("login",this.user),e.abrupt("return",s);case 18:case"end":return e.stop()}},e,this,[[1,6]])}));return function(t,r){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.token){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.delete("user/authentication");case 5:e.next=11;break;case 7:if(e.prev=7,e.t0=e["catch"](2),401===e.t0.response.status){e.next=11;break}throw e.t0;case 11:return e.prev=11,this.token=null,this.user=null,_r.a.remove("girderToken"),this.$emit("logout"),e.finish(11);case 17:case"end":return e.stop()}},e,this,[[2,7,11,17]])}));return function(){return e.apply(this,arguments)}}()},{key:"fetchUser",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.get("user/me");case 2:return t=e.sent,this.user=t.data,null===this.user&&(this.token=null),e.abrupt("return",this.user);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,r,n,a,s){var i,o,l=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=l.length>5&&void 0!==l[5]&&l[5],e.next=3,this.post("user",Object(fe["stringify"])({login:t,email:r,firstName:n,lastName:a,password:s,admin:i}));case 3:if(o=e.sent,o.data.authToken){e.next=6;break}return e.abrupt("return",o);case 6:return this.token=o.data.authToken.token,this.user=o.data,this.setLocalCookie&&Cr(o.data.authToken),this.$emit("register",this.user),this.$emit("login",this.user),e.abrupt("return",o);case 12:case"end":return e.stop()}},e,this)}));return function(t,r,n,a,s){return e.apply(this,arguments)}}()}]),Object(ce["a"])(t,e),t}(n["a"]);function jr(e){e.use(i["a"],oe),e.use(s.a)}var Or={install:jr},Tr=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.EventSource,s=void 0===a?window.EventSource:a,i=n.listenToRestClient,o=void 0===i||i,l=n.pollingInterval,c=void 0===l?[500,5e3,1e3]:l,u=n.since,d=void 0===u?new Date:u,p=n.useEventSource,h=void 0!==p&&p,f=n.withCredentials,m=void 0===f||f;return Object(le["a"])(this,t),r=Object(de["a"])(this,Object(pe["a"])(t).call(this)),Object.assign(Object(he["a"])(Object(he["a"])(r)),{$rest:e,EventSource:s,pollingInterval:c,since:d,useEventSource:h,withCredentials:m}),o&&(e.$on("login",function(){r.connect()}),e.$on("logout",function(){r.disconnect()})),r}return Object(ue["a"])(t,[{key:"_emitNotification",value:function(e){var t=e.type,r=e.updated;r&&(this.since=new Date(Math.max(+this.since,+new Date(r))));for(var n=t.indexOf(".");-1!==n;n=t.indexOf(".",n+1))this.$emit("message:".concat(t.substring(0,n)),e,this);this.$emit("message:".concat(t),e,this),this.$emit("message",e,this)}},{key:"_onSseMessage",value:function(e){var t=e.data;this._emitNotification(JSON.parse(t))}},{key:"_onSseError",value:function(e){this.$emit("error",e,this),this.disconnect(),this.useEventSource=!1,this.connect()}},{key:"connect",value:function(){if(!this.connected)if(this.useEventSource&&this.EventSource){var e=Math.ceil(+this.since/1e3),t="".concat(this.$rest.apiRoot,"/notification/stream?since=").concat(e);this._eventSource=new this.EventSource(t,{withCredentials:this.withCredentials}),this._eventSource.onmessage=this._onSseMessage.bind(this),this._eventSource.onerror=this._onSseError.bind(this),this.$emit("start",this)}else this._poll()}},{key:"disconnect",value:function(){this._stopPolling(),this._eventSource&&(this._eventSource.close(),this._eventSource=null,this.$emit("stop",this))}},{key:"_poll",value:function(){var e,t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Object(me["a"])(this.pollingInterval,3),a=n[0],s=n[1],i=n[2];this._poller=setTimeout(Object(c["a"])(regeneratorRuntime.mark(function n(){var o,l;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$rest.get("/notification?since=".concat(t.since.toISOString()));case 3:o=n.sent,l=o.data,l.forEach(t._emitNotification.bind(t)),e=l.length?a:0===r?s:Math.min(r+i,s),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),e=s;case 12:return n.prev=12,t._poll(e),n.finish(12);case 15:case"end":return n.stop()}},n,this,[[0,9,12,15]])})),r)}},{key:"_stopPolling",value:function(){clearTimeout(this._poller),this._poller=null}},{key:"connected",get:function(){return!(!this._eventSource&&!this._poller)}}]),Object(ce["a"])(t,e),t}(n["a"]),Vr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{staticClass:"app"},[r("v-toolbar",{directives:[{name:"show",rawName:"v-show",value:!e.loggedOut,expression:"!loggedOut"}],staticClass:"toolbar-main",attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[e._v("Girder Web Components")]),r("v-toolbar-items",[r("v-menu",{attrs:{"offset-y":"",left:"","close-on-content-click":!1,"content-class":"girder-search-arrow-menu"},model:{value:e.uiOptionsMenu,callback:function(t){e.uiOptionsMenu=t},expression:"uiOptionsMenu"}},[r("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[r("v-icon",{staticClass:"mdi-24px"},[e._v(e._s(e.$vuetify.icons.more))])],1),r("v-card",[r("v-card-actions",[r("v-layout",{attrs:{column:""}},[r("v-checkbox",{staticClass:"mt-2",attrs:{"hide-details":"",label:"Select"},model:{value:e.selectEnabled,callback:function(t){e.selectEnabled=t},expression:"selectEnabled"}}),r("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Draggable"},model:{value:e.dragEnabled,callback:function(t){e.dragEnabled=t},expression:"dragEnabled"}}),r("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"New Folder"},model:{value:e.newFolderEnabled,callback:function(t){e.newFolderEnabled=t},expression:"newFolderEnabled"}}),r("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Upload"},model:{value:e.newItemEnabled,callback:function(t){e.newItemEnabled=t},expression:"newItemEnabled"}}),r("v-checkbox",{staticClass:"mt-1 mb-1",attrs:{"hide-details":"",label:"Search Box"},model:{value:e.searchEnabled,callback:function(t){e.searchEnabled=t},expression:"searchEnabled"}}),r("v-divider"),r("v-list",{attrs:{dense:""}},[r("v-list-tile",{on:{click:function(t){e.jobDialog=!e.jobDialog}}},[r("v-list-tile-title",[e._v("Jobs")])],1)],1)],1)],1)],1)],1)],1),r("v-spacer"),e.searchEnabled?r("girder-search",{on:{select:e.handleSearchSelect}}):e._e(),r("v-btn",{attrs:{flat:"",icon:""},on:{click:function(t){e.girderRest.logout()}}},[r("v-icon",[e._v("$vuetify.icons.logout")])],1)],1),r("v-dialog",{attrs:{value:e.loggedOut,persistent:"","full-width":"","max-width":"600px"}},[r("girder-auth",{key:e.girderRest.token,attrs:{"force-otp":!1,register:!0,oauth:!0,"forgot-password-url":e.forgotPasswordUrl}})],1),r("v-dialog",{attrs:{"full-width":"","max-width":"800px"},model:{value:e.uploader,callback:function(t){e.uploader=t},expression:"uploader"}},[e.uploadDest?r("girder-upload",{attrs:{dest:e.uploadDest,"post-upload":e.postUpload,multiple:"multiple"}}):e._e()],1),r("v-dialog",{attrs:{"full-width":"","max-width":"800px"},model:{value:e.newFolder,callback:function(t){e.newFolder=t},expression:"newFolder"}},[e.nonRootLocation(e.location)?r("girder-upsert-folder",{key:e.location._id,attrs:{location:e.location,"post-upsert":e.postUpsert},on:{dismiss:function(t){e.newFolder=!1}}}):e._e()],1),r("v-container",{directives:[{name:"show",rawName:"v-show",value:!e.loggedOut,expression:"!loggedOut"}],attrs:{fluid:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{staticClass:"mr-2",attrs:{grow:""}},[r("v-card",[r("girder-data-browser",{ref:"girderBrowser",attrs:{location:e.location,"select-enabled":e.selectEnabled,draggable:e.dragEnabled,"new-item-enabled":e.newItemEnabled,"new-folder-enabled":e.newFolderEnabled},on:{"update:location":function(t){e.location=t},"click:newitem":function(t){e.uploader=!0},"click:newfolder":function(t){e.newFolder=!0},"selection-changed":function(t){e.selected=t}}})],1)],1)],1)],1),r("v-dialog",{attrs:{"full-width":""},model:{value:e.jobDialog,callback:function(t){e.jobDialog=t},expression:"jobDialog"}},[r("girder-job-list")],1)],1)},$r=[],Er={name:"App",inject:["girderRest"],components:{GirderAuth:H,GirderDataBrowser:qe,GirderSearch:Jt,GirderUpload:fr,GirderUpsertFolder:wr,GirderJobList:mt},data:function(){return{multiple:!0,uploader:!1,newFolder:!1,uiOptionsMenu:!1,browserLocation:null,forgotPasswordUrl:"/#?dialog=resetpassword",dragEnabled:!1,selectEnabled:!0,newItemEnabled:!0,newFolderEnabled:!0,searchEnabled:!0,selected:[],jobDialog:!1}},asyncComputed:{folder:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.girderRest.user){e.next=11;break}return e.prev=1,e.next=4,this.girderRest.get("folder",{params:{parentType:"user",parentId:this.girderRest.user._id}});case 4:return e.abrupt("return",e.sent.data[0]);case 7:e.prev=7,e.t0=e["catch"](1),t=e.t0.response,this.error=t?t.data.message:"Could not connect to server: ".concat(this.girderRest.apiRoot);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this,[[1,7]])}));return function(){return e.apply(this,arguments)}}()},computed:{location:{get:function(){return this.browserLocation?this.browserLocation:this.girderRest.user?{_modelType:"user",_id:this.girderRest.user._id}:{type:"root"}},set:function(e){this.browserLocation=e}},loggedOut:function(){return null===this.girderRest.user},uploadDest:function(){return this.location?"folder"===this.location._modelType?this.location:this.folder:null}},methods:{nonRootLocation:Ce(!1),postUpload:function(){return this.$refs.girderBrowser.refresh(),this.uploader=!1,new Promise(function(e){return setTimeout(e,400)})},postUpsert:function(){return this.$refs.girderBrowser.refresh(),this.newFolder=!1,new Promise(function(e){return setTimeout(e,400)})},handleSearchSelect:function(e){["user","folder"].indexOf(e._modelType)>=0?this.browserLocation=e:this.browserLocation={_modelType:"folder",_id:e.folderId}}}},Pr=Er,Sr=(r("dfa1"),r("7496")),Fr=r("169a"),Lr=Object(g["a"])(Pr,Vr,$r,!1,null,null,null),Ir=Lr.exports;y()(Lr,{VApp:Sr["a"],VBtn:x["a"],VCard:q["a"],VCardActions:Nt["a"],VCheckbox:Le["a"],VContainer:w["a"],VDialog:Fr["a"],VDivider:V["a"],VFlex:Ye["a"],VIcon:k["a"],VLayout:E["a"],VList:Mt["a"],VListTile:Ut["a"],VListTileTitle:Bt["c"],VMenu:Dt["a"],VSpacer:P["a"],VToolbar:Vt["a"],VToolbarItems:$t["a"],VToolbarTitle:$t["b"]}),n["a"].use(Or);var Nr=new Rr({apiRoot:"https://data.kitware.com/api/v1"}),Mr=new Tr(Nr);Mr.connect(),Nr.fetchUser().then(function(){new n["a"]({render:function(e){return e(Ir)},provide:{girderRest:Nr,notificationBus:Mr}}).$mount("#app")})},a2fd:function(e,t,r){},afe4:function(e,t,r){},dfa1:function(e,t,r){"use strict";var n=r("a2fd"),a=r.n(n);a.a},e589:function(e,t,r){"use strict";var n=r("73bd"),a=r.n(n);a.a},edaa:function(e,t,r){"use strict";var n=r("484c"),a=r.n(n);a.a}});
//# sourceMappingURL=app.936972ea.js.map