(function(e){function t(t){for(var a,s,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)s=o[d],n[s]&&p.push(n[s][0]),n[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],a=!0,o=1;o<r.length;o++){var l=r[o];0!==n[l]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},n={app:0},i=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push(["a1ec","chunk-vendors"]),r()})({"0115":function(e,t,r){},"06ae":function(e,t,r){},"0e3a":function(e,t,r){"use strict";var a=r("9578"),n=r.n(a);n.a},"10e2":function(e,t,r){"use strict";var a=r("38f9"),n=r.n(a);n.a},"23cb":function(e,t,r){"use strict";var a=r("0115"),n=r.n(a);n.a},"28e0":function(e,t,r){"use strict";var a=r("4d30"),n=r.n(a);n.a},"38f9":function(e,t,r){},"484c":function(e,t,r){},"4bc3":function(e,t,r){"use strict";var a=r("06ae"),n=r.n(a);n.a},"4d30":function(e,t,r){},"51ba":function(e,t,r){},"67a5":function(e,t,r){"use strict";var a=r("51ba"),n=r.n(a);n.a},"73bd":function(e,t,r){},"8d4c":function(e,t,r){"use strict";var a=r("afe4"),n=r.n(a);n.a},9578:function(e,t,r){},a0d8:function(e,t,r){},a1ec:function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("097d");var a=r("2b0e"),n=r("9437"),i=r.n(n),s=r("bb71"),o=(r("41e6"),r("bf40"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"girder-authentication-component"},[r("v-tabs",{attrs:{color:"primary","slider-color":"yellow",dark:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("v-tab",{key:"login"},[e._v("Log In")]),e.register?r("v-tab",{key:"registration"},[e._v("Register")]):e._e(),r("v-tab-item",{key:"login-box"},[r("girder-login",{attrs:{"oauth-providers":e.oauthProviders,"force-otp":e.forceOtp,"forgot-password-url":e.forgotPasswordUrl,"forgot-password-route":e.forgotPasswordRoute},on:{forgotpassword:function(t){e.$emit("forgotpassword")}}})],1),e.register?r("v-tab-item",{key:"registration-box"},[r("girder-registration",{attrs:{"oauth-providers":e.oauthProviders}})],1):e._e()],1)],1)}),l=[],c=(r("96cf"),r("3040")),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-widget"},[e._l(e.alerts.errors,function(t){return r("v-alert",{key:t,staticClass:"mt-0",attrs:{dismissible:"",transition:"scale-transition",value:!!t,type:"error"}},[e._v(e._s(t))])}),r("v-container",[r("v-form",{ref:"login",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[!e.otpFormVisible||e.forceOtp?r("v-text-field",{attrs:{label:"Username or e-mail",autofocus:"",rules:e.nonEmptyRules,"prepend-icon":"$vuetify.icons.user",type:"text"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}):e._e(),!e.otpFormVisible||e.forceOtp?r("v-text-field",{attrs:{type:"password",label:"Password",rules:e.nonEmptyRules,"prepend-icon":"$vuetify.icons.lock"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}):e._e(),e.otpFormVisible||e.forceOtp?r("v-text-field",{attrs:{type:"text",mask:"######",label:"Authentication code",rules:e.nonEmptyRules,"prepend-icon":"$vuetify.icons.otp"},model:{value:e.otp,callback:function(t){e.otp=t},expression:"otp"}}):e._e(),r("v-layout",{staticClass:"mt-2",attrs:{row:""}},[r("v-btn",{staticClass:"ml-0",attrs:{type:"submit",color:"primary",disabled:e.inProgress,loading:e.inProgress}},[r("v-icon",{attrs:{left:""}},[e._v("$vuetify.icons.login")]),e._v(e._s(e.otpFormVisible?"Verify code":"Login"))],1),r("v-spacer"),r("v-btn",{attrs:{flat:"",color:"primary",to:e.forgotPasswordRoute,href:e.forgotPasswordUrl},on:{click:function(t){e.$emit("forgotpassword")}}},[e._v("Forgot Password?")])],1)],1)],1),e.oauthProviders&&e.oauthProviders.length?[r("v-divider"),r("girder-oauth",{attrs:{providers:e.oauthProviders}})]:e._e()],2)},d=[],p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"oauth-widget"},[r("h4",[e._v("Or "+e._s(e.verb)+" with OAuth")]),e._l(e.providers,function(t){return r("v-btn",{key:t.id,staticClass:"ml-0 mr-3",attrs:{dark:e.iconMap[t.id].dark,color:e.iconMap[t.id].color,href:t.url}},[r("v-icon",{attrs:{left:""}},[e._v(e._s(e.$vuetify.icons[e.iconMap[t.id].icon]))]),e._v(e._s(t.name))],1)})],2)},h=[],f={github:{dark:!0,icon:"github"},google:{dark:!0,icon:"google",color:"#3367d6"},linkedin:{dark:!0,icon:"linkedin",color:"#283e4a"},bitbucket:{dark:!1,icon:"bitbucket"},box:{dark:!0,icon:"box_com",color:"#0071f7"},globus:{dark:!0,icon:"globus",color:"#335a95"}},m={props:{verb:{type:String,default:"sign in"},providers:{type:Array,required:!0}},data:function(){return{enabledProviders:[],iconMap:f}}},v=m,g=r("2877"),b=r("6544"),y=r.n(b),x=r("8336"),w=r("a523"),k=r("132d"),_=Object(g["a"])(v,p,h,!1,null,null,null),C=_.exports;y()(_,{VBtn:x["a"],VContainer:w["a"],VIcon:k["a"]});var j="authentication must include a one-time password",R={inject:["girderRest"],components:{GirderOauth:C},props:{forceOtp:{type:Boolean,default:!1},forgotPasswordUrl:{type:String,default:null},forgotPasswordRoute:{type:Object,default:null},oauthProviders:{type:Array,default:function(){return[]}}},data:function(){return{username:"",password:"",otp:null,inProgress:!1,alerts:{errors:[]},nonEmptyRules:[function(e){return!!e||"Item is required"}],otpFormVisible:!1}},methods:{login:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.login.validate()){e.next=2;break}return e.abrupt("return");case 2:return this.alerts.errors=[],this.inProgress=!0,e.prev=4,e.next=7,this.girderRest.login(this.username,this.password,this.otp);case 7:this.password="",this.otp=null,this.otpFormVisible=!1,e.next=21;break;case 12:if(e.prev=12,e.t0=e["catch"](4),e.t0.response&&401===e.t0.response.status){e.next=19;break}throw this.alerts.errors.push("Unknown error."),e.t0;case 19:t=e.t0.response.data.message,t&&t.indexOf(j)>=0?(this.otp=null,this.otpFormVisible=!0,this.$refs.login.resetValidation()):this.alerts.errors.push(t||"Unauthorized.");case 21:return e.prev=21,this.inProgress=!1,e.finish(21);case 24:case"end":return e.stop()}},e,this,[[4,12,21,24]])}));return function(){return e.apply(this,arguments)}}()}},O=R,T=r("0798"),V=r("ce7e"),$=r("4bd4"),P=r("a722"),E=r("9910"),L=r("2677"),S=Object(g["a"])(O,u,d,!1,null,null,null),F=S.exports;y()(S,{VAlert:T["a"],VBtn:x["a"],VContainer:w["a"],VDivider:V["a"],VForm:$["a"],VIcon:k["a"],VLayout:P["a"],VSpacer:E["a"],VTextField:L["a"]});var U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register-widget"},[e._l(e.alerts.errors,function(t){return r("v-alert",{key:t,staticClass:"mt-0",attrs:{dismissible:"",transition:"scale-transition",value:!0,type:"error"}},[e._v(e._s(t))])}),e._l(e.alerts.infos,function(t){return r("v-alert",{key:t,staticClass:"mt-0",attrs:{dismissible:"",transition:"scale-transition",value:!0,type:"info"}},[e._v(e._s(t))])}),r("v-container",[r("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[r("v-text-field",{attrs:{label:"Username",rules:e.nonEmptyRules,type:"text",autofocus:""},model:{value:e.login,callback:function(t){e.login=t},expression:"login"}}),r("v-text-field",{attrs:{label:"Email",rules:e.nonEmptyRules,type:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("v-text-field",{attrs:{label:"First Name",rules:e.nonEmptyRules,type:"text"},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),r("v-text-field",{attrs:{label:"Last Name",rules:e.nonEmptyRules,type:"text"},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),r("v-text-field",{attrs:{type:"password",label:"Password",rules:e.nonEmptyRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("v-text-field",{attrs:{type:"password",label:"Retype password",rules:e.retypeMustMatchPasswordRules},model:{value:e.retypePassword,callback:function(t){e.retypePassword=t},expression:"retypePassword"}}),r("v-btn",{staticClass:"ml-0",attrs:{type:"submit",color:"primary",loading:e.inProgress}},[e._v("Register")])],1)],1),e.oauthProviders&&e.oauthProviders.length?[r("v-divider"),r("girder-oauth",{attrs:{verb:"register",providers:e.oauthProviders}})]:e._e()],2)},D=[],I={inject:["girderRest"],components:{GirderOauth:C},props:{oauthProviders:{type:Array,default:function(){return[]}}},data:function(){var e=this,t=[function(e){return!!e||"Item is required"}],r=t.concat([function(t){return t===e.password||"Passwords must match"}]);return{login:"",email:"",firstName:"",lastName:"",password:"",retypePassword:"",retypePasswordErrors:[],inProgress:!1,alerts:{errors:[],infos:[]},nonEmptyRules:t,retypeMustMatchPasswordRules:r}},methods:{register:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.form.validate()){e.next=2;break}return e.abrupt("return");case 2:return this.inProgress=!0,this.alerts.errors=[],this.alerts.infos=[],e.prev=5,e.next=8,this.girderRest.register(this.login,this.email,this.firstName,this.lastName,this.password);case 8:t=e.sent,t.data.authToken||(this.alerts.infos.push("Registration needs email verification or administrator approval. \nCheck your email to continue."),this.$refs.form.reset()),e.next=20;break;case 12:if(e.prev=12,e.t0=e["catch"](5),e.t0.response&&400===e.t0.response.status){e.next=19;break}throw this.alerts.errors.push("Unknown error."),e.t0;case 19:this.alerts.errors.push(e.t0.response.data.message||"Invalid registration.");case 20:return e.prev=20,this.inProgress=!1,e.finish(20);case 23:case"end":return e.stop()}},e,this,[[5,12,20,23]])}));return function(){return e.apply(this,arguments)}}()}},M=I,N=Object(g["a"])(M,U,D,!1,null,null,null),B=N.exports;y()(N,{VAlert:T["a"],VBtn:x["a"],VContainer:w["a"],VDivider:V["a"],VForm:$["a"],VTextField:L["a"]});var z={inject:["girderRest"],components:{GirderLogin:F,GirderRegistration:B},props:{register:{type:Boolean,default:!1},oauth:{type:Boolean,default:!1},forgotPasswordUrl:{type:String,default:null},forgotPasswordRoute:{type:[Object,String],default:null},forceOtp:{type:Boolean,default:!1}},data:function(){return{activeTab:null}},asyncComputed:{oauthProviders:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.oauth){e.next=12;break}return e.prev=1,e.next=4,this.girderRest.get("oauth/provider",{params:{redirect:window.location.href,list:!0}});case 4:return e.abrupt("return",e.sent.data);case 7:return e.prev=7,e.t0=e["catch"](1),e.abrupt("return",[]);case 10:e.next=13;break;case 12:return e.abrupt("return",[]);case 13:case"end":return e.stop()}},e,this,[[1,7]])}));return function(){return e.apply(this,arguments)}}()}},A=z,q=r("b0af"),G=r("71a3"),J=r("c671"),W=r("fe57"),Q=Object(g["a"])(A,o,l,!1,null,null,null),K=Q.exports;y()(Q,{VCard:q["a"],VTab:G["a"],VTabItem:J["a"],VTabs:W["a"]});var H=K,Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"girder-breadcrumb-component"},[e.girderRest.user&&!e.readonly?r("v-icon",{staticClass:"home-button mr-3",attrs:{color:"accent",disabled:e.location._id===e.girderRest.user._id},on:{click:function(t){e.$emit("crumbclick",e.girderRest.user)}}},[e._v(e._s(e.$vuetify.icons.userHome))]):e._e(),r("v-breadcrumbs",{staticClass:"font-weight-bold pa-0",attrs:{items:e.breadcrumb},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item;return[r("v-breadcrumbs-item",{attrs:{disabled:e.readonly||e.breadcrumb.indexOf(a)==e.breadcrumb.length-1},nativeOn:{click:function(t){e.$emit("crumbclick",a)}}},[-1!==["folder","user","collection"].indexOf(a.type)?[e._v(e._s(a.name))]:"users"===a.type?[r("v-icon",{staticClass:"mdi-18px"},[e._v(e._s(e.$vuetify.icons.user))])]:"collections"===a.type?[r("v-icon",{staticClass:"mdi-18px"},[e._v(e._s(e.$vuetify.icons.collection))])]:"root"===a.type?[r("v-icon",{staticClass:"mdi-18px"},[e._v(e._s(e.$vuetify.icons.globe))])]:r("span",{staticClass:"accent--text"},[e._v(e._s(a))])],2)]}}])},[r("span",{staticClass:"subheading font-weight-bold",attrs:{slot:"divider",disabled:e.readonly},slot:"divider"},[e._v("/")])])],1)},X=[],Z=r("c93e"),ee=(r("ac6a"),r("7f7f"),r("8afe")),te={methods:{formatSize:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.base,n=void 0===a?1024:a,i=r.unit,s=void 0===i?"B":i;if(e<n)return"".concat(e," ").concat(s);var o=e;for(t=0;o>=n&&t<4;t+=1)o/=n;return"".concat(o.toFixed(2),"  ").concat(["","K","M","G","T"][t]).concat(s)}}},re={methods:{progressPercent:function(e){return e.total?Math.round(100*(e.current||0)/e.total):0}}},ae=r("fcf4"),ne={theme:{primary:ae["a"].lightBlue.darken1,secondary:ae["a"].blueGrey,accent:ae["a"].lightBlue.darken1,error:ae["a"].red,info:ae["a"].lightBlue.lighten1},iconfont:"mdi",icons:{alert:"mdi-alert-circle",bitbucket:"mdi-bitbucket",box_com:"mdi-package",chevron:"mdi-chevron-right",circle:"mdi-checkbox-blank-circle",collection:"mdi-file-tree",edit:"mdi-pencil",file:"mdi-file",fileNew:"mdi-file-plus",fileUpload:"mdi-file-upload",folder:"mdi-folder",folderNew:"mdi-folder-plus",github:"mdi-github-circle",globe:"mdi-earth",globus:"mdi-earth",google:"mdi-google",group:"mdi-account-multiple",item:"mdi-file",linkedin:"mdi-linkedin",lock:"mdi-lock",login:"mdi-login",logout:"mdi-logout",more:"mdi-dots-horizontal",otp:"mdi-shield-key",preview:"mdi-file-find",search:"mdi-magnify",settings:"mdi-tune",user:"mdi-account",userHome:"mdi-home-account"}},ie=(r("f751"),r("c665")),se=r("dc0a"),oe=r("aa9a"),le=r("d328"),ce=r("11d9"),ue=r("1083"),de=r("4328"),pe=r("9393"),he=(r("ffc1"),r("bc3a")),fe=r.n(he),me=function(){function e(t){Object(ie["a"])(this,e),Object.assign(this,t,{etags:{},offset:0,partNumber:1})}return Object(oe["a"])(e,[{key:"_finalizeMultipartXml",value:function(){var e=document.implementation.createDocument(null,null,null),t=e.createElement("CompleteMultipartUpload");return Object.entries(this.etags).forEach(function(r){var a=Object(pe["a"])(r,2),n=a[0],i=a[1],s=e.createElement("Part"),o=e.createElement("PartNumber"),l=e.createElement("ETag");o.appendChild(e.createTextNode(n)),l.appendChild(e.createTextNode(i)),s.appendChild(o),s.appendChild(l),t.appendChild(s)}),t.outerHTML}},{key:"_multiChunkUpload",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.upload.s3.request,r=t.headers,a=t.method,n=t.url,e.next=3,fe.a.request({data:null,headers:r,method:a,url:n});case 3:return i=e.sent,s=(new DOMParser).parseFromString(i.data,"text/xml"),this.upload.s3.uploadId=s.querySelector("InitiateMultipartUploadResult > UploadId").textContent,e.abrupt("return",this._sendChunks());case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_sendChunks",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n,i,s,o,l,c,u,d,p=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=function(e){return p.progress({current:p.offset+e.loaded,total:p.file.size,indeterminate:!e.lengthComputable})};case 1:if(!(this.offset<this.file.size)){e.next=16;break}return r=this.file.slice(this.offset,this.offset+this.upload.s3.chunkLength),e.next=5,this.$rest.post("file/chunk",Object(de["stringify"])({chunk:JSON.stringify({contentLength:r.size,partNumber:this.partNumber,s3UploadId:this.upload.s3.uploadId}),offset:0,uploadId:this.upload._id}));case 5:return a=e.sent.data.s3.request,n=a.method,i=a.url,e.next=10,fe.a.request({data:r,method:n,url:i,onUploadProgress:t});case 10:s=e.sent,this.etags[this.partNumber]=s.headers.etag,this.partNumber+=1,this.offset+=r.size,e.next=1;break;case 16:return this.progress({indeterminate:!0}),e.next=19,this.$rest.post("file/completion",Object(de["stringify"])({uploadId:this.upload._id}));case 19:return o=e.sent,l=o.data.s3FinalizeRequest,c=l.headers,u=l.method,d=l.url,e.next=23,fe.a.request({data:this._finalizeMultipartXml(),headers:c,method:u,url:d});case 23:return e.abrupt("return",o.data);case 24:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.upload.s3.chunked){e.next=2;break}return e.abrupt("return",this._multiChunkUpload());case 2:return t=this.upload.s3.request,r=t.headers,a=t.method,n=t.url,e.next=5,fe.a.request({data:this.file,headers:r,method:a,url:n,onUploadProgress:function(e){return i.progress({current:e.loaded,total:i.file.size,indeterminate:!e.lengthComputable})}});case 5:return this.progress({indeterminate:!0}),e.next=8,this.$rest.post("file/completion",Object(de["stringify"])({uploadId:this.upload._id}));case 8:return e.abrupt("return",e.sent.data);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resume",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.upload.s3.chunked){e.next=2;break}return e.abrupt("return",this._sendChunks());case 2:return e.next=4,this.$rest.get("file/offset?uploadId=".concat(this.upload._id));case 4:return this.upload.s3.request=e.sent.data,e.abrupt("return",this.start());case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),ve=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.$rest,n=r.parent,i=r.progress,s=void 0===i?function(){return null}:i;Object(ie["a"])(this,e),Object.assign(this,{$rest:a,file:t,parent:n,progress:s})}return Object(oe["a"])(e,[{key:"start",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("not implemented");case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resume",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.start());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"beforeUpload",value:function(){}},{key:"afterUpload",value:function(){}},{key:"onError",value:function(e){}}]),e}(),ge=67108864,be={s3:me},ye=function(e){function t(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.$rest,i=a.parent,s=a.progress,o=void 0===s?function(){return null}:s,l=a.params,c=void 0===l?{}:l,u=a.chunkLen,d=void 0===u?ge:u;return Object(ie["a"])(this,t),r=Object(le["a"])(this,Object(ce["a"])(t).call(this,e,{$rest:n,parent:i,progress:o})),Object.assign(Object(ue["a"])(Object(ue["a"])(r)),{params:c,chunkLen:d,upload:null,offset:0,behavior:null}),r}return Object(oe["a"])(t,[{key:"_sendChunks",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=function(e){return i.progress({indeterminate:!e.lengthComputable,current:i.offset+e.loaded,size:i.file.size})};case 1:if(!(this.offset<this.file.size)){e.next=11;break}return r=Math.min(this.offset+this.chunkLen,this.file.size),a=this.file.slice(this.offset,r),n="file/chunk?offset=".concat(this.offset,"&uploadId=").concat(this.upload._id),e.next=7,this.$rest.post(n,a,{onUploadProgress:t,headers:{"Content-Type":"application/octet-stream"}});case 7:this.upload=e.sent.data,this.offset=r,e.next=1;break;case 11:return e.abrupt("return",this.upload);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$rest.post("/file",Object(de["stringify"])(Object(Z["a"])({parentType:this.parent._modelType,parentId:this.parent._id,name:this.file.name,size:this.file.size,mimeType:this.file.type},this.params)));case 2:if(this.upload=e.sent.data,!this.upload.behavior||!be[this.upload.behavior]){e.next=6;break}return this.behavior=new be[this.upload.behavior](this),e.abrupt("return",this.behavior.start());case 6:return e.abrupt("return",this._sendChunks());case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resume",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.upload){e.next=2;break}return e.abrupt("return",this.start());case 2:if(this.progress({indeterminate:!0}),!this.behavior){e.next=5;break}return e.abrupt("return",this.behavior.resume());case 5:return e.next=7,this.$rest.get("file/offset?uploadId=".concat(this.upload._id));case 7:return this.offset=e.sent.data.offset,e.abrupt("return",this._sendChunks());case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),Object(se["a"])(t,e),t}(ve),xe=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;return Object(ie["a"])(this,t),e=Object(le["a"])(this,Object(ce["a"])(t).call(this,{data:function(){return{flag:!1}}})),e.count=0,e.delay=r,e.timeout=null,e}return Object(oe["a"])(t,[{key:"inc",value:function(){this.count+=1,this.count>0&&this._toggleFlag(!0)}},{key:"dec",value:function(){this.count=Math.max(0,this.count-1),0===this.count&&this._toggleFlag(!1)}},{key:"_toggleFlag",value:function(e){var t=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.flag=e},this.delay)}}]),Object(se["a"])(t,e),t}(a["a"]);function we(e){return e._modelType||e.type}function ke(e){var t=we(e);return["collections","users","root"].indexOf(t)>=0}function _e(e){var t=we(e);switch(t){case"collections":return"collection";case"users":return"user";default:return""}}function Ce(e){return function(t){return!!t&&(ke(t)?e:!!t._id)}}var je={props:{location:{type:Object,required:!0,validator:Ce(!0)},readonly:{type:Boolean,default:!1},append:{type:Array,default:function(){return[]}},rootLocationDisabled:{type:Boolean,default:!1}},inject:["girderRest"],data:function(){return{loading:!1}},computed:{breadcrumb:function(){var e=this.append;return Object(ee["a"])(this.pathBreadcrumb).concat(Object(ee["a"])(e))}},asyncComputed:{pathBreadcrumb:{default:[],get:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n,i,s,o,l,c,u,d,p,h,f,m=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,t=[],r=this.rootLocationDisabled,a=this.girderRest,n=this.location,i=a.user,s=we(n),o=n.name,l=n._id,"folder"!==s){e.next=23;break}if(!o){e.next=11;break}t.unshift(this.extractCrumbData(n)),e.next=16;break;case 11:return e.next=13,this.girderRest.get("folder/".concat(l));case 13:c=e.sent,u=c.data,t.unshift(this.extractCrumbData(u));case 16:return e.next=18,this.girderRest.get("folder/".concat(l,"/rootpath"));case 18:d=e.sent,p=d.data,p.reverse().forEach(function(e){t.unshift(m.extractCrumbData(e.object))}),e.next=29;break;case 23:if("user"!==s&&"collection"!==s){e.next=29;break}return e.next=26,this.girderRest.get("".concat(s,"/").concat(l));case 26:h=e.sent,f=h.data,t.unshift(this.extractCrumbData(f));case 29:return r||(("users"===s||i&&t.length&&"user"===t[0].type)&&t.unshift({type:"users"}),("collections"===s||t.length&&"collection"===t[0].type)&&t.unshift({type:"collections"}),t.unshift({type:"root"})),this.loading=!1,e.abrupt("return",t);case 32:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},created:function(){if(!Ce(!this.rootLocationDisabled)(this.location))throw new Error("root location cannot be used when root-location-disabled is true")},methods:{extractCrumbData:function(e){return Object(Z["a"])({},e,{type:e.type?e.type:e._modelType,name:"user"!==e._modelType?e.name:e.login})}}},Re=je,Oe=(r("28e0"),r("2bc5")),Te=r("f625"),Ve=Object(g["a"])(Re,Y,X,!1,null,null,null),$e=Ve.exports;y()(Ve,{VBreadcrumbs:Oe["a"],VBreadcrumbsItem:Te["a"],VIcon:k["a"]});var Pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("girder-data-table",{staticClass:"girder-file-browser",attrs:{draggable:e.draggable,rows:e.rows,pagination:e.pagination,"total-items":e.totalItems,loading:e.loading,selectable:e.internalSelectable},on:{"update:pagination":function(t){e.pagination=t},rowclick:e.rowClick,drag:function(t){e.$emit("drag",t)},dragstart:function(t){e.$emit("dragstart",t)},dragend:function(t){e.$emit("dragend",t)},drop:function(t){e.$emit("drop",t)}},scopedSlots:e._u([{key:"header",fn:function(t){return[r("tr",{staticClass:"secondary lighten-5"},[e.internalSelectable?r("th",{staticClass:"pl-3 pr-0",attrs:{width:"1%"}},[r("v-checkbox",{staticClass:"secondary--text text--darken-1 pr-2",attrs:{color:"accent","hide-details":"","input-value":t.all,indeterminate:e.selected.length>0&&!t.all},nativeOn:{click:function(t){return e.toggleAll(t)}}})],1):e._e(),r("th",{staticClass:"pl-3",attrs:{colspan:"100",width:"99%"}},[r("v-layout",{attrs:{row:""}},[e._t("breadcrumb",null,null,{location:e.location,changeLocation:e.changeLocation,rootLocationDisabled:e.rootLocationDisabled}),r("v-spacer"),e._t("headerwidget",null,null,{location:e.location,changeLocation:e.changeLocation,rootLocationDisabled:e.rootLocationDisabled})],2)],1)])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})},Ee=[],Le=r("a322"),Se=(r("456d"),r("8615"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-data-table",{staticClass:"girder-data-table",attrs:{"select-all":"","headers-length":4,value:e.value,pagination:e.pagination,items:e.rows,"total-items":e.totalItems,loading:!!e.loading&&"accent","item-key":"_id"},on:{input:function(t){e.$emit("input",t)},"update:pagination":function(t){e.$emit("update:pagination",t)}},scopedSlots:e._u([{key:"headers",fn:function(t){return[e._t("header",null,{all:t.all,indeterminate:t.indeterminate,headers:t.headers})]}},{key:"items",fn:function(t){return[r("tr",{key:t.index,staticClass:"itemRow",class:e.getRowClass(t.item),attrs:{draggable:e.draggable,active:t.selected},on:{click:function(r){e.handleRowSelect(r,t)},drag:function(r){e.$emit("drag",{items:[t],event:r})},dragstart:function(r){e.$emit("dragstart",{items:[t],event:r})},dragend:function(r){e.$emit("dragend",{items:[t],event:r})},drop:function(r){e.$emit("drop",{items:[t],event:r})}}},[e.selectable?r("td",{staticClass:"pl-3 pr-0"},[r("v-checkbox",{staticClass:"secondary--text text--darken-1 pr-2",attrs:{"input-value":t.selected,accent:"","hide-details":""}})],1):e._e(),r("td",{staticClass:"pl-3",attrs:{colspan:"2"}},[r("span",{staticClass:"text-container secondary--text text--darken-3 nobreak",class:e.getItemClass(t.item),on:{click:function(r){r.stopPropagation(),e.$emit("rowclick",t.item)}}},[r("v-icon",{staticClass:"pr-2",attrs:{color:t.selected?"accent":""}},[e._v(e._s(e.$vuetify.icons[t.item.icon]))]),e._v(e._s(t.item.name))],1)]),r("td",{staticClass:"text-xs-right secondary--text text--darken-3 nobreak"},[e._v(e._s(t.item.size))])])]}}])},[r("template",{slot:"no-data"},[r("td",{staticClass:"text-xs-center",attrs:{colspan:"2",width:"100%"}},[e._v("No Data Available")])]),r("template",{slot:"no-results"},[r("td",{staticClass:"text-xs-center",attrs:{colspan:"2",width:"100%"}},[e._v("No Data Available")])])],2)}),Fe=[],Ue=(r("7514"),r("55dd"),r("c5f6"),{props:{draggable:{type:Boolean,default:!1},loading:{type:Boolean,required:!0},pagination:{type:Object,required:!0},rows:{type:Array,required:!0},selectable:{type:Boolean,required:!0},totalItems:{type:Number,required:!0},value:{type:Array,default:function(){return[]}}},data:function(){return{lastCheckBoxIdx:null}},methods:{getLocationType:we,isRootLocation:ke,handleRowSelect:function(e,t){var r=this,a=e.shiftKey;if(this.selectable){if(t.selected=!t.selected,a&&null!==this.lastCheckBoxIdx){var n=[this.lastCheckBoxIdx,t.index+1].sort(),i=Object(pe["a"])(n,2),s=i[0],o=i[1],l=this.rows.slice(s,o).filter(function(e){return void 0===r.value.find(function(t){return t._id===e._id})});this.$emit("input",l.concat(this.value))}this.lastCheckBoxIdx=t.index}else this.$emit("rowclick",t.item)},getRowClass:function(e){var t=!this.selectable&&"folder"===we(e)||ke(e)||"user"===we(e);return{"select-cursor":t}},getItemClass:function(e){var t="item"!==we(e);return{"select-cursor":t}}}}),De=Ue,Ie=(r("8d4c"),r("ac7c")),Me=r("8fea"),Ne=Object(g["a"])(De,Se,Fe,!1,null,null,null),Be=Ne.exports;y()(Ne,{VCheckbox:Ie["a"],VDataTable:Me["a"],VIcon:k["a"]});var ze="folder",Ae="item",qe={components:{GirderDataTable:Be},mixins:[te],inject:["girderRest"],props:{draggable:{type:Boolean,default:!1},location:{type:Object,required:!0,validator:Ce(!0)},selectable:{type:Boolean,default:!1},noRootLocation:{type:Boolean,default:!1},upload:{type:Boolean,default:!1},rootLocationDisabled:{type:Boolean,default:!1}},data:function(){return{pagination:{rowsPerPage:10,page:1},internalRefreshCounter:0,rows:[],rowsLoading:!1,selected:[]}},computed:{loading:function(){return this.rowsLoading},totalItems:function(){return Object.values(this.counts).reduce(function(e,t){return e+t},0)},internalSelectable:function(){return this.selectable&&this.location&&!ke(this.location)}},asyncComputed:{counts:{default:{nFolders:0,nItems:0,nUsers:0,nCollections:0},get:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n,i,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t={nFolders:0,nItems:0,nUsers:0,nCollections:0},r=we(this.location),a=this.location._id,-1===["folder","user","collection"].indexOf(r)){e.next=11;break}return e.next=6,this.girderRest.get("".concat(r,"/").concat(a,"/details"));case 6:return n=e.sent,i=n.data,e.abrupt("return",Object(Z["a"])({},t,{nFolders:i.nFolders||0,nItems:i.nItems||0}));case 11:if("users"!==r&&"collections"!==r){e.next=19;break}return e.next=14,this.girderRest.get("".concat(this.getResourceType(r),"/details"));case 14:return s=e.sent,o=s.data,e.abrupt("return",Object(Z["a"])({},t,Object(Le["a"])({},Object.keys(o)[0],Object.values(o)[0])));case 19:if("root"!==r){e.next=21;break}return e.abrupt("return",Object(Z["a"])({},t,{nUsers:1,nCollections:1}));case 21:return e.abrupt("return",t);case 22:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),watch:function(){return[this.internalRefreshCounter,this.location,this.girderRest.user]}}},watch:{location:function(e){Ce(!this.rootLocationDisabled)(e)&&(this.pagination.page=1)},selected:function(e){this.$emit("selection-changed",e)},counts:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchPaginatedRows();case 2:this.rows=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),pagination:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchPaginatedRows();case 2:this.rows=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},created:function(){if(!Ce(!this.rootLocationDisabled)(this.location))throw new Error("root location cannot be used when root-location-disabled is true")},methods:{toggleAll:function(){this.selected.length===this.rows.length?this.selected=[]:this.selected=this.rows.slice()},rowClick:function(e){this.$emit("rowclick",e),"item"!==we(e)&&this.changeLocation(e)},changeLocation:function(e){var t=this.location,r=we(e),a=we(t);t._id===e._id&&a===r||this.$emit("update:location",e)},refresh:function(){this.internalRefreshCounter+=1},fetchPaginatedRows:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.location,r=this.counts,!r.nFolders&&!r.nItems){e.next=3;break}return e.abrupt("return",this.fetchPaginatedFolderRows());case 3:if(a=we(t),"users"!==a&&"collections"!==a){e.next=10;break}if(!r.nUsers&&!r.nCollections){e.next=8;break}return n=_e(t),e.abrupt("return",this.fetchPaginatedCollectionOrUserRows(n));case 8:e.next=12;break;case 10:if("root"!==a){e.next=12;break}return e.abrupt("return",this.generateRootRows());case 12:return e.abrupt("return",[]);case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),fetchPaginatedFolderRows:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n,i,s,o,l,c,u,d,p,h,f=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.rowsLoading=!0,r=this.counts,a=this.location,n=this.pagination,i=n.page,s=n.rowsPerPage,o={parentType:a._modelType,parentId:a._id,limit:s>=0?s:null,offset:(i-1)*s},l=r.nFolders>o.offset?s-(r.nFolders-o.offset):s,c=o.offset-r.nFolders,u={folderId:a._id,limit:s>=0?l:null,offset:c>0?c:0},d=[],d.push(this.girderRest.get(ze,{params:o})),(u.limit>0||null===u.limit)&&"folder"===a._modelType&&d.push(this.girderRest.get(Ae,{params:u})),e.next=12,Promise.all(d);case 12:return e.t0=function(e){return e.data},p=e.sent.map(e.t0),h=(t=[].concat).apply.apply(t,Object(ee["a"])(p)).map(function(e){return Object(Z["a"])({},e,{size:e.size?f.formatSize(e.size):"",icon:e._modelType in f.$vuetify.icons?e._modelType:"file"})}),this.rowsLoading=!1,e.abrupt("return",h);case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),fetchPaginatedCollectionOrUserRows:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var r,a,n,i,s,o,l=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.rowsLoading=!0,r=this.pagination,a=r.page,n=r.rowsPerPage,e.next=4,this.girderRest.get(t,{params:{limit:n>=0?n:null,offset:(a-1)*n}});case 4:return i=e.sent,s=i.data,o=s.map(function(e){return Object(Z["a"])({},e,{name:"user"===e._modelType?"".concat(e.firstName," ").concat(e.lastName):e.name,size:e.size?l.formatSize(e.size):"",icon:e._modelType})}),this.rowsLoading=!1,e.abrupt("return",o);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),generateRootRows:function(){var e=[{_modelType:"collections",name:"Collections",icon:"collection"}];return this.girderRest.user&&e.push({_modelType:"users",name:"Users",icon:"user"}),e},getResourceType:function(e){switch(e){case"collections":return"collection";case"users":return"user";default:return""}}}},Ge=qe,Je=Object(g["a"])(Ge,Pe,Ee,!1,null,null,null),We=Je.exports;y()(Je,{VCheckbox:Ie["a"],VLayout:P["a"],VSpacer:E["a"]});var Qe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"job-filter",attrs:{dark:"",color:"primary"}},[r("v-container",{staticClass:"py-2",attrs:{fluid:"","grid-list-lg":""}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{sm12:"","d-flex":""}},[r("h3",{staticClass:"subheading"},[e._v("Girder Worker Jobs")])])],1),r("v-layout",{attrs:{row:"","justify-center":""}},[r("v-flex",{attrs:{sm3:"","d-flex":""}},[r("v-select",{attrs:{label:"Job Type",items:e.jobTypeList,value:e.jobType,clearable:"",color:"white","menu-props":{"content-class":"girder-job-filter-form-menu"},dark:"",dense:""},on:{input:function(t){e.$emit("update:jobType",t||null)}}})],1),r("v-flex",{attrs:{sm3:"","d-flex":""}},[r("v-select",{attrs:{label:"Status",items:e.statusItemList,value:e.status,clearable:"",color:"white","menu-props":{"content-class":"girder-job-filter-form-menu"},dark:"",dense:""},on:{input:function(t){e.$emit("update:status",t||null)}}})],1)],1)],1)],1)},Ke=[],He={INACTIVE:{value:0,text:"Inactive",icon:"mdi-pause",color:"grey lighten-1"},QUEUED:{value:1,text:"Queued",icon:"mdi-dots-horizontal",color:"yellow darken-2",indeterminate:!0},RUNNING:{value:2,text:"Running",icon:"mdi-autorenew",color:"light-blue",spin:!0},SUCCESS:{value:3,text:"Success",icon:"mdi-check-circle",color:"green"},ERROR:{value:4,text:"Error",icon:"mdi-alert-circle",color:"red"},CANCELED:{value:5,text:"Canceled",icon:"mdi-close-circle",color:"grey darken-1"},WORKER_FETCHING_INPUT:{value:820,text:"Fetching input",icon:"mdi-cloud-download",color:"light-blue lighten-2",indeterminate:!0},WORKER_CONVERTING_INPUT:{value:821,text:"Converting input",icon:"mdi-shuffle",color:"lime",indeterminate:!0},WORKER_CONVERTING_OUTPUT:{value:822,text:"Converting output",icon:"mdi-shuffle",color:"lime",indeterminate:!0},WORKER_PUSHING_OUTPUT:{value:823,text:"Pushing output",icon:"mdi-cloud-upload",color:"light-blue lighten-2",indeterminate:!0},WORKER_CANCELING:{value:824,text:"Canceling",icon:"mdi-alert",color:"grey darken-1",indeterminate:!0}};function Ye(e){return Object.values(He).find(function(t){return t.value===e})}var Xe={props:{jobType:{type:[String,Object],default:null},jobTypeList:{type:Array,default:function(){return[]}},status:{type:[Number,Object],default:null},statusList:{type:Array,default:function(){return[]}}},data:function(){return{fromDateMenu:!1,toDateMenu:!1}},computed:{statusItemList:function(){return this.statusList.map(Ye).filter(function(e){return e&&e.text}).sort(function(e,t){return e.text>t.text?1:e.text<t.text?-1:0})}}},Ze=Xe,et=(r("4bc3"),r("0e8f")),tt=r("b56d"),rt=Object(g["a"])(Ze,Qe,Ke,!1,null,null,null),at=rt.exports;y()(rt,{VCard:q["a"],VContainer:w["a"],VFlex:et["a"],VLayout:P["a"],VSelect:tt["a"]});var nt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"girder-job-list"},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("filter-form",{attrs:{"from-date":e.jobFilter.fromDate,"to-date":e.jobFilter.toDate,status:e.jobFilter.status,"job-type":e.jobFilter.jobType,"status-list":e.typeAndStatusList.statuses,"job-type-list":e.typeAndStatusList.types},on:{"update:fromDate":function(t){e.$set(e.jobFilter,"fromDate",t)},"update:toDate":function(t){e.$set(e.jobFilter,"toDate",t)},"update:status":function(t){e.$set(e.jobFilter,"status",t)},"update:jobType":function(t){e.$set(e.jobFilter,"jobType",t)}}})],1)],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("job-table",{attrs:{jobs:e.jobs,pagination:e.pagination,"more-pages":e.morePages},on:{"update:pagination":function(t){e.pagination=t},"job-click":function(t,r){return e.$emit("job-click",t,r)}}})],1)],1)],1)},it=[],st=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-data-table",{attrs:{"item-key":"_id",headers:e.headers,items:e.items,"total-items":e.totalItems,pagination:e.pagination},on:{"update:pagination":function(t){e.$emit("update:pagination",t)}},scopedSlots:e._u([{key:"items",fn:function(t){return[r("tr",{on:{click:function(r){e.$emit("job-click",r,t.item)}}},[r("td",[e._v(e._s(t.item.title))]),r("td",{staticClass:"one-line"},[e._v(e._s(t.item.type))]),r("td",{staticClass:"one-line"},[e._v(e._s(t.item.updateString))]),r("td",{staticClass:"one-line status-line",attrs:{nowrap:"",title:t.item.statusText,width:"1%"}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{staticClass:"mr-3"},[r("v-progress-linear",{staticClass:"progress-bar",attrs:{color:t.item.statusColor,value:t.item.progressNumber,indeterminate:!!t.item.indeterminate,height:"10"}})],1),r("v-flex",[r("v-icon",{staticClass:"status-icon",class:{rotate:t.item.spin},attrs:{color:t.item.statusColor,size:20}},[e._v(e._s(t.item.statusIcon))])],1)],1)],1)])]}},{key:"pageText",fn:function(t){return[r("div",{staticClass:"v-datatable__actions__pagination"},[e._v(e._s(e.pageRange.first)+"-"+e._s(e.pageRange.last))])]}}])})],1)},ot=[],lt=r("c1df"),ct=r.n(lt),ut={props:{jobs:{type:Array,required:!0},pagination:{type:Object,required:!0},morePages:{type:Boolean,default:!0}},data:function(){return{headers:[{text:"Job Title",value:"title"},{text:"Type",value:"type"},{text:"Last Updated",value:"updated"},{text:"Status",value:"status"}]}},computed:{items:function(){return this.jobs.map(this.mapJobToRow)},totalItems:function(){var e=this.pageRange.last;return this.morePages&&(e+=1),e},pageRange:function(){var e=this.pagination.rowsPerPage*(this.pagination.page-1)+1,t=e+this.jobs.length-1;return{first:e,last:t}}},methods:{mapJobToRow:function(e){var t=Object.assign({text:"Unknown"},Ye(e.status));return Object.assign({statusText:t.text,statusColor:t.color,statusTextColor:t.textColor||"white",statusIcon:t.icon,updateString:ct()(e.updated).format("dddd, MMMM D, YYYY @ h:mm a"),progressNumber:this.progressAsNumber(e.progress),indeterminate:t.indeterminate,spin:t.spin},e)},progressAsNumber:function(e){return e?e.current/e.total*100:100}}},dt=ut,pt=(r("eea8"),r("8e36")),ht=Object(g["a"])(dt,st,ot,!1,null,"2d8c4f0c",null),ft=ht.exports;y()(ht,{VCard:q["a"],VDataTable:Me["a"],VFlex:et["a"],VIcon:k["a"],VLayout:P["a"],VProgressLinear:pt["a"]});var mt={inject:["girderRest","notificationBus"],components:{JobTable:ft,FilterForm:at},data:function(){return{jobFilter:{fromDate:null,toDate:null,status:null,jobType:null},pagination:{rowsPerPage:10,page:1,sortBy:"updated",descending:!0},morePages:!0,refresh:0}},watch:{jobFilter:{handler:function(){this.pagination.page=1},deep:!0}},asyncComputed:{jobs:{get:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.girderRest.user,this.refresh,t=this.pagination,r={limit:t.rowsPerPage+1,offset:t.rowsPerPage*(t.page-1)},t.sortBy&&(r.sort=t.sortBy,r.sortdir=t.descending?-1:1),null!==this.jobFilter.status&&(r.statuses=JSON.stringify([this.jobFilter.status])),null!==this.jobFilter.jobType&&(r.types=JSON.stringify([this.jobFilter.jobType])),e.next=9,this.girderRest.get("job?".concat(Object(de["stringify"])(r)));case 9:return a=e.sent,a.data.length<r.limit?this.morePages=!1:this.morePages=!0,e.abrupt("return",a.data.slice(0,t.rowsPerPage));case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),default:function(){return[]}},typeAndStatusList:{get:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.girderRest.user,e.next=3,this.girderRest.get("job/typeandstatus");case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),default:function(){return{statuses:[],types:[]}}}},mounted:function(){var e=this;this.refreshJobFunc=function(){e.refreshJobList()},this.notificationBus.$on("message:job_status",this.refreshJobFunc),this.notificationBus.$on("message:job_created",this.refreshJobFunc)},beforeDestroy:function(){this.notificationBus.$off("message:job_status",this.refreshJobFunc),this.notificationBus.$off("message:job_created",this.refreshJobFunc)},methods:{refreshJobList:function(){this.refresh+=1}}},vt=mt,gt=Object(g["a"])(vt,nt,it,!1,null,null,null),bt=gt.exports;y()(gt,{VFlex:et["a"],VLayout:P["a"]});var yt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"g-md-viewer",domProps:{innerHTML:e._s(e.markdown)}})},xt=[],wt=r("d4cd"),kt=r.n(wt),_t={props:{text:{default:"",type:String}},computed:{markdown:function(){return kt()({linkify:!0}).render(this.text)}}},Ct=_t,jt=(r("23cb"),Object(g["a"])(Ct,yt,xt,!1,null,null,null)),Rt=jt.exports,Ot=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"girder-markdown-editor"},[r("v-tabs",{staticClass:"md-tab",model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("v-tab",{key:"edit"},[e._v("Edit")]),r("v-tab-item",[r("v-textarea",{attrs:{"hide-details":"",box:"","single-line":"",label:e.label,placeholder:e.placeholder},model:{value:e.text_,callback:function(t){e.text_=t},expression:"text_"}})],1),r("v-tab",{key:"preview"},[e._v("Preview")]),r("v-tab-item",{staticClass:"md-preview pa-2 grey lighten-3"},[r("girder-markdown",{attrs:{text:e.text_}})],1)],1),r("v-toolbar",{attrs:{dark:"",color:"secondary darken-2"}},[r("span",{staticClass:"hidden-xs-only"},[e._v("Supports"),r("a",{attrs:{href:"https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet"}},[e._v(" Markdown")])]),r("v-spacer"),r("v-toolbar-items",[r("v-btn",{class:{active:0===e.activeTab},attrs:{flat:""},on:{click:function(t){e.activeTab=0}}},[r("v-layout",{attrs:{"align-center":"","justify-content":"",column:""}},[r("v-icon",{staticClass:"mdi-24px"},[e._v(e._s(e.$vuetify.icons.edit))]),r("span",{staticClass:"caption text-capitalize"},[e._v("Write")])],1)],1),r("v-btn",{class:{active:1===e.activeTab},attrs:{flat:""},on:{click:function(t){e.activeTab=1}}},[r("v-layout",{attrs:{"align-center":"","justify-content":"",column:""}},[r("v-icon",{staticClass:"mdi-24px"},[e._v(e._s(e.$vuetify.icons.preview))]),r("span",{staticClass:"caption text-capitalize"},[e._v("Preview")])],1)],1)],1)],1)],1)},Tt=[],Vt={components:{GirderMarkdown:Rt},model:{prop:"text",event:"changed"},props:{placeholder:{default:null,type:String},text:{default:"",type:String},label:{type:String,default:""}},data:function(){return{activeTab:0,text_:this.text}},watch:{text:function(){this.text_=this.text},text_:function(){this.$emit("changed",this.text_)}}},$t=Vt,Pt=(r("0e3a"),r("a844")),Et=r("71d9"),Lt=r("2a7f"),St=Object(g["a"])($t,Ot,Tt,!1,null,null,null),Ft=St.exports;y()(St,{VBtn:x["a"],VIcon:k["a"],VLayout:P["a"],VSpacer:E["a"],VTab:G["a"],VTabItem:J["a"],VTabs:W["a"],VTextarea:Pt["a"],VToolbar:Et["a"],VToolbarItems:Lt["a"]});var Ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{staticClass:"girder-searchbar",attrs:{row:"","align-center":""}},[r("v-icon",{staticClass:"mdi-24px",attrs:{color:"white"}},[e._v(e._s(e.$vuetify.icons.search))]),r("v-menu",{staticClass:"grow mx-3",attrs:{"offset-y":"","content-class":"girder-searchbar-menu","open-on-click":!1,value:e.searchText,"nudge-bottom":6,transition:"slide-y-transition"}},[r("v-text-field",{attrs:{slot:"activator",light:"",solo:"","hide-details":"",clearable:""},slot:"activator",model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),r("v-list",[e._l(e.quickResults,function(t){return r("v-list-tile",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],key:t._id,on:{click:function(r){e.$emit("select",t)}}},[r("v-list-tile-action",[r("v-icon",[e._v(e._s(e.$vuetify.icons[t._modelType]))])],1),r("v-list-tile-content",[r("v-list-tile-title",[e._v(e._s(t.name||e.formatUsername(t)))])],1)],1)}),r("v-list-tile",{directives:[{name:"show",rawName:"v-show",value:e.searchText&&0===e.quickResults.length&&!e.loading,expression:"searchText && quickResults.length === 0 && !loading"}]},[r("v-list-tile-action",[r("v-icon",[e._v(e._s(e.$vuetify.icons.alert))])],1),r("v-list-tile-content",[r("v-list-tile-title",[e._v("No results found for query '"+e._s(e.searchText)+"'")]),r("v-list-tile-sub-title",[e._v("Modify search parameters or refine your query.")])],1)],1),r("v-list-tile",{directives:[{name:"show",rawName:"v-show",value:!e.loading&&e.showMore&&e.searchResults.length>e.maxQuickResults,expression:"!loading && showMore && searchResults.length > maxQuickResults"}],on:{click:function(t){e.$emit("moreresults",e.searchParams)}}},[r("v-list-tile-action",[r("v-icon",[e._v(e._s(e.$vuetify.icons.more))])],1),r("v-list-tile-content",[r("v-list-tile-title",[e._v("More")])],1)],1),e._l(e.maxQuickResults+(e.showMore?1:0),function(t){return r("v-list-tile",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],key:"skeleton-"+t},[r("v-list-tile-action",[r("v-icon",{staticClass:"grey--text text--lighten-1"},[e._v(e._s(e.$vuetify.icons.circle))])],1),r("v-list-tile-content",[r("v-list-tile-title",{staticClass:"skeleton skeleton--text mb-2",style:{width:60+t%3*4+"%",height:"10px"}}),r("v-list-tile-sub-title",{staticClass:"skeleton skeleton--text",style:{width:45-t%2*4+"%",height:"6px"}})],1)],1)})],2)],1),r("v-menu",{attrs:{"offset-y":"",left:"","content-class":"girder-search-arrow-menu","close-on-content-click":!1},model:{value:e.searchOptionsMenu,callback:function(t){e.searchOptionsMenu=t},expression:"searchOptionsMenu"}},[r("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[r("v-icon",{staticClass:"mdi-24px"},[e._v(e._s(e.$vuetify.icons.settings))])],1),r("v-card",[r("v-card-actions",[r("v-layout",{attrs:{column:""}},[r("v-radio-group",{staticClass:"my-2",attrs:{"hide-details":""},model:{value:e.searchMode,callback:function(t){e.searchMode=t},expression:"searchMode"}},[r("v-radio",{key:"text",staticClass:"mb-1",attrs:{label:"Text Search",value:"text"}}),r("v-radio",{key:"prefix",attrs:{label:"Prefix Search",value:"prefix"}})],1),r("v-divider"),r("v-checkbox",{staticClass:"mt-2",attrs:{"hide-details":"",label:"User",value:"user"},model:{value:e.searchTypes,callback:function(t){e.searchTypes=t},expression:"searchTypes"}}),r("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Folder",value:"folder"},model:{value:e.searchTypes,callback:function(t){e.searchTypes=t},expression:"searchTypes"}}),r("v-checkbox",{staticClass:"mt-1 mb-1",attrs:{"hide-details":"",label:"Item",value:"item"},model:{value:e.searchTypes,callback:function(t){e.searchTypes=t},expression:"searchTypes"}})],1)],1)],1)],1)],1)},Dt=[],It={props:{maxQuickResults:{type:Number,default:6},showMore:{type:Boolean,default:!1}},inject:["girderRest"],data:function(){return{searchText:"",searchMode:"prefix",searchTypes:["user","folder","item"],searchOptionsMenu:!1}},computed:{loading:function(){return this.counter.flag},quickResults:function(){return this.searchResults.slice(0,this.maxQuickResults)},searchParams:function(){return{q:this.searchText,mode:this.searchMode,types:JSON.stringify(this.searchTypes),limit:this.maxQuickResults+1}}},asyncComputed:{searchResults:{default:[],get:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],this.counter.inc(),e.prev=2,!this.searchText){e.next=9;break}return e.next=6,this.girderRest.get("resource/search",{params:this.searchParams});case 6:a=e.sent,n=a.data,t=(r=[]).concat.apply(r,Object(ee["a"])(this.searchTypes.map(function(e){return n[e]})));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),this.$emit("error",e.t0.message||"Unknown error during search");case 14:return this.counter.dec(),e.abrupt("return",t);case 16:case"end":return e.stop()}},e,this,[[2,11]])}));return function(){return e.apply(this,arguments)}}()}},beforeCreate:function(){this.counter=new xe},methods:{formatUsername:function(e){return"".concat(e.firstName," ").concat(e.lastName," (").concat(e.login,")")}}},Mt=It,Nt=(r("e589"),r("10e2"),r("99d9")),Bt=r("8860"),zt=r("ba95"),At=r("40fe"),qt=r("5d23"),Gt=r("e449"),Jt=r("67b6"),Wt=r("43a6"),Qt=Object(g["a"])(Mt,Ut,Dt,!1,null,"5784c118",null),Kt=Qt.exports;y()(Qt,{VBtn:x["a"],VCard:q["a"],VCardActions:Nt["a"],VCheckbox:Ie["a"],VDivider:V["a"],VIcon:k["a"],VLayout:P["a"],VList:Bt["a"],VListTile:zt["a"],VListTileAction:At["a"],VListTileContent:qt["a"],VListTileSubTitle:qt["b"],VListTileTitle:qt["c"],VMenu:Gt["a"],VRadio:Jt["a"],VRadioGroup:Wt["a"],VTextField:L["a"]});var Ht=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{attrs:{flat:"",height:"100%"}},[r("v-layout",{attrs:{column:"","fill-height":""}},[e._t("header",[r("v-card-title",{attrs:{"primary-title":""}},[r("div",[r("div",{staticClass:"headline"},[e._v("Upload to "),r("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.dest.name))])]),r("div",{staticClass:"grey--text"},[e._v(e._s(e.statusMessage))])])])]),e.uploading?r("v-progress-linear",{attrs:{value:e.totalProgressPercent,height:"20"}}):e._e(),r("v-card-actions",{directives:[{name:"show",rawName:"v-show",value:e.files.length&&!e.errorMessage&&!e.uploading,expression:"files.length && !errorMessage && !uploading"}]},[r("v-btn",{attrs:{flat:""},on:{click:function(t){e.files=[]}}},[e._v("Clear all")]),r("v-btn",{attrs:{flat:"",color:"primary"},on:{click:e.start}},[e._v("Start upload")])],1),e._t("dropzone",[e.files.length?e._e():r("dropzone",{attrs:{message:e.dropzoneMessage,multiple:e.multiple,accept:e.accept},on:{change:e.filesChanged}})]),e.errorMessage?r("div",[r("v-alert",{attrs:{value:!0,dark:"",type:"error"}},[e._v(e._s(e.errorMessage)),e.uploading?e._e():r("v-btn",{attrs:{dark:"",outline:""},on:{click:e.start}},[e._v("Resume upload")])],1)],1):e._e(),e._t("files",[r("file-upload-list",{model:{value:e.files,callback:function(t){e.files=t},expression:"files"}})])],2)],1)},Yt=[],Xt=r("6bde"),Zt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dropzone-wrapper",class:e.dropzoneClass,on:{dragenter:function(t){e.dropzoneClass="animate"},dragleave:function(t){e.dropzoneClass=null},drop:function(t){e.dropzoneClass=null}}},[r("v-layout",{staticClass:"dropzone-message",attrs:{column:"","justify-center":"","align-center":"","fill-height":""}},[r("v-icon",{attrs:{size:"50px"}},[e._v("$vuetify.icons.fileUpload")]),r("div",{staticClass:"title mt-3"},[e._v(e._s(e.message))])],1),r("input",{staticClass:"file-input",attrs:{type:"file",multiple:e.multiple,accept:e.accept},on:{change:function(t){e.$emit("change",Array.apply(void 0,t.target.files))}}})],1)},er=[],tr={props:{message:{type:String,required:!0},multiple:{type:Boolean,required:!0},accept:{type:String,default:null}},data:function(){return{dropzoneClass:null}}},rr=tr,ar=(r("67a5"),Object(g["a"])(rr,Zt,er,!1,null,"0d09c355",null)),nr=ar.exports;y()(ar,{VIcon:k["a"],VLayout:P["a"]});var ir=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-list",{directives:[{name:"show",rawName:"v-show",value:e.value.length,expression:"value.length"}],attrs:{dense:""}},e._l(e.value,function(t,a){return r("div",{key:t.file.name,staticClass:"file-tile",class:"status-"+t.status},[a>0?r("v-divider"):e._e(),r("v-list-tile",{attrs:{avatar:""}},[r("v-list-tile-avatar",["pending"===t.status?r("v-btn",{attrs:{icon:""},on:{click:function(t){e.$emit("input",e.splice(a))}}},[r("v-icon",[e._v("$vuetify.icons.close")])],1):e._e(),"uploading"===t.status?r("v-progress-circular",{attrs:{color:"primary",rotate:-90,value:e.progressPercent(t.progress),indeterminate:t.progress.indeterminate}}):e._e(),"done"===t.status?r("v-icon",{attrs:{color:"success",large:""}},[e._v("$vuetify.icons.complete")]):e._e(),"error"===t.status?r("v-icon",{attrs:{color:"error",large:""}},[e._v("$vuetify.icons.error")]):e._e()],1),r("v-list-tile-content",[r("v-list-tile-title",[e._v(e._s(t.file.name))]),r("v-list-tile-sub-title",[t.progress.current?r("span",[e._v(e._s(e.formatSize(t.progress.current))+" /")]):e._e(),r("span",[e._v(e._s(e.formatSize(t.file.size)))])])],1)],1)],1)}),0)},sr=[],or={mixins:[re,te],props:{value:{type:Array,required:!0}},methods:{splice:function(e){return Object(ee["a"])(this.value.slice(0,e)).concat(Object(ee["a"])(this.value.slice(e+1)))}}},lr=or,cr=(r("edaa"),r("c954")),ur=r("490a"),dr=Object(g["a"])(lr,ir,sr,!1,null,"93c61a4a",null),pr=dr.exports;y()(dr,{VBtn:x["a"],VDivider:V["a"],VIcon:k["a"],VList:Bt["a"],VListTile:zt["a"],VListTileAvatar:cr["a"],VListTileContent:qt["a"],VListTileSubTitle:qt["b"],VListTileTitle:qt["c"],VProgressCircular:ur["a"]});var hr={components:{Dropzone:nr,FileUploadList:pr},mixins:[re,te],inject:["girderRest"],props:{dest:{required:!0,type:Object},multiple:{default:!0,type:Boolean},preUpload:{default:function(){},type:Function},postUpload:{default:function(){},type:Function},uploadCls:{default:ye,type:Function},accept:{default:null,type:String}},data:function(){return{dragover:!1,errorMessage:null,files:[],uploading:!1}},computed:{dropzoneMessage:function(){return this.multiple?"Drag files here or click to select them":"Drag a file here or click to select one"},statusMessage:function(){return this.uploading?"".concat(this.formatSize(this.totalProgress)," / ").concat(this.formatSize(this.totalSize)," ")+"(".concat(this.totalProgressPercent,"%)"):"".concat(this.files.length," selected (").concat(this.formatSize(this.totalSize)," total)")},totalProgress:function(){return this.files.reduce(function(e,t){return e+t.progress.current},0)},totalSize:function(){return this.files.reduce(function(e,t){return e+t.file.size},0)},totalProgressPercent:function(){return this.progressPercent({current:this.totalProgress,total:this.totalSize})}},methods:{filesChanged:function(e){this.files=e.map(function(e){return{file:e,status:"pending",progress:{indeterminate:!1,current:0,size:e.size},upload:null,result:null}})},start:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=[],this.uploading=!0,this.errorMessage=null,e.next=5,this.preUpload();case 5:r=regeneratorRuntime.mark(function e(r){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=i.files[r],"done"!==a.status){e.next=5;break}t.push(a.result),e.next=38;break;case 5:if(n=function(e){Object.assign(a.progress,e)},a.status="uploading",a.progress.indeterminate=!0,e.prev=8,!a.upload){e.next=15;break}return e.next=12,a.upload.resume();case 12:a.result=e.sent,e.next=21;break;case 15:return a.upload=new i.uploadCls(a.file,{$rest:i.girderRest,parent:i.dest,progress:n}),e.next=18,a.upload.beforeUpload();case 18:return e.next=20,a.upload.start();case 20:a.result=e.sent;case 21:return e.next=23,a.upload.afterUpload();case 23:delete a.upload,t.push(a.result),a.status="done",a.progress.current=a.file.size,e.next=38;break;case 29:return e.prev=29,e.t0=e["catch"](8),e.next=33,a.upload.onError(e.t0);case 33:return e.t0.response?i.errorMessage=e.t0.response.data.message||"An error occurred during upload.":i.errorMessage="Connection failed.",a.status="error",i.uploading=!1,i.$emit("error",{error:e.t0,file:a}),e.abrupt("return",{v:void 0});case 38:case"end":return e.stop()}},e,this,[[8,29]])}),a=0;case 7:if(!(a<this.files.length)){e.next=15;break}return e.delegateYield(r(a),"t0",9);case 9:if(n=e.t0,"object"!==Object(Xt["a"])(n)){e.next=12;break}return e.abrupt("return",n.v);case 12:a+=1,e.next=7;break;case 15:return e.next=17,this.postUpload();case 17:this.uploading=!1,this.files=[],this.$emit("done",t);case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},fr=hr,mr=r("12b2"),vr=Object(g["a"])(fr,Ht,Yt,!1,null,null,null),gr=vr.exports;y()(vr,{VAlert:T["a"],VBtn:x["a"],VCard:q["a"],VCardActions:Nt["a"],VCardTitle:mr["a"],VLayout:P["a"],VProgressLinear:pt["a"]});var br=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",{on:{submit:function(t){return t.preventDefault(),e.upsert(t)}}},[r("v-card",{attrs:{flat:"",height:"100%"}},[r("v-layout",{staticClass:"pa-2",attrs:{column:"","fill-height":""}},[e._t("header",[r("v-card-title",{staticClass:"pb-0",attrs:{"primary-title":""}},[r("h5",{staticClass:"display-1 secondary--text text--darken-1"}),e._v(e._s(e.edit?"Edit Folder":"Create New Folder"))])]),r("v-card-text",[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{ref:"folderName",attrs:{autofocus:"",label:"Folder Name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),r("girder-breadcrumb",e._b({staticClass:"mb-3",attrs:{readonly:""}},"girder-breadcrumb",{location:e.location,append:e.append},!1)),r("girder-markdown-editor",{attrs:{label:"Description (Optional)"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),r("v-alert",{attrs:{type:"error",value:!!e.error,dismissible:"",transition:"scale-transition"}},[e._v(e._s(e.error))])],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{flat:""},on:{click:function(t){e.$emit("dismiss")}}},[e._v("Cancel")]),r("v-btn",{attrs:{depressed:"",color:"primary",type:"submit",disabled:!e.name}},[e._v(e._s(e.edit?"Save Changes":"Create Folder"))])],1)],2)],1)],1)},yr=[],xr="folder",wr={components:{GirderBreadcrumb:$e,GirderMarkdownEditor:Ft},props:{location:{type:Object,required:!0,validator:Ce(!1)},edit:{type:Boolean,default:!1},preUpsert:{type:Function,default:function(){}},postUpsert:{type:Function,default:function(){}}},inject:["girderRest"],data:function(){return{name:"",description:"",error:""}},computed:{append:function(){return this.edit?[]:[this.name||"New Folder"]}},mounted:function(){this.edit&&this.loadFolder(this.location._id)},methods:{upsert:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.error="",e.prev=1,e.next=4,this.preUpsert();case 4:if(!this.edit){e.next=9;break}return e.next=7,this.girderRest.put("".concat(xr,"/").concat(this.location._id),Object(de["stringify"])({name:this.name,description:this.description}));case 7:e.next=11;break;case 9:return e.next=11,this.girderRest.post(xr,Object(de["stringify"])({parentType:this.location._modelType,parentId:this.location._id,name:this.name,description:this.description,reuseExisting:!1}));case 11:return e.next=13,this.postUpsert();case 13:this.name="",this.description="",this.$emit("done"),e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](1),this.$emit("error",{type:"upsert",error:e.t0}),this.setError(e.t0);case 22:case"end":return e.stop()}},e,this,[[1,18]])}));return function(){return e.apply(this,arguments)}}(),loadFolder:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.error="",e.prev=1,e.next=4,this.girderRest.get("".concat(xr,"/").concat(t));case 4:r=e.sent,a=r.data,this.name=a.name,this.description=a.description,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),this.$emit("error",{type:"load",error:e.t0}),this.setError(e.t0);case 14:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t){return e.apply(this,arguments)}}(),setError:function(e){if(e.response){var t=e.response.data,r=void 0===t?{}:t,a=r.type,n=void 0===a?"unknown":a,i=r.message,s=r.field,o=void 0===s?"unknown":s;this.error="".concat(n," error on ").concat(o,": ").concat(i||e.message)}else this.error="Unknown error: ".concat(e.message)}}},kr=wr,_r=Object(g["a"])(kr,br,yr,!1,null,null,null),Cr=_r.exports;y()(_r,{VAlert:T["a"],VBtn:x["a"],VCard:q["a"],VCardActions:Nt["a"],VCardText:Nt["b"],VCardTitle:mr["a"],VFlex:et["a"],VForm:$["a"],VLayout:P["a"],VSpacer:E["a"],VTextField:L["a"]});var jr=r("a78e"),Rr=r.n(jr);function Or(e){Rr.a.set("girderToken",e.token,{expires:new Date(e.expires)})}var Tr=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.apiRoot,n=void 0===a?"/api/v1":a,i=r.token,s=void 0===i?Rr.a.get("girderToken"):i,o=r.axios,l=void 0===o?fe.a.create():o,c=r.setLocalCookie,u=void 0===c||c;return Object(ie["a"])(this,t),e=Object(le["a"])(this,Object(ce["a"])(t).call(this,{data:{user:null,token:s}})),Object.assign(Object(ue["a"])(Object(ue["a"])(e)),l,{apiRoot:n,setLocalCookie:u}),e.interceptors.request.use(function(t){return Object(Z["a"])({},t,{baseURL:e.apiRoot,headers:Object(Z["a"])({"Girder-Token":e.token},t.headers)})}),e}return Object(oe["a"])(t,[{key:"login",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,r){var a,n,i,s=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=1,e.next=4,this.logout();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:return n={"Girder-Token":null},a&&(n["Girder-OTP"]=a),e.next=12,this.get("user/authentication",{headers:n,auth:{username:t,password:r}});case 12:return i=e.sent,this.token=i.data.authToken.token,this.user=i.data.user,this.setLocalCookie&&Or(i.data.authToken),this.$emit("login",this.user),e.abrupt("return",i);case 18:case"end":return e.stop()}},e,this,[[1,6]])}));return function(t,r){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.token){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.delete("user/authentication");case 5:e.next=11;break;case 7:if(e.prev=7,e.t0=e["catch"](2),401===e.t0.response.status){e.next=11;break}throw e.t0;case 11:return e.prev=11,this.token=null,this.user=null,Rr.a.remove("girderToken"),this.$emit("logout"),e.finish(11);case 17:case"end":return e.stop()}},e,this,[[2,7,11,17]])}));return function(){return e.apply(this,arguments)}}()},{key:"fetchUser",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.get("user/me");case 2:return t=e.sent,this.user=t.data,null===this.user&&(this.token=null),e.abrupt("return",this.user);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,r,a,n,i){var s,o,l=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=l.length>5&&void 0!==l[5]&&l[5],e.next=3,this.post("user",Object(de["stringify"])({login:t,email:r,firstName:a,lastName:n,password:i,admin:s}));case 3:if(o=e.sent,o.data.authToken){e.next=6;break}return e.abrupt("return",o);case 6:return this.token=o.data.authToken.token,this.user=o.data,this.setLocalCookie&&Or(o.data.authToken),this.$emit("register",this.user),this.$emit("login",this.user),e.abrupt("return",o);case 12:case"end":return e.stop()}},e,this)}));return function(t,r,a,n,i){return e.apply(this,arguments)}}()}]),Object(se["a"])(t,e),t}(a["a"]);function Vr(e){e.use(s["a"],ne),e.use(i.a)}var $r={install:Vr},Pr=function(e){function t(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.EventSource,i=void 0===n?window.EventSource:n,s=a.listenToRestClient,o=void 0===s||s,l=a.pollingInterval,c=void 0===l?[500,5e3,1e3]:l,u=a.since,d=void 0===u?new Date:u,p=a.useEventSource,h=void 0!==p&&p,f=a.withCredentials,m=void 0===f||f;return Object(ie["a"])(this,t),r=Object(le["a"])(this,Object(ce["a"])(t).call(this)),Object.assign(Object(ue["a"])(Object(ue["a"])(r)),{$rest:e,EventSource:i,pollingInterval:c,since:d,useEventSource:h,withCredentials:m}),o&&(e.$on("login",function(){r.connect()}),e.$on("logout",function(){r.disconnect()})),r}return Object(oe["a"])(t,[{key:"_emitNotification",value:function(e){var t=e.type,r=e.updated;r&&(this.since=new Date(Math.max(+this.since,+new Date(r))));for(var a=t.indexOf(".");-1!==a;a=t.indexOf(".",a+1))this.$emit("message:".concat(t.substring(0,a)),e,this);this.$emit("message:".concat(t),e,this),this.$emit("message",e,this)}},{key:"_onSseMessage",value:function(e){var t=e.data;this._emitNotification(JSON.parse(t))}},{key:"_onSseError",value:function(e){this.$emit("error",e,this),this.disconnect(),this.useEventSource=!1,this.connect()}},{key:"connect",value:function(){if(!this.connected)if(this.useEventSource&&this.EventSource){var e=Math.ceil(+this.since/1e3),t="".concat(this.$rest.apiRoot,"/notification/stream?since=").concat(e);this._eventSource=new this.EventSource(t,{withCredentials:this.withCredentials}),this._eventSource.onmessage=this._onSseMessage.bind(this),this._eventSource.onerror=this._onSseError.bind(this),this.$emit("start",this)}else this._poll()}},{key:"disconnect",value:function(){this._stopPolling(),this._eventSource&&(this._eventSource.close(),this._eventSource=null,this.$emit("stop",this))}},{key:"_poll",value:function(){var e,t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=Object(pe["a"])(this.pollingInterval,3),n=a[0],i=a[1],s=a[2];this._poller=setTimeout(Object(c["a"])(regeneratorRuntime.mark(function a(){var o,l;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$rest.get("/notification?since=".concat(t.since.toISOString()));case 3:o=a.sent,l=o.data,l.forEach(t._emitNotification.bind(t)),e=l.length?n:0===r?i:Math.min(r+s,i),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](0),e=i;case 12:return a.prev=12,t._poll(e),a.finish(12);case 15:case"end":return a.stop()}},a,this,[[0,9,12,15]])})),r)}},{key:"_stopPolling",value:function(){clearTimeout(this._poller),this._poller=null}},{key:"connected",get:function(){return!(!this._eventSource&&!this._poller)}}]),Object(se["a"])(t,e),t}(a["a"]),Er=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{staticClass:"app"},[r("v-content",[r("v-toolbar",{staticClass:"toolbar-main",attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[e._v("Girder Web Components")]),r("v-toolbar-items",[r("v-menu",{attrs:{"offset-y":"",left:"","close-on-content-click":!1,"content-class":"girder-search-arrow-menu"},model:{value:e.uiOptionsMenu,callback:function(t){e.uiOptionsMenu=t},expression:"uiOptionsMenu"}},[r("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[r("v-icon",{staticClass:"mdi-24px"},[e._v(e._s(e.$vuetify.icons.more))])],1),r("v-card",[r("v-card-actions",[r("v-layout",{attrs:{column:""}},[r("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Worker Jobs"},model:{value:e.jobsEnabled,callback:function(t){e.jobsEnabled=t},expression:"jobsEnabled"}}),r("v-divider",{staticClass:"mt-2 mb-1"}),r("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Data Browser"},model:{value:e.browserEnabled,callback:function(t){e.browserEnabled=t},expression:"browserEnabled"}}),r("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Select"},model:{value:e.selectable,callback:function(t){e.selectable=t},expression:"selectable"}}),r("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Draggable"},model:{value:e.dragEnabled,callback:function(t){e.dragEnabled=t},expression:"dragEnabled"}}),r("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"New Folder"},model:{value:e.newFolderEnabled,callback:function(t){e.newFolderEnabled=t},expression:"newFolderEnabled"}}),r("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Upload"},model:{value:e.uploadEnabled,callback:function(t){e.uploadEnabled=t},expression:"uploadEnabled"}}),r("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Root Disabled"},model:{value:e.rootLocationDisabled,callback:function(t){e.rootLocationDisabled=t},expression:"rootLocationDisabled"}}),r("v-divider",{staticClass:"mt-2 mb-1"}),r("v-checkbox",{staticClass:"mt-1 mb-1",attrs:{"hide-details":"",label:"Search Box"},model:{value:e.searchEnabled,callback:function(t){e.searchEnabled=t},expression:"searchEnabled"}})],1)],1)],1)],1)],1),r("v-spacer"),e.searchEnabled?r("girder-search",{on:{select:e.handleSearchSelect}}):e._e(),e.loggedOut?e._e():r("v-btn",{attrs:{flat:"",icon:""},on:{click:function(t){e.girderRest.logout()}}},[r("v-icon",[e._v("$vuetify.icons.logout")])],1)],1),r("v-container",{staticClass:"pa-3",attrs:{fluid:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[e.loggedOut?r("v-flex",{staticClass:"ma-2"},[r("girder-auth",{key:e.girderRest.token,attrs:{"force-otp":!1,register:!0,oauth:!0,"forgot-password-url":e.forgotPasswordUrl}})],1):e._e(),r("v-layout",{staticClass:"ma-2 grow",attrs:{column:""}},[e.browserEnabled?r("girder-file-manager",{staticClass:"mb-3",attrs:{"drag-enabled":e.dragEnabled,"new-folder-enabled":e.newFolderEnabled,selectable:e.selectable,location:e.location,"root-location-disabled":e.rootLocationDisabled,"upload-multiple":e.uploadMultiple,"upload-enabled":e.uploadEnabled},on:{"update:location":function(t){e.location=t},"selection-changed":function(t){e.selected=t}}}):e._e(),e.jobsEnabled?r("girder-job-list"):e._e()],1)],1)],1)],1)],1)},Lr=[],Sr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"girder-data-browser-snippet"},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{grow:""}},[r("v-card",[r("girder-data-browser",{ref:"girderBrowser",attrs:{location:e.internalLocation,selectable:e.selectable,draggable:e.dragEnabled,"root-location-disabled":e.rootLocationDisabled},on:{"update:location":function(t){e.internalLocation=t},"selection-changed":function(t){e.$emit("selection-changed",t)},drag:function(t){e.$emit("drag",t)},dragstart:function(t){e.$emit("dragstart",t)},dragend:function(t){e.$emit("dragend",t)},drop:function(t){e.$emit("drop",t)}},scopedSlots:e._u([{key:"breadcrumb",fn:function(e){return[r("girder-breadcrumb",{attrs:{location:e.location,"root-location-disabled":e.rootLocationDisabled},on:{crumbclick:function(t){e.changeLocation(t)}}})]}}])},[r("template",{slot:"headerwidget"},[e.shouldShowUpload?r("v-dialog",{attrs:{"full-width":"","max-width":"800px"},model:{value:e.uploaderDialog,callback:function(t){e.uploaderDialog=t},expression:"uploaderDialog"}},[r("v-btn",{staticClass:"ma-0",attrs:{slot:"activator",flat:"",small:"",color:"secondary darken-2"},slot:"activator"},[r("v-icon",{staticClass:"mdi-24px mr-1",attrs:{left:"",color:"accent"}},[e._v(e._s(e.$vuetify.icons.fileNew))]),r("span",{staticClass:"hidden-xs-only"},[e._v("New Item")])],1),r("girder-upload",{attrs:{dest:e.uploadDest,"pre-upload":e.preUpload,"post-upload":e.postUploadInternal,multiple:e.uploadMultiple}})],1):e._e(),e.newFolderEnabled&&!e.isRootLocation(e.internalLocation)&&e.girderRest.user?r("v-dialog",{attrs:{"full-width":"","max-width":"800px"},model:{value:e.newFolderDialog,callback:function(t){e.newFolderDialog=t},expression:"newFolderDialog"}},[r("v-btn",{staticClass:"ma-0",attrs:{slot:"activator",flat:"",small:"",color:"secondary darken-2"},slot:"activator"},[r("v-icon",{staticClass:"mdi-24px mr-1",attrs:{left:"",color:"accent"}},[e._v(e._s(e.$vuetify.icons.folderNew))]),r("span",{staticClass:"hidden-xs-only"},[e._v("New Folder")])],1),r("girder-upsert-folder",{key:e.internalLocation._id,attrs:{location:e.internalLocation,"pre-upsert":e.preUpsert,"post-upsert":e.postUpsertInternal},on:{dismiss:function(t){e.newFolderDialog=!1}}})],1):e._e()],1)],2)],1)],1)],1)],1)},Fr=[],Ur=r("5118"),Dr={components:{GirderBreadcrumb:$e,GirderUpload:gr,GirderUpsertFolder:Cr,GirderDataBrowser:We},props:{location:{type:Object,validator:Ce(!0),default:null},rootLocationDisabled:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},dragEnabled:{type:Boolean,default:!1},uploadEnabled:{type:Boolean,default:!1},newFolderEnabled:{type:Boolean,default:!1},uploadMultiple:{type:Boolean,default:!1},uploadAccept:{type:String,default:"*"},preUpload:{type:Function,default:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},postUpload:{type:Function,default:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},preUpsert:{type:Function,default:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},postUpsert:{type:Function,default:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},inject:["girderRest"],data:function(){return{uploaderDialog:!1,newFolderDialog:!1,lazyLocation:null}},computed:{internalLocation:{get:function(){var e=this.location,t=this.lazyLocation;return e||(t||{type:"root"})},set:function(e){this.lazyLocation=e,this.$emit("update:location",e)}},uploadDest:function(){var e=this.internalLocation;return e&&"folder"===we(e)?e:null},shouldShowUpload:function(){return this.uploadEnabled&&!ke(this.internalLocation)&&this.girderRest.user&&this.uploadDest}},created:function(){if(!Ce(!this.rootLocationDisabled)(this.internalLocation))throw new Error("root location cannot be used when root-location-disabled is true")},methods:{isRootLocation:ke,postUploadInternal:function(){return this.$refs.girderBrowser.refresh(),this.uploaderDialog=!1,Promise.all([new Promise(function(e){return Object(Ur["setTimeout"])(e,400)}),this.postUpload()])},postUpsertInternal:function(){return this.$refs.girderBrowser.refresh(),this.newFolderDialog=!1,Promise.all([new Promise(function(e){return Object(Ur["setTimeout"])(e,400)}),this.postUpsert()])}}},Ir=Dr,Mr=r("169a"),Nr=Object(g["a"])(Ir,Sr,Fr,!1,null,null,null),Br=Nr.exports;y()(Nr,{VBtn:x["a"],VCard:q["a"],VDialog:Mr["a"],VFlex:et["a"],VIcon:k["a"],VLayout:P["a"]});var zr={name:"App",inject:["girderRest"],components:{GirderAuth:H,GirderFileManager:Br,GirderSearch:Kt,GirderJobList:bt},data:function(){return{browserEnabled:!0,dragEnabled:!1,forgotPasswordUrl:"/#?dialog=resetpassword",jobsEnabled:!1,internalLocation:null,rootLocationDisabled:!1,searchEnabled:!0,selected:[],selectable:!0,uiOptionsMenu:!1,uploadEnabled:!0,uploadMultiple:!0,newFolderEnabled:!0}},computed:{loggedOut:function(){return null===this.girderRest.user},location:{get:function(){return this.internalLocation||(this.loggedOut?{type:"collections"}:this.girderRest.user)},set:function(e){this.internalLocation=e}}},methods:{handleSearchSelect:function(e){["user","folder"].indexOf(e._modelType)>=0?this.location=e:this.location={_modelType:"folder",_id:e.folderId}}}},Ar=zr,qr=(r("dfa1"),r("7496")),Gr=r("549c"),Jr=Object(g["a"])(Ar,Er,Lr,!1,null,null,null),Wr=Jr.exports;y()(Jr,{VApp:qr["a"],VBtn:x["a"],VCard:q["a"],VCardActions:Nt["a"],VCheckbox:Ie["a"],VContainer:w["a"],VContent:Gr["a"],VDivider:V["a"],VFlex:et["a"],VIcon:k["a"],VLayout:P["a"],VMenu:Gt["a"],VSpacer:E["a"],VToolbar:Et["a"],VToolbarItems:Lt["a"],VToolbarTitle:Lt["b"]}),a["a"].use($r);var Qr=new Tr({apiRoot:"https://data.kitware.com/api/v1"}),Kr=new Pr(Qr);Kr.connect(),Qr.fetchUser().then(function(){new a["a"]({render:function(e){return e(Wr)},provide:{girderRest:Qr,notificationBus:Kr}}).$mount("#app")})},a2fd:function(e,t,r){},afe4:function(e,t,r){},dfa1:function(e,t,r){"use strict";var a=r("a2fd"),n=r.n(a);n.a},e589:function(e,t,r){"use strict";var a=r("73bd"),n=r.n(a);n.a},edaa:function(e,t,r){"use strict";var a=r("484c"),n=r.n(a);n.a},eea8:function(e,t,r){"use strict";var a=r("a0d8"),n=r.n(a);n.a}});
//# sourceMappingURL=app.c4010610.js.map